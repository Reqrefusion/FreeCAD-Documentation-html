<link href="site.css" rel="stylesheet" type="text/css"/>
<div class="mw-page-container"><h1 class="firstHeading mw-first-heading" id="firstHeading"><span class="mw-page-title-main">Macro Zoom1 1</span></h1><div class="mw-parser-output"><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" dir="ltr" lang="en">English</span></li>
<li><a class="mw-pt-progress mw-pt-progress--complete" dir="ltr" href="fr\Macro_Zoom1_1.html" lang="fr" title="Macro Zoom1 1 (100% translated)">français</a></li>
<li><a class="mw-pt-progress mw-pt-progress--stub" dir="ltr" href="pl\Macro_Zoom1_1.html" lang="pl" title="Makrodefinicja: Zoom1 1 (7% translated)">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="float: right; width: 230px; margin-left: 10px;" width="100%">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a class="mw-file-description" href="File/Zoom1_1.svg"><img decoding="async" height="32" src="File/Zoom1_1.svg" width="32"/></a></span><span> </span>
Zoom 1:1
</p>
</td></tr>
<tr>
<th class="ctOdd">Description
</th></tr>
<tr>
<td class="ctEven left macro-description">1:1 Zooming so objects appear their actual size on the screen.<br/><br/>Macro version: 1.0<br/>Last modified: 2021-11-9<br/>FreeCAD version: Python3+<br/>Download: <a class="external text" href="https://wiki.freecadweb.org/File:Zoom1_1.svg" rel="nofollow">ToolBar Icon</a><br/>Author: TheMarkster<br/>
</td></tr>
<tr>
<th class="ctOdd">Author
</th></tr>
<tr>
<td class="ctEven macro-author"><a class="new" href="index.php?title=User;TheMarkster&amp;action=edit&amp;redlink=1.html" title="User:TheMarkster (page does not exist)">TheMarkster</a>
</td></tr>
<tr>
<th class="ctOdd">Download
</th></tr>
<tr>
<td class="ctEven macro-download"><a class="external text" href="https://wiki.freecadweb.org/File:Zoom1_1.svg" rel="nofollow">ToolBar Icon</a>
</td></tr>
<tr>
<th class="ctOdd">Links
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="Macros_recipes.html" title="Macros recipes">Macros recipes</a><br/><a href="How_to_install_macros.html" title="How to install macros">How to install macros</a><br/><a href="Customize_Toolbars.html" title="Customize Toolbars">How to customize toolbars</a>
</td></tr>
<tr>
<th class="ctOdd">Macro Version
</th></tr>
<tr>
<td class="ctEven macro-version">1.0
</td></tr>
<tr>
<th class="ctOdd">Date last modified
</th></tr>
<tr>
<td class="ctEven macro-date">2021-11-9
</td></tr>
<tr>
<th class="ctOdd">FreeCAD Version(s)
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">Python3+
</td></tr>
<tr>
<th class="ctOdd">Default shortcut
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br/><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_To_Use"><span class="tocnumber">2</span> <span class="toctext">How To Use</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#How_it_works"><span class="tocnumber">3</span> <span class="toctext">How it works</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Limitations"><span class="tocnumber">4</span> <span class="toctext">Limitations</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Precautions"><span class="tocnumber">5</span> <span class="toctext">Precautions</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Script"><span class="tocnumber">6</span> <span class="toctext">Script</span></a></li>
</ul>
</div>
</td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Zooms the camera so objects appear their actual size on your screen. For example, you should be able to measure a 100 mm cube to be 100 mm with a ruler held up to your screen.
</p>
<h2><span class="mw-headline" id="How_To_Use">How To Use</span></h2>
<p>Execute the macro to zoom to the actual size of your objects. Sometimes, due to limitations with Qt the hardware information given to the macro might be incorrect, for example the screen width, in millimeters might be incorrect. For such cases there is a calibration dialog. To bring up the dialog, press Ctrl key while executing the macro. A 100 mm temporary cube is created. Measure the cube that appears on your screen with a ruler or caliper and enter your measurements (in MM) into the dialog. It will compute the appropriate tweak parameter to use for your hardware.
</p><p>This tweak parameter is stored in user parameters at Plugins/Zoom1_1_Macro/Tweak.
</p>
<h2><span class="mw-headline" id="How_it_works">How it works</span></h2>
<p>The screen size (of the MDI view, aka the 3D view) is fetched from Qt in MM. The camera height is then set to the lesser of the width or height of the screen. For example, if the screen width/height is 800, 600, then the camera height is set to 600 above the scene.
</p>
<h2><span class="mw-headline" id="Limitations">Limitations</span></h2>
<ol><li>Sometimes for various reasons the information provided to the macro by Qt regarding hardware dimensions might be incorrect, in which case the Tweak parameter is needed via the integrated calibration dialog.</li>
<li>Only works with orthographic camera modes.</li>
<li>Obviously, there is a limited range of sizes where this can be used.</li></ol>
<h2><span class="mw-headline" id="Precautions">Precautions</span></h2>
<p>Care must be taken when holding up objects or attempting to measure things on the screen lest the screen be physically scratched.
</p>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<p>The macro icon
<span typeof="mw:File"><a class="mw-file-description" href="File/Zoom1_1.svg"><img decoding="async" height="48" src="File/Zoom1_1.svg" width="48"/></a></span>
</p><p><b>Zoom1_1.FCMacro</b>
</p>
<pre># -*- coding: utf-8 -*-
#Zoom 1:1 macro
#2021, by &lt;TheMarkster&gt;, based on work of kisolre
#Attempts to zoom 3D view such that objects on the screen
#appear to be their actual size
#For example, a 100mm cube should measure 100mm on your screen
#This relies on information provided by Qt about the underlying
#hardware, which Qt admits is not always reliable
#Thus we have a Tweak parameter to workaround such cases.
#Press Ctrl key while executing the macro to bring up the
#calibration dialog and set the tweak for your hardware.


import FreeCAD, FreeCADGui
from PySide import QtGui, QtCore

__version__ = "1.0"

def zoomActual(tweak=1.0):
    gv = av.graphicsView()
    height = gv.heightMM()
    width = gv.widthMM()
    node = av.getCameraNode()
    node.height.setValue(tweak*min(width,height))

doc = FreeCAD.ActiveDocument
if not doc:
    doc = FreeCAD.newDocument()
    FreeCAD.Console.PrintMessage("No document, creating one.\n")
av = FreeCADGui.activeView()
pg = FreeCAD.ParamGet("User parameter:Plugins/Zoom1_1_Macro")
tweak = pg.GetFloat("Tweak",1.0)
if hasattr(av,"graphicsView") and hasattr(av.getCameraNode(),"height"):
    zoomActual(tweak)
    modifiers = QtGui.QApplication.keyboardModifiers()
    if modifiers == QtCore.Qt.ControlModifier:
        visible = [obj for obj in doc.Objects if hasattr(obj,"ViewObject") and obj.ViewObject.Visibility == True]
        for obj in doc.Objects:
            if hasattr(obj,"ViewObject"):
                obj.ViewObject.Visibility = False
        cube = doc.addObject("Part::Box","TemporaryCalibrationCube")
        cube.Length = cube.Height = cube.Width = 100
        cube.ViewObject.DisplayMode = "Shaded"
        av.viewFront()
        doc.recompute()
        zoomActual(1.0)
        text = "\
Calibration dialog\n\
\n\
A temporary 100x100x100 mm cube has been created for this\n\
calibration. Measure this cube and enter your measurements.\n\
A tweak value will be calculated based on what you enter and \n\
will be stored in user parameters / Plugins / Zoom1_1_Macro\n\
\n\
You can move this dialog if necessary, but be sure not to zoom\n\
in or out before measuring the cube. If the cube does not fit\n\
cancel this dialog, resize the 3D view, and try again.\n\
\n\
Enter measured Cube Width or Height (in MM):\n"
        win = FreeCADGui.getMainWindow()
        title = "Zoom1_1 macro v"+__version__
        dlg = QtGui.QInputDialog()
        usertweak,ok = dlg.getDouble(win,title,text,100.0)
        doc.removeObject(cube.Name)
        for obj in visible:
            obj.ViewObject.Visibility = True
        if not ok:
            FreeCAD.Console.PrintMessage("Canceled, keeping current tweak value\n")
        else:
            tweak = usertweak/100.0
            pg.SetFloat("Tweak", tweak)
            zoomActual(tweak)
    FreeCAD.Console.PrintMessage("Zoom 1:1 macro -- Ctrl + execute to calibrate, if necessary\n")
    FreeCAD.Console.PrintMessage("Tweak = "+str(tweak)+"\n")
elif not hasattr(av.getCameraNode(),"height"):
    FreeCAD.Console.PrintError("Error: Only orthographic camera types are supported.\n")
else:
    FreeCAD.Console.PrintError("Error acquiring QGraphicsView. You might need to update your version of FreeCAD.\n")</pre>
<!-- 
NewPP limit report
Cached time: 20241214202828
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc, no‐toc‐conversion]
CPU time usage: 0.041 seconds
Real time usage: 0.064 seconds
Preprocessor visited node count: 106/1000000
Post‐expand include size: 1842/2097152 bytes
Template argument size: 3581/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3843/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    9.165      1 -total
 69.58%    6.377      1 Template:Macro
 29.46%    2.700      1 Template:MacroCode
-->
<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:272564-0!canonical and timestamp 20241214202828 and revision id 1086103. Rendering was triggered because: api-parse
 -->
</div></div><script src="script.js"></script>
