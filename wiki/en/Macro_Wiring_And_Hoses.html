<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Macro Wiring And Hoses/en</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../Macro_Wiring_And_Hoses.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Macro Wiring And Hoses (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../fr/Macro_Wiring_And_Hoses.html" class="mw-pt-progress mw-pt-progress--complete" title="Macro Wiring And Hoses (98% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Macro_Wiring_And_Hoses.html" class="mw-pt-progress mw-pt-progress--stub" title="Macro Cablaggio e Tubazioni (5% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Macro_Wiring_And_Hoses.html" class="mw-pt-progress mw-pt-progress--complete" title="Makrodefinicja: Okablowanie i ruroci&#261;gi (98% translated)" lang="pl" dir="ltr">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" width="100%" style="float: right; width: 230px; margin-left: 10px;">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a href="../index.php?title=Text-x-python.png&amp;filetimestamp=20121224162851&amp;.html" class="mw-file-description" title="Generic macro icon. Create your personal icon with the same name of the macro"><img alt="Generic macro icon. Create your personal icon with the same name of the macro" src="../File/Text-x-python.png" decoding="async" width="32" height="32"></a></span><span> </span>
Macro Wiring And Hoses
</p>
</td></tr>
<tr>
<th class="ctOdd">Description
</th></tr>
<tr>
<td class="ctEven left macro-description">These macros support the creation and maintenance of Wires and Hoses.<br><br>Author: Piffpoof<br>
</td></tr>
<tr>
<th class="ctOdd">Author
</th></tr>
<tr>
<td class="ctEven macro-author"><a href="../User;Piffpoof.html" title="User:Piffpoof">Piffpoof</a>
</td></tr>
<tr>
<th class="ctOdd">Download
</th></tr>
<tr>
<td class="ctEven macro-download"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">Links
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="../Macros_recipes.html" title="Macros recipes">Macros recipes</a><br><a href="../How_to_install_macros.html" title="How to install macros">How to install macros</a><br><a href="../Customize_Toolbars.html" title="Customize Toolbars">How to customize toolbars</a>
</td></tr>
<tr>
<th class="ctOdd">Macro Version
</th></tr>
<tr>
<td class="ctEven macro-version">1.0
</td></tr>
<tr>
<th class="ctOdd">Date last modified
</th></tr>
<tr>
<td class="ctEven macro-date"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">FreeCAD Version(s)
</th></tr>
<tr>
<td class="ctEven FreeCAD-version"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">Default shortcut
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr>
</tbody></table>
<p><b>From <a href="../User;Piffpoof.html" title="User:Piffpoof">User:Piffpoof</a> Note: some changes between v 0.14 and v 0.15 have effected this macro which will delay releasing it</b>
</p><p>These macros support the creation and maintenance of Wires and Hoses.
</p><p><span class="mw-default-size" typeof="mw:File"><a href="../index.php?title=Macro_Wiring_And_HosesCompletedHouse.jpg&amp;filetimestamp=20150225164901&amp;.html" class="mw-file-description"><img src="../File/Macro_Wiring_And_HosesCompletedHouse.jpg" decoding="async" width="500" height="418"></a></span>
</p>
<h2><span class="mw-headline" id="Background">Background</span></h2>
<p>As part of our other FreeCAD projects we needed some way to document wiring and hoses. This set of macros was developed to meet that need. There is a lot this system doesn't do, but what it does do is provide visual representation of wiring and hoses, either as an isolated system or with the wiring and hoses in the context of a FreeCAD model. The record of all the wires and hoses is kept in a CSV format file outside of FreeCAD. So the file may be loaded into a spreadsheet program or used by other software.
</p>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>As part of a documentation project we discovered we needed to document wires and hoses. We tried some different scenarios such as creating lines or cylinders as part of the existing model. Due to either problems using or maintaining it we decided to keep the information in a different format and outside of FreeCAD. That way they could be created on their own or created within an existing document. That decision allowed the user to work with the wiring and hoses in the way which suited them. As well they could work with it in different ways at different times as needs changed.
</p><p>We initially weren't sure how to maintain a list of the hoses and wires and various different approaches were tried. The easiest way seemed to be to use the CSV file format which has been around for a long time. Also there were routines already written for managing CSV files from Python. Some of the advantages were:
</p>
<ul><li>human readable</li>
<li>can be loaded into any spreadsheet</li>
<li>can be maintained using a spreadsheet or simple text editor</li>
<li>a possible future enhancement would be to use it with the FreeCAD spreadsheet workbench</li></ul>
<p>The next decisions were "how" to define such cables runs. As our purpose was primarily documentation, we chose to run line segments from point to point. Issues such as turn radius are not dealt with. Also cable diameter is not handled. A table of the cable runs is maintained through the CSV file but such things as proximity of cables (for electrical interference issues) and run length are not supported (although it might be possible to add a rudimentary cable run length quite easliy).
</p><p>This set of macros is essentially a "proof of concept", it demonstrates some ideas and their feasibility. Our main goal was documentation, not physical plant management.We decided to maintain a data structure of points, which are the points through which the wires and hoses run. Secondly we set up a data structure which defines the cables and hoses in terms of the points they pass through. So a wire may only be routed where points for it have been defined.
</p><p>For the 2 data structures we chose the following names:
</p>
<ul><li>Nexus - a point through which a cable or hose may pass (the plural is Nexi). Nexi are simply points in 3-space, for ease of visualisation the software places toroid rings around the location but this is only for ease of use. The toroid rings can be toggled off or on depending on user preference</li>
<li>Flows - generically these are routes comprised of Nexi. A code is associated with each type, the default codes being
<ul><li>W - electrical wires</li>
<li>C - conduits, intended primarily for wires but able to contain anything</li>
<li>H - hoses to carry a variety of liquids</li>
<li>G - gas lines</li>
<li>K - a camera routing, this is really just reserved for future exploration as per <a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=24&amp;t=8437">Tour camera animation</a></li></ul></li></ul>
<p><br>
Both Nexi and Flows have user assigned names, in addition Nexi have internally assigned IDs to facilitate management. Being points or locations in 3-space Nexi do not have colours but Flows can have one of 48 defined colours. The emphasis on colours ties back to the intended purpose being one of documentation.
</p><p><br>
The general workflow is
</p>
<ul><li>define and position Nexi</li>
<li>define Flow(s) in term of Nexi</li>
<li>for maintenance purposes edit both Nexi and Flows either visually using the FreeCAD GUI or using a tabular approach and the CSV definitions</li></ul>
<p><br>
As the data file which holds both the Nexi and Flow definition is text based it can be used in any text editor or by any other program wishing to access the data.
</p><p><br>
</p>
<h3><span class="mw-headline" id="Navigation_Modes">Navigation Modes</span></h3>
<p>As a large part of the work with these macros depends on manipulating the display of the model to place and verify the placement of point in 3-space, it is essential to be comfortable with the Navigational Modes of FreeCAD which are documented on the page <a href="../Mouse_navigation.html" title="Mouse navigation">Mouse navigation</a>. Being able to rotate the model in 3-space and then perform operations on a stationary model are essential.
</p><p><br>
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The code for Wiring And Hoses is in multiple macros and a library. So installation is comprised of copying the code to the appropriate Macro directory and invoking the Build Utility from the Macro menu, the Python console or a toolbar button (the preferred method).
</p><p><br>
&lt;more to come&gt;
</p>
<ul><li>see <a href="../How_to_install_macros.html" title="How to install macros">How to install macros</a> for information on how to install this macro code</li>
<li>see <a href="../Customize_Toolbars.html" title="Customize Toolbars">Customize Toolbars</a> for information how to install as a button on a toolbar</li></ul>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>There are really two different approaches to working with these macros: the nexi and flows can be defined on their own using 3-space coordinates; or an existing FreeCAD document can be used and the nexi and flows can be defined in the context of that document. This is not an 'either/or' decision but rather both approaches can be used when they are the most appropriate. As the definitions of the nexi and flows are kept in a CSV format file which is stored outside of FreeCAD, the presence or absence of a FreeCAD document does not affect working with the nexi and flow, it makes it easier by providing a visual context. For this description of usage the example will use a previously loaded FreeCAD document as a context as it is easier to place the 
</p><p><br>
The usage of these macros really breaks down into 3 sections:
</p>
<ul><li>define nexi</li>
<li>define flows</li>
<li>edit the CSV format file to alter or add nexi and flows</li></ul>
<p><br>
There are alternative ways to perform some of the tasks outlined below and personal preference can decide. This example will apply electrical wiring and cold water plumbing to a house. Our empty house looks like this
</p><p><br>
<span class="mw-default-size" typeof="mw:File"><a href="../index.php?title=Macro_Wiring_And_HosesEmptyHouse.jpg&amp;filetimestamp=20150225164838&amp;.html" class="mw-file-description"><img src="../File/Macro_Wiring_And_HosesEmptyHouse.jpg" decoding="async" width="500" height="440"></a></span>
</p><p>and is waiting for cold water and electricity to be installed. For convenience of explanation all the electrical items are in yellow and the water in blue (aside from the 2 sinks).
</p><p><br>
</p>
<h3><span class="mw-headline" id="Define_Nexi">Define Nexi</span></h3>
<p>The first step is one of creating points in 3-space (called 'nexi' or 'nexus" in the plural). These points will be used in the next step to define a flow. We create these points by clicking on (i.e. selecting) a surface and then supplying a name for the nexi. This description is of defining the nexi for the water flow.
</p><p><br>
</p>
<ol><li>click on &lt;N icon&gt;</li>
<li>the following dialog will appear:</li></ol>
<p>&lt;screenSnapshot Do You Want to Load&gt;
This is asking if you would like to open and load a FreeCAD document which has the model which you wish to add nexi and flows to. It is not necessary to load one but for this example we will load our empty house
</p>
<ol><li>select a surface by clicking on it, it will be highlighted in the Tree window and have a colour indicating selected in the display.</li>
<li>click on &lt;N icon&gt;</li>
<li>the following dialog will appear asking for a name for the new nexi:</li></ol>
<p>&lt;screenSnapshot Nexus Name&gt;
</p>
<ol><li>the nexi will now be defined. It will be positioned in 3-space so that it is on the line from the selected face to the viewer, positioned just off the face so that it is not inside the object. Although the nexus might not be in the perfect position, leave it for the moment as it will be edited in a later step. A toroid (i.e. ring) will be displayed, it is centred on the point of the nexus. This ring is purely a visualisation tool so the location of the point can be  identified. The visualisation rings can be toggled on/off at any time.</li>
<li>define any more nexi in the same fashion, giving each a meaningful name</li>
<li>click on &lt;N icon&gt;</li>
<li>the following dialog will appear:</li></ol>
<p>&lt;screenSnapshot Save to a File&gt;
</p>
<ol><li>answer Yes to save your new nexi</li></ol>
<p><strong>Note</strong>: at any point you can merge an existing project so as to have a visual context
</p><p><br>
</p>
<h3><span class="mw-headline" id="Define_Flow">Define Flow</span></h3>
<p>Once nexi have been defined they can be used to define a flow. Our house now looks like this:
</p><p>&lt; picture of house with nexi but not flows&gt;
</p><p>It has nexi defined for the water flow but now flows as of yet.
</p><p><br>
</p>
<ol><li>click on &lt;F icon&gt;</li></ol>
<p>the following dialog will appear:
</p><p>&lt;screenSnapshot Select Nexi for Flow&gt;
</p><p><br>
This is asking if you to select the nexi in the order you want them to create your flow.
</p>
<ol><li>select the type of Flow: Wires, Conduits, Hoses, Gas Lines</li>
<li>using the second popup, select the nexi in the order you want them</li></ol>
<p>&lt;screenSnapshot Selected Nexi for Flow&gt;
</p><p><br>
</p>
<ol><li>supply a name for the flow</li>
<li>select a colour for the flow</li>
<li>click OK or Cancel. If you make an error in selecting the nexi (either order or including a wrong nexi) then click Cancel and restart this step.</li></ol>
<p>&lt; picture of house with water flow&gt;
</p><p><span class="mw-default-size" typeof="mw:File"><a href="../index.php?title=Macro_Wiring_And_HosesFlowsOnly.jpg&amp;filetimestamp=20150226104411&amp;.html" class="mw-file-description"><img src="../File/Macro_Wiring_And_HosesFlowsOnly.jpg" decoding="async" width="500" height="358"></a></span>
</p><p><br>
</p>
<h3><span class="mw-headline" id="Editing_Nexi_and_Flows">Editing Nexi and Flows</span></h3>
<p>There are 3 different ways to edit nexi. As the flows are defined in terms of nexi, altering nexi will affect any flow which includes them. For the descriptive flow attributes like colour and name, there is one way to make edits.
</p><p>So far in this example we have generated the following table:
</p><p>&lt;screenSnapshot edit table&gt;
</p><p>&lt;screenSnapshot editing Position for nexus&gt;
</p><p>&lt;screenSnapshot double-click editing of toroid&gt;
</p><p><br>
</p>
<h2><span class="mw-headline" id="User_Interface">User Interface</span></h2>
<p>The user interface is a combination of custom screens along with standard parts of the FreeCAD GUI.
</p><p>&lt;snapshot 1 defining Nexi&gt;
</p><p>&lt;snapshot 2 defining flow&gt;
</p><p>&lt;snapshot 3 editing CSV file&gt;
</p><p>&lt;snapshot 4 editing Position&gt;
</p>
<h2><span class="mw-headline" id="Options">Options</span></h2>
<p>At present there aren't really any options for Wiring and Hoses.
</p>
<h2><span class="mw-headline" id="Sample_Files">Sample Files</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Remarks">Remarks</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Known_Problems">Known Problems</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Future_Possibilities">Future Possibilities</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Glossary">Glossary</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Links">Links</span></h2>
<p>blah blah blah
</p>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<p>blah blah blah
</p>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20250705175150
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc, no&#8208;toc&#8208;conversion]
CPU time usage: 0.040 seconds
Real time usage: 0.068 seconds
Preprocessor visited node count: 121/1000000
Post&#8208;expand include size: 1981/2097152 bytes
Template argument size: 167/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 2/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 890/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   15.597      1 -total
 77.51%   12.090      1 Template:Macro
 20.91%    3.262      1 Template:Clear
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:62216-0!canonical and timestamp 20250705175150 and revision id 1604260. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>