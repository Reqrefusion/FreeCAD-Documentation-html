<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Translating an external workbench/pt-br</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="pt-BR" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Translating+an+external+workbench&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--high" title="&Uuml;bersetzen eines externen Arbeitsbereichs (87% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Translating_an_external_workbench.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Translating an external workbench (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../es/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="Traduciendo un banco de trabajo externo (6% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="../fr/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--high" title="Traduction d'un atelier externe (98% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="Traduzione di un ambiente di lavoro esterno (2% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--high" title="T&#322;umaczenie interfejsu zewn&#281;trznych &#347;rodowisk pracy (98% translated)" lang="pl" dir="ltr">polski</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" lang="pt-BR" dir="ltr">portugu&ecirc;s do Brasil</span></li>
<li><a href="../ru/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="&#1055;&#1077;&#1088;&#1077;&#1074;&#1086;&#1076; &#1074;&#1085;&#1077;&#1096;&#1085;&#1080;&#1093; &#1074;&#1077;&#1088;&#1089;&#1090;&#1072;&#1082;&#1086;&#1074; (14% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<p>Nas notas a seguir, <code>"contexto"</code> deve ser o nome do seu addon ou bancada (workbench), por exemplo, <code>"MeuSuperAddon"</code> ou <code>"DraftPlus"</code>, ou qualquer outro. A capitaliza&ccedil;&atilde;o importa aqui: <code>"Contexto"</code> n&atilde;o &eacute; o mesmo que <code>"contexto"</code>, por exemplo. O contexto faz com que todas as tradu&ccedil;&otilde;es do seu c&oacute;digo sejam agrupadas sob o mesmo nome, para serem mais facilmente identificadas pelos tradutores. Ou seja, eles saber&atilde;o exatamente a qual addon ou bancada uma determinada string pertence.
</p><p><b>Observa&ccedil;&atilde;o</b>: Aqui est&aacute; um script completo que automatiza todo o procedimento mencionado abaixo (ainda &eacute; recomend&aacute;vel ler o procedimento para saber o que o script deve fazer, no entanto): <a rel="nofollow" class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p><p><span id="Preparing_the_sources"></span>
</p>
<meta property="mw:PageProp/toc">
<h2><span id="Preparando_os_c.C3.B3digos_fonte"></span><span class="mw-headline" id="Preparando_os_c&oacute;digos_fonte">Preparando os c&oacute;digos fonte</span></h2>
<p><span id="General"></span>
</p>
<h3><span class="mw-headline" id="Geral">Geral</span></h3>
<ul><li>Adicione uma pasta <code>translations/</code>. Voc&ecirc; pode nome&aacute;-la de outra forma, mas isso ser&aacute; mais f&aacute;cil, pois &eacute; o padr&atilde;o em todo o FreeCAD. Nessa pasta, voc&ecirc; colocar&aacute; os arquivos <code>.ts</code> (arquivos "fonte" de tradu&ccedil;&atilde;o) e os arquivos <code>.qm</code> (arquivos de tradu&ccedil;&atilde;o compilados).</li>
<li>Apenas o texto que &eacute; exibido ao usu&aacute;rio na interface do FreeCAD deve ser traduzido. Textos que s&atilde;o exibidos apenas no console do Python n&atilde;o devem ser traduzidos.</li>
<li>Textos que s&atilde;o impressos no <code>FreeCAD.Console</code> s&atilde;o exibidos no painel "Ver relat&oacute;rio" e, portanto, devem ser traduzidos. O "Ver relat&oacute;rio" &eacute; diferente do console do Python.</li></ul>
<p><span id="In_every_Python_.py_file"></span>
</p>
<h3><span class="mw-headline" id="Em_todo_arquivo_Python_.py">Em todo arquivo Python .py</span></h3>
<ul><li>Em cada arquivo onde voc&ecirc; precisar traduzir textos, ser&aacute; necess&aacute;ria uma fun&ccedil;&atilde;o <code>translate()</code> definida. Ela deve ser nomeada exatamente como <code>translate</code>: o extrator de strings depende desse nome exato. Voc&ecirc; pode usar o nome totalmente qualificado do Qt, mas &eacute; um pouco mais organizado usar:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="n">translate</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">translate</span>
</pre></div></dd></dl>
<ul><li>Todo texto que precisa ser traduzido deve ser passado pela fun&ccedil;&atilde;o <code>translate()</code>:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"My text"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>deve ser:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>Esteja ciente de que <code>translate()</code> n&atilde;o &eacute; apenas uma fun&ccedil;&atilde;o normal: ela tamb&eacute;m serve como uma "etiqueta" para a ferramenta de processamento de texto <code>lupdate</code>, portanto, deve ser nomeada exatamente como "translate". O programa <code>lupdate</code> &eacute; um processador de texto simples e n&atilde;o executa seu c&oacute;digo. Voc&ecirc; deve passar literais de string diretamente para a fun&ccedil;&atilde;o <code>translate()</code>: n&atilde;o &eacute; poss&iacute;vel passar vari&aacute;veis, constantes, etc. Por exemplo:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># This works:</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># This does not, lupdate only sees the word "a_variable", and doesn't know what that is:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="s2">"My text"</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="n">a_variable</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># But this works -- a_variable will contain the translated string:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">a_variable</span>  <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<p>Isso pode ser usado em qualquer lugar: em <code>print()</code>, em <code>FreeCAD.Console.PrintMessage()</code>, em di&aacute;logos Qt, etc. As fun&ccedil;&otilde;es <code>FreeCAD.Console</code> n&atilde;o adicionam automaticamente o caractere de nova linha (<code>\n</code>), ent&atilde;o ele deve ser adicionado ao final, se desejado. Esse caractere tamb&eacute;m n&atilde;o precisa de tradu&ccedil;&atilde;o, ent&atilde;o ele pode estar fora da fun&ccedil;&atilde;o de tradu&ccedil;&atilde;o:
</p>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<ul><li>Se voc&ecirc; estiver usando arquivos <code>.ui</code> criados com o QtDesigner, nada de especial precisa ser feito com eles.</li>
<li>Ao criar novos objetos, n&atilde;o traduza o "Nome" do objeto. Em vez disso, traduza o "R&oacute;tulo" do objeto. A diferen&ccedil;a &eacute; que um "Nome" &eacute; &uacute;nico; ele permanece o mesmo durante toda a vida do objeto; por outro lado, um "R&oacute;tulo" pode ser alterado pelo usu&aacute;rio conforme desejado.</li>
<li>Ao criar propriedades para seus objetos, n&atilde;o traduza o nome da propriedade. Mas coloque a descri&ccedil;&atilde;o dentro de <code>QT_TRANSLATE_NOOP</code>:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyBool"</span><span class="p">,</span> <span class="s2">"MyProperty"</span><span class="p">,</span> <span class="s2">"PropertyGroup"</span><span class="p">,</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"App::Property"</span><span class="p">,</span> <span class="s2">"This is what My Property does"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>N&atilde;o use seu pr&oacute;prio <code>"contexto"</code> neste caso espec&iacute;fico. Mantenha <code>"App::Property"</code>.</dd></dl>
<p><span id="In_InitGui.py"></span>
</p>
<h3><span class="mw-headline" id="Em_InitGui.py">Em InitGui.py</span></h3>
<ul><li>Adicione a seguinte linha no in&iacute;cio do arquivo:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<div class="mw-translate-fuzzy">
<dl><dd>A macro <code>QT_TRANSLATE_NOOP</code> n&atilde;o faz nada, mas marca textos para serem capturados pela ferramenta <code>lupdate</code> posteriormente. N&oacute;s a usamos apenas em casos especiais em que o FreeCAD cuida de tudo automaticamente.</dd></dl>
</div>
<ul><li>Para traduzir nomes de menus e barras de ferramentas, use a palavra <code>"Workbench"</code> como contexto:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My menu"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My toolbar"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div></dd></dl>
<ul><li>Adicione o caminho para a sua pasta <code>translations/</code> e atualize o local na fun&ccedil;&atilde;o initializada:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="s2">"/path/to/translations"</span><span class="p">)</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<dl><dd>O arquivo <code>InitGui.py</code> n&atilde;o possui o atributo <b>file</b>, ent&atilde;o n&atilde;o &eacute; f&aacute;cil encontrar a localiza&ccedil;&atilde;o relativa da pasta de tradu&ccedil;&otilde;es. Uma maneira simples de contornar isso &eacute; faz&ecirc;-lo importar outro arquivo da mesma pasta e, nesse arquivo, fazer:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">"translations"</span><span class="p">))</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<p><span id="Inside_each_FreeCAD_command_class"></span>
</p>
<h3><span class="mw-headline" id="Dentro_de_cada_classe_de_comando_do_FreeCAD">Dentro de cada classe de comando do FreeCAD</span></h3>
<ul><li>Adicione a seguinte linha no in&iacute;cio do arquivo:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<ul><li>Traduza o <code>'MenuText'</code> e o <code>'Tooltip'</code> do comando desta forma:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">),</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div></dd></dl>
<dl><dd>onde <code>"CommandName"</code> &eacute; o nome do comando, definido por:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">'CommandName'</span><span class="p">,</span> <span class="n">My_Command_Class</span><span class="p">())</span>
</pre></div></dd></dl>
<p><span id="Gather_all_the_strings_from_your_module"></span>
</p>
<h2><span id="Coletar_todas_as_strings_do_seu_m.C3.B3dulo"></span><span class="mw-headline" id="Coletar_todas_as_strings_do_seu_m&oacute;dulo">Coletar todas as strings do seu m&oacute;dulo</span></h2>
<ul><li>Voc&ecirc; precisar&aacute; das ferramentas <code>lupdate</code>, <code>lconvert</code>, <code>lrelease</code> e <code>pylupdate</code> instaladas em seu sistema. Em distribui&ccedil;&otilde;es Linux, elas geralmente v&ecirc;m em pacotes chamados <code>pyside-tools</code> ou <code>pyside2-tools</code>. Em alguns sistemas, <code>lupdate</code> &eacute; chamado de <code>lupdate4</code> ou <code>lupdate5</code> ou <code>lupdate-qt4</code> ou similar. O mesmo vale para as outras ferramentas. Voc&ecirc; pode usar a vers&atilde;o Qt4 ou Qt5 &agrave; sua escolha. No Qt6, n&atilde;o h&aacute; um sistema de tradu&ccedil;&atilde;o separado para arquivos Python, <code>lupdate</code> &eacute; usado para extrair strings de todos os tipos de arquivos de c&oacute;digo-fonte.</li>
<li>Se voc&ecirc; tiver arquivos <code>.ui</code>, precisar&aacute; executar o <code>lupdate</code> primeiro:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<div lang="en" dir="ltr" class="mw-content-ltr">
<dl><dd>This is recursive and will find <code>.ui</code> files inside your whole directory structure.</dd></dl>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>If you have <code>.py</code> files, you need to run <code>pylupdate</code> too:</li></ul>
</div>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>If you ran both operations, you now need to unify these two files into one:</li></ul>
</div>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>Check the contents of the three <code>.ts</code> files to make sure that they contain the strings, then you can delete both <code>pyfiles.ts</code> and <code>uifiles.ts</code>.</li>
<li>You can do it all in one bash script like this:</li></ul>
</div>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Send_the_.ts_file_to_a_translation_platform">Send the .ts file to a translation platform</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>It is time to have your <code>.ts</code> file translated. You can choose to set up an account on a public translation platform such as <a rel="nofollow" class="external text" href="https://crowdin.com/">Crowdin</a> or <a rel="nofollow" class="external text" href="https://www.transifex.com/">Transifex</a>, or you can benefit from our existing <a rel="nofollow" class="external text" href="https://crowdin.com/project/freecad-addons">FreeCAD-addons account at Crowdin</a>, which has many users already, and therefore more chance to have your file translated quickly and by people who know FreeCAD.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>If you wish to host your file on the FreeCAD Crowdin account, get in touch with <a rel="nofollow" class="external text" href="https://forum.freecad.org/memberlist.php?mode=viewprofile&amp;u=68">Yorik</a> on the <a rel="nofollow" class="external text" href="https://forum.freecad.org/">FreeCAD forum</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><i>Note:</i> some platforms like Crowdin can integrate with GitHub and do all the process from points 2, 3 and 4 automatically. For that, you can't use the FreeCAD Crowdin account; you will need to set up your own account.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Merge_the_translations">Merge the translations</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Once your <code>.ts</code> file has been translated, even if partially, you can download the translations from the site:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>You will usually download a <code>.zip</code> file containing one <code>.ts</code> per language</li>
<li>Place all the translated <code>.ts</code> files, together with your base <code>.ts</code> file, in the <code>translations/</code> folder</li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Compile_the_translations">Compile the translations</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Now run the <code>lrelease</code> program on each file that you have:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lrelease</span> <span class="s2">"translations/Draft_de.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_fr.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_pt-BR.ts"</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>You can automate the process:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">translations</span><span class="o">/*</span><span class="n">_</span><span class="o">*.</span><span class="n">ts</span>
<span class="n">do</span>
    <span class="n">lrelease</span> <span class="s2">"translations/$f"</span>
<span class="n">done</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>You should find one <code>.qm</code> file for each translated <code>.ts</code> file. The <code>.qm</code> files is what will be used by Qt and FreeCAD at runtime.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>That's all you need. Note that certain parts of your workbench cannot be translated on-the-fly if you decide to switch languages. If this is the case, you will need to restart FreeCAD for the new language to take effect.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Testing_translations">Testing translations</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ol><li>Switch FreeCAD to a language you have translated (for example German)</li>
<li>Load translation into FreeCAD, ex. <code>FreeCADGui.addTranslationPath("/path/to/the/folder/containing/qmfile")</code></li>
<li>Test something, for example <code>FreeCAD.Qt.translate("your context","some string")</code></li></ol>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Result: This should give you the German translation. If this works, then the basic setup is OK. Then we can look at something else. For example, command names should always use a special context that is the name of the command as registered to FreeCAD.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h3><span class="mw-headline" id="Important_notes">Important notes</span></h3>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>Make sure you are using a *context* and *string* that actually are in the ts/qm file of course.</li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Convenience_script">Convenience script</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Yorik maintains a convenience script for the BIM workbench, that can gather, upload and download ts files.
You can just copy and adapt that script for your workbench:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><a rel="nofollow" class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Technical_details_and_advanced_usage">Technical details and advanced usage</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>In the above examples there are two separate functions being used: <code>translate()</code> and <code>QT_TRANSLATE_NOOP</code>. You may also run across <code>tr()</code> and <code>QT_TR_NOOP</code>, which automatically provide the "context" argument based on their calling location. These two pairs of functions are fundamentally different.
</p>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><code>translate()</code> and <code>tr()</code> accomplish two separate tasks: at runtime they perform the actual translation from the string passed into them to the final translated string. This is true whether they are provided a literal string, or a variable, or a constant: the lookup is dynamic and real-time during the run of the code. However, they provide an additional non-runtime function: they are recognized by the <code>pylupdate</code> utility. If (and only if) they contain a string literal, that literal is extracted by the utility. ONLY string literals are extracted by <code>pylupdate</code> -- if a variable is passed it is ignored by the <code>pylupdate</code> utility. Qt will attempt to provide a translation at runtime, but this will only work if some other piece of code called one of the translation functions with the literal string that needs to be translated, so that <code>pylupdate</code> can extract it. Note that the code with the string literal need not actually ever execute, it must simply exist as a line of code in a file somewhere: <code>pylupdate</code> performs no analysis or code execution, it is simply performing a string search and extraction.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>In contrast, <code>QT_TRANSLATE_NOOP</code> and <code>QT_TR_NOOP</code> do nothing at all at runtime: they are literal "no-ops", and are completely ignored by running code. Their only use is to mark a literal string for extraction by <code>pylupdate</code>: it never makes sense to place a variable within a call to one of these functions, it will have no effect. They are used in circumstances where <code>translate()</code> or <code>tr()</code> will be called with a variable containing the text to translate. For example, any code that is used to create a Command or a Property will use a NOOP-type function around the command menu text or tooltip, or the property docstring: at runtime when FreeCAD displays these items to the user it calls <code>translate()</code>: the literal strings must have been extracted by <code>pylupdate</code> at the point of creation, for example:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>In this usage, at runtime the dictionary returned by this function is literally:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span> 
    <span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
    <span class="s1">'MenuText'</span><span class="p">:</span> <span class="s2">"My Command"</span><span class="p">,</span>
    <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="s2">"Describes what the command does"</span><span class="p">,</span>
    <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
<span class="p">}</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>There is no reference to any type of translation information. When FreeCAD actually displays this information to the user, the pseudo-code is:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">GetResources</span><span class="p">()</span>
    <span class="n">menu_text</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="s1">'MenuText'</span><span class="p">])</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>In this case, <code>lupdate</code> cannot extract any string from the call to <code>translate()</code> because it refers to a variable. So <code>lupdate</code> ignores that call, but at runtime Qt searches for the string that's passed to it. As long as someplace in the code there is a call to one of the translation functions with a matching literal string (in this case, in the <code>GetResources()</code> function), this translation call will succeed.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>To verify that the expected strings are being extracted, you can manually run the <code>pylupdate</code> command:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="n">myfile</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">outfile</span><span class="o">.</span><span class="n">ts</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The file <code>outfile.ts</code> will contain the set of strings that are uploaded to CrowdIn for translation.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Important_references">Important references</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li>Why and how to translate <code>openCommand()</code> functions (<a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=10&amp;t=55869">forum thread</a>)</li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Related_Pages">Related Pages</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li><a href="../External_Workbenches.html" class="mw-redirect" title="External Workbenches">External Workbenches</a></li>
<li><a href="../Localisation.html" title="Localisation">Localisation</a></li>
<li>For more information make your requests here: <a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=10&amp;t=36413">Translating external workbenches</a>.</li></ul>
</div>
<p><br>
</p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../index.php?title=User_hub.png&amp;filetimestamp=20190221145008&amp;.html" class="mw-file-description"><img src="../File/User_hub.png" decoding="async" width="24" height="24" class="mw-file-element"></a></span> <a href="../pt-br/User_hub.html" title="User hub/pt-br">User documentation</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b><a href="../pt-br/Getting_started.html" title="Getting started/pt-br">Getting started</a></b></li>
<li><b>Installation:</b> <a href="../pt-br/Download.html" title="Download/pt-br">Download</a>, <a href="../pt-br/Installing_on_Windows.html" title="Installing on Windows/pt-br">Windows</a>, <a href="../pt-br/Installing_on_Linux.html" title="Installing on Linux/pt-br">Linux</a>, <a href="../pt-br/Installing_on_Mac.html" title="Installing on Mac/pt-br">Mac</a>, <a href="../pt-br/Installing_additional_components.html" title="Installing additional components/pt-br">Additional components</a>, <a href="../pt-br/Compile_on_Docker.html" title="Compile on Docker/pt-br">Docker</a>, <a href="../pt-br/AppImage.html" title="AppImage/pt-br">AppImage</a>, <a href="../pt-br/Ubuntu_Snap.html" title="Ubuntu Snap/pt-br">Ubuntu Snap</a></li>
<li><b>Basics:</b> <a href="../pt-br/About_FreeCAD.html" title="About FreeCAD/pt-br">About FreeCAD</a>, <a href="../pt-br/Interface.html" title="Interface/pt-br">Interface</a>, <a href="../pt-br/Mouse_navigation.html" title="Mouse navigation/pt-br">Mouse navigation</a>, <a href="../pt-br/Selection_methods.html" title="Selection methods/pt-br">Selection methods</a>, <a href="../pt-br/Object_name.html" title="Object name/pt-br">Object name</a>, <a href="../pt-br/Preferences_Editor.html" title="Preferences Editor/pt-br">Preferences</a>, <a href="../pt-br/Workbenches.html" title="Workbenches/pt-br">Workbenches</a>, <a href="../pt-br/Document_structure.html" title="Document structure/pt-br">Document structure</a>, <a href="../pt-br/Property.html" title="Property/pt-br">Properties</a>, <a href="../pt-br/Help_FreeCAD.html" title="Help FreeCAD/pt-br">Help FreeCAD</a>, <a href="../pt-br/Donate.html" title="Donate/pt-br">Donate</a></li></ul>
<hr>
<ul><li><b>Help:</b> <a href="../pt-br/Tutorials.html" title="Tutorials/pt-br">Tutorials</a>, <a href="../pt-br/Video_tutorials.html" title="Video tutorials/pt-br">Video tutorials</a></li>
<li><b><a href="../pt-br/Workbenches.html" title="Workbenches/pt-br">Workbenches</a>:</b> <a href="../pt-br/Std_Base.html" title="Std Base/pt-br">Std Base</a>, <a href="../pt-br/Assembly_Workbench.html" title="Assembly Workbench/pt-br">Assembly</a>, <a href="../pt-br/BIM_Workbench.html" title="BIM Workbench/pt-br">BIM</a>, <a href="../pt-br/CAM_Workbench.html" title="CAM Workbench/pt-br">CAM</a>, <a href="../pt-br/Draft_Workbench.html" title="Draft Workbench/pt-br">Draft</a>, <a href="../pt-br/FEM_Workbench.html" title="FEM Workbench/pt-br">FEM</a>, <a href="../pt-br/Inspection_Workbench.html" title="Inspection Workbench/pt-br">Inspection</a>, <a href="../pt-br/Material_Workbench.html" title="Material Workbench/pt-br">Material</a>, <a href="../pt-br/Mesh_Workbench.html" title="Mesh Workbench/pt-br">Mesh</a>, <a href="../pt-br/OpenSCAD_Workbench.html" title="OpenSCAD Workbench/pt-br">OpenSCAD</a>, <a href="../pt-br/Part_Workbench.html" title="Part Workbench/pt-br">Part</a>, <a href="../pt-br/PartDesign_Workbench.html" title="PartDesign Workbench/pt-br">PartDesign</a>, <a href="../pt-br/Points_Workbench.html" title="Points Workbench/pt-br">Points</a>, <a href="../pt-br/Reverse_Engineering_Workbench.html" title="Reverse Engineering Workbench/pt-br">Reverse Engineering</a>, <a href="../pt-br/Robot_Workbench.html" title="Robot Workbench/pt-br">Robot</a>, <a href="../pt-br/Sketcher_Workbench.html" title="Sketcher Workbench/pt-br">Sketcher</a>, <a href="../pt-br/Spreadsheet_Workbench.html" title="Spreadsheet Workbench/pt-br">Spreadsheet</a>, <a href="../pt-br/Surface_Workbench.html" title="Surface Workbench/pt-br">Surface</a>, <a href="../pt-br/TechDraw_Workbench.html" title="TechDraw Workbench/pt-br">TechDraw</a>, <a href="../pt-br/Testing.html" title="Testing/pt-br">Test Framework</a></li></ul>
<hr>
<ul><li><b><a href="../pt-br/Addon.html" title="Addon/pt-br">Addons</a>:</b> <a href="../pt-br/Std_AddonMgr.html" title="Std AddonMgr/pt-br">Addon Manager</a>, <a href="../pt-br/External_workbenches.html" title="External workbenches/pt-br">External workbenches</a>, <a href="../pt-br/Scripting_and_macros.html" title="Scripting and macros/pt-br">Scripting and macros</a></li></ul>
<hr>
<ul><li><b>Hubs:</b> <a href="../pt-br/User_hub.html" title="User hub/pt-br">User hub</a>, <a href="../pt-br/Power_users_hub.html" title="Power users hub/pt-br">Power users hub</a>, <a href="../pt-br/Developer_hub.html" title="Developer hub/pt-br">Developer hub</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20250719165117
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.063 seconds
Real time usage: 0.077 seconds
Preprocessor visited node count: 999/1000000
Post&#8208;expand include size: 9964/2097152 bytes
Template argument size: 5641/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 23/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 18672/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   18.871      1 -total
 29.94%    5.651     23 Template:Code
 21.68%    4.091      1 Template:Userdocnavi/pt-br
 17.71%    3.342     89 Template:Incode
  9.52%    1.796      1 Template:Navigation_menu_2
  5.83%    1.100      1 Template:Emphasis
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:337101-0!canonical and timestamp 20250719165117 and revision id 1615784. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>