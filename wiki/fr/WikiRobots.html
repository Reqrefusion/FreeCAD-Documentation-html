<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">WikiRobots/fr</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-WikiRobots&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="WikiRoboter (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../WikiRobots.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="WikiRobots (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="../it/WikiRobots.html" class="mw-pt-progress mw-pt-progress--high" title="WikiRobots (91% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="Robot Wiki (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ru/WikiRobots.html" class="mw-pt-progress mw-pt-progress--high" title="WikiRobots (91% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div id="itsfree" style="text-align:center;color:black;background:#FDE0A8;margin:1em 7em;padding:0.5em 2em;border:2px solid #FF5706;">Les robots sont intrins&egrave;quement dangereux car ils peuvent automatiquement faire beaucoup de d&eacute;g&acirc;ts. Utilisez-les avec une extr&ecirc;me prudence!</div>
<p><span id="Overview"></span>
</p>
<meta property="mw:PageProp/toc">
<h2><span id="Pr.C3.A9sentation"></span><span class="mw-headline" id="Pr&eacute;sentation">Pr&eacute;sentation</span></h2>
<p>Les t&acirc;ches r&eacute;p&eacute;titives peuvent &ecirc;tre automatis&eacute;es &agrave; l'aide de robots ou de bots, c'est-&agrave;-dire de programmes logiciels fonctionnant seuls sur le wiki.
</p><p>Les robots classiques et les plus utilis&eacute;s pour les sites wiki sont fournis par MediaWiki, sous le nom de paquet Pywikibot. Voir <a class="external text" href="https://www.mediawiki.org/wiki/Manual:Pywikibot/fr">Manuel:Pywikibot</a> pour des informations compl&egrave;tes.
</p><p>En un mot, Pywikibot est une collection de scripts Python capables d'utiliser l'API wiki native pour agir sur les sites wiki. Pour voir la liste des API pour le wiki de FreeCAD, visitez <a rel="nofollow" class="external free" href="https://wiki.freecad.org/api.php">https://wiki.freecad.org/api.php</a>.
</p><p>Pour utiliser Pywikibot, vous devez&nbsp;:
</p>
<ol><li>installer le package Pywikibot</li>
<li>configurez Pywikibot pour qu'il fonctionne sur le Wiki FreeCAD.</li>
<li>lancez les scripts dont vous avez besoin pour la t&acirc;che &agrave; accomplir.</li></ol>
<p>Il existe une multitude d'informations sur la fa&ccedil;on d'installer, de configurer et d'utiliser Pywikibot. Cependant, soyez conscient que ces informations, bien qu'utiles, peuvent &ecirc;tre trompeuses, car elles m&eacute;langent des instructions relatives &agrave; deux bases de code Pywikibot diff&eacute;rentes et diff&eacute;rentes versions de la collection de scripts Pywikibot.
</p><p>Dans ce qui suit, vous trouverez les instructions de base pour configurer et utiliser Pywikibot sur le wiki FreeCAD. Cela vous permettra d'effectuer les t&acirc;ches les plus courantes. Pour une utilisation avanc&eacute;e, r&eacute;f&eacute;rez-vous au <a class="external text" href="https://www.mediawiki.org/wiki/Manual:Pywikibot/fr">Manuel:Pywikibot</a> et au code source Python.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Allez sur <a rel="nofollow" class="external free" href="https://web.archive.org/web/20250616133422/https://pywikibot.toolforge.org/">https://web.archive.org/web/20250616133422/https://pywikibot.toolforge.org/</a> et t&eacute;l&eacute;chargez <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span>. (le projet est aussi sous github, gerrit, etc... mais c'est un moyen simple d'obtenir un paquet complet et autonome).
</p><p>D&eacute;compressez le contenu dans le r&eacute;pertoire de votre choix.
</p><p>&Agrave; moins que vous ne vouliez installer les biblioth&egrave;ques dans vos librairies Python, vous avez termin&eacute; (si vous voulez toujours les installer, v&eacute;rifiez le fichier <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">INSTALL</span> dans le r&eacute;pertoire de base).
</p><p>Pywikibot fonctionne avec Python 2.6 et 2.7 sans probl&egrave;me. Python 3 <s>n'a pas &eacute;t&eacute; test&eacute; jusqu'&agrave; pr&eacute;sent avec FreeCAD wiki</s> fonctionne &eacute;galement.
</p><p><span id="Configuration"></span>
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>Vous devez enregistrer le code Python suivant dans un fichier portant le nom <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py</span> dans le r&eacute;pertoire de base o&ugrave; vous avez d&eacute;compress&eacute; <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span>. (pour &ecirc;tre clair, dans le m&ecirc;me r&eacute;pertoire o&ugrave; vous trouvez d&eacute;j&agrave; un fichier appel&eacute; <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py.sample</span>).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: cp437  -*-</span>
<span class="n">family</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>
<span class="n">mylang</span> <span class="o">=</span> <span class="s1">'en'</span>
<span class="n">usernames</span><span class="p">[</span><span class="s1">'freecadwiki'</span><span class="p">][</span><span class="s1">'en'</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="c1">#usernames['freecadwiki']['freecadwiki'] = u'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="n">console_encoding</span> <span class="o">=</span> <span class="s1">'cp437'</span>
</pre></div>
<p>Dans le code ci-dessus&nbsp;:
</p>
<ul><li>remplacez <i>&lt;&lt;yourWikiUserName&gt;&gt;</i> par votre nom d'utilisateur Wiki</li>
<li>remplacer <i>cp437</i> par votre <i>console_encoding</i>. Pour conna&icirc;tre l'encodage de votre console, pour Windows et Linux, lancez l'interpr&eacute;teur Python, entrez <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">import sys</span> suivi de <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">print sys.stdout.encoding</span>. Python &eacute;crira votre <span style="font-weight:normal; font-family:monospace, Consolas, Courier New, Courier; border: 1px solid #d8d8d8; padding: 2px 5px 2px 5px;">console_encoding</span> &agrave; l'&eacute;cran.</li></ul>
<p><br>
Vous devez ensuite enregistrer le code Python suivant dans un fichier portant le nom <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">freecadwiki_family.py</span> dans le sous-r&eacute;pertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/pywikibot/families</span>. (avec les autres fichiers <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">family_xxx.py</span>).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8  -*-</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s1">'$Id: 7f3891c3bbbfbd69c0b005de953514803d783d92 $'</span>

<span class="kn">from</span> <span class="nn">pywikibot</span> <span class="kn">import</span> <span class="n">family</span>


<span class="c1"># The MediaWiki family</span>
<span class="c1"># user-config.py: usernames['mediawiki']['mediawiki'] = 'User name'</span>
<span class="k">class</span> <span class="nc">Family</span><span class="p">(</span><span class="n">family</span><span class="o">.</span><span class="n">WikimediaFamily</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Family</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">langs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'en'</span><span class="p">:</span> <span class="s1">'www.freecadweb.org'</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">scriptpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'wiki'</span>

    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/index.php'</span> <span class="c1">#The path of index.php, look at your wiki address. </span>
	 
    <span class="k">def</span> <span class="nf">apipath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/api.php'</span> <span class="c1">#The path of api.php</span>

    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="c1"># Replace with the actual version being run on your wiki</span>
        <span class="k">return</span> <span class="s1">'1.20.3'</span>

    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Can be overridden to return 'https'. Other protocols are not supported.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">'http'</span>
        <span class="c1">#return 'https' # My server uses https</span>
</pre></div>
<p><span id="Usage"></span>
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<p>Vous &ecirc;tes maintenant pr&ecirc;t &agrave; lancer les scripts de Pywikibot. Les scripts eux-m&ecirc;mes sont contenus dans le sous-r&eacute;pertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span>, dont vous pouvez conna&icirc;tre les noms.
</p><p>Pour lancer les scripts, ouvrez un terminal et allez dans le r&eacute;pertoire de base (celui de l'installation, PAS le sous-r&eacute;pertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span>), et &eacute;crivez
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py &lt;&lt;scriptname&gt;&gt;.py -&lt;&lt;parameter&gt;&gt;</span>
</p><p>o&ugrave; bien s&ucirc;r vous remplacez <i>&lt;&lt;scriptname&gt;&gt;</i> par le nom du script qui vous int&eacute;resse, et <i>&lt;&lt;parameter&gt;&gt;</i> par le ou les param&egrave;tres requis pour le script donn&eacute;.
</p><p>Pour obtenir une description de l'utilisation et des param&egrave;tres d'un script, il suffit d'utiliser le param&egrave;tre <i>-help</i>. Par exemple, pour obtenir une description du script <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">replace.py</span> (l'un des plus utiles), tapez
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py replace.py -help</span>
</p><p>Il existe un autre param&egrave;tre tr&egrave;s utile, valable pour tous les scripts, appel&eacute; <i>-simulate</i>, qui vous permet de tester les commandes sans endommager le Wiki. Utilisez-le avant de passer en mode 'live'.
</p><p><span id="Examples"></span>
</p>
<h2><span class="mw-headline" id="Exemples">Exemples</span></h2>
<p>Cette commande permet de se connecter au wiki
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py login.py</span>
</p><p><br>
Cette commande imprimera une liste de toutes les pages contenant un lien vers SourceForge
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -weblink:sourceforge.net</span>
</p><p><br>
Cette commande remplacera tous les liens vers l'ancien forum SourceForge par un lien vers le nouveau forum h&eacute;berg&eacute; par freecad.org.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -weblink:sourceforge.net/apps/phpbb/free-cad "sourceforge.net/apps/phpbb/free-cad" "forum.freecad.org"</span>
</p><p><br>
Cette commande imprimera une liste de toutes les pages contenant le mot 'PartDesign', en commen&ccedil;ant par la page intitul&eacute;e "2d Drafting Module" et en poursuivant par ordre alphab&eacute;tique.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -start:"2d Drafting Module" -grep:PartDesign</span>
</p><p><br>
Cette commande remplacera tous les liens s&eacute;curis&eacute;s vers l'ancien forum SourceForge par un lien vers le nouveau forum h&eacute;berg&eacute; par freecad.org dans les pages traduites.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -start:Translations:! "<a rel="nofollow" class="external free" href="https://sourceforge.net/apps/phpbb/free-cad">https://sourceforge.net/apps/phpbb/free-cad</a>" "<a rel="nofollow" class="external free" href="https://forum.freecad.org">https://forum.freecad.org</a>"</span>
</p>
<h2><span id="Commandes_li.C3.A9es_au_Wiki_FreeCAD"></span><span class="mw-headline" id="Commandes_li&eacute;es_au_Wiki_FreeCAD">Commandes li&eacute;es au Wiki FreeCAD</span></h2>
<p>Compter toutes les pages dans lesquelles un mod&egrave;le wiki sp&eacute;cifique est utilis&eacute;
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -count GuiCommand</span> 
</p><p><br>
Liste de toutes les pages dans lesquelles un mod&egrave;le wiki sp&eacute;cifique est utilis&eacute;.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -list GuiCommand</span> 
</p><p>Remplacer une cha&icirc;ne dans toutes les pages list&eacute;es dans la cat&eacute;gorie Arch
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py replace.py -cat:Arch</span>
</p>
<!-- 
NewPP limit report
Cached time: 20250712131544
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.023 seconds
Real time usage: 0.030 seconds
Preprocessor visited node count: 223/1000000
Post&#8208;expand include size: 3558/2097152 bytes
Template argument size: 2126/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 2/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 5795/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.882      1 -total
 22.30%    1.535      1 Template:VeryImportantMessage
 19.75%    1.359      2 Template:Code
 15.01%    1.033     12 Template:SystemInput
 14.48%    0.997     11 Template:FileName
 13.66%    0.940      1 Template:SystemOutput
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:243405-0!canonical and timestamp 20250712131544 and revision id 1610877. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>