<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Scripted objects migration/fr</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Scripted+objects+migration&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Scripted_objects_migration.html" class="mw-pt-progress mw-pt-progress--med" title="Migration geskripteter Objekte (65% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Scripted_objects_migration.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Scripted objects migration (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="../it/Scripted_objects_migration.html" class="mw-pt-progress mw-pt-progress--low" title="Migrazione di oggetti creati con script (3% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Scripted_objects_migration.html" class="mw-pt-progress mw-pt-progress--complete" title="Obiekty tworzone skryptami, migracja (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ru/Scripted_objects_migration.html" class="mw-pt-progress mw-pt-progress--low" title="Scripted objects migration/ru (0% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Les <a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a> sont reconstruits &agrave; chaque fois qu'un <a href="../fr/File_Format_FCStd.html" title="File Format FCStd/fr">document au format FCStd</a> est ouvert. Pour ce faire, le document conserve une r&eacute;f&eacute;rence au module et &agrave; la classe Python qui ont &eacute;t&eacute; utilis&eacute;s pour cr&eacute;er l'objet, ainsi que ses propri&eacute;t&eacute;s.
</p>
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span><span class="nt">&lt;Document</span><span class="w"> </span><span class="na">SchemaVersion=</span><span class="s">"4"</span><span class="w"> </span><span class="na">ProgramVersion=</span><span class="s">"0.19R20959 (Git)"</span><span class="w"> </span><span class="na">FileVersion=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">    </span>...
<span class="w">    </span><span class="nt">&lt;Properties</span><span class="w"> </span><span class="na">Count=</span><span class="s">"15"</span><span class="w"> </span><span class="na">TransientCount=</span><span class="s">"3"</span><span class="nt">&gt;</span>
<span class="w">    </span>...
<span class="w">    </span><span class="nt">&lt;/Properties&gt;</span>
<span class="w">    </span><span class="nt">&lt;Objects</span><span class="w"> </span><span class="na">Count=</span><span class="s">"1"</span><span class="w"> </span><span class="na">Dependencies=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;ObjectDeps</span><span class="w"> </span><span class="na">Name=</span><span class="s">"Custom"</span><span class="w"> </span><span class="na">Count=</span><span class="s">"0"</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;Object</span><span class="w"> </span><span class="na">type=</span><span class="s">"Part::FeaturePython"</span><span class="w"> </span><span class="na">name=</span><span class="s">"Custom"</span><span class="w"> </span><span class="na">id=</span><span class="s">"2715"</span><span class="w"> </span><span class="na">Touched=</span><span class="s">"1"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Objects&gt;</span>
<span class="w">    </span><span class="nt">&lt;ObjectData</span><span class="w"> </span><span class="na">Count=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;Object</span><span class="w"> </span><span class="na">name=</span><span class="s">"Custom"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;Properties</span><span class="w"> </span><span class="na">Count=</span><span class="s">"9"</span><span class="w"> </span><span class="na">TransientCount=</span><span class="s">"0"</span><span class="nt">&gt;</span>
<span class="w">                </span>...
<span class="w">                </span><span class="nt">&lt;Property</span><span class="w"> </span><span class="na">name=</span><span class="s">"Proxy"</span><span class="w"> </span><span class="na">type=</span><span class="s">"App::PropertyPythonObject"</span><span class="w"> </span><span class="na">status=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;Python</span><span class="w"> </span><span class="na">value=</span><span class="s">"eyJUeXBlIjogIkN1c3RvbSJ9"</span><span class="w"> </span><span class="na">encoded=</span><span class="s">"yes"</span><span class="w"> </span><span class="na">module=</span><span class="s">"old_module"</span><span class="w"> </span><span class="na">class=</span><span class="s">"OldObject"</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/Property&gt;</span>
<span class="w">                </span>...
<span class="w">            </span><span class="nt">&lt;/Properties&gt;</span>
<span class="w">        </span><span class="nt">&lt;/Object&gt;</span>
<span class="w">    </span><span class="nt">&lt;/ObjectData&gt;</span>
<span class="nt">&lt;/Document&gt;</span>
</pre></div>
<p>Concentrez-vous particuli&egrave;rement sur cette partie&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-xml mw-content-ltr" dir="ltr"><pre><span></span>...
<span class="w">                </span><span class="nt">&lt;Property</span><span class="w"> </span><span class="na">name=</span><span class="s">"Proxy"</span><span class="w"> </span><span class="na">type=</span><span class="s">"App::PropertyPythonObject"</span><span class="w"> </span><span class="na">status=</span><span class="s">"1"</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;Python</span><span class="w"> </span><span class="na">value=</span><span class="s">"eyJUeXBlIjogIkN1c3RvbSJ9"</span><span class="w"> </span><span class="na">encoded=</span><span class="s">"yes"</span><span class="w"> </span><span class="na">module=</span><span class="s">"old_module"</span><span class="w"> </span><span class="na">class=</span><span class="s">"OldObject"</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/Property&gt;</span>
<span class="w">                </span>...
</pre></div>
<p>Si la valeur de <code>module=</code> ou <code>class=</code> n'est pas trouv&eacute;e sur le syst&egrave;me install&eacute;, l'objet ne pourra pas &ecirc;tre charg&eacute; correctement. Cela signifie qu'une fois qu'un objet est cr&eacute;&eacute; en utilisant une classe particuli&egrave;re, le module ne doit plus &ecirc;tre d&eacute;plac&eacute; ou renomm&eacute;, car si cela est fait, les objets pr&eacute;c&eacute;demment enregistr&eacute;s se briseront.
</p><p>Toutefois, une raison valable pour d&eacute;placer ou renommer le module ou la classe est d'am&eacute;liorer la structure et la maintenabilit&eacute; du code d'origine, par exemple, lors de la restructuration d'un atelier entier. Dans ce cas, il existe plusieurs strat&eacute;gies pour faire migrer les anciens objets vers l'utilisation d'une nouvelle classe. Ceci est fait afin de conserver la compatibilit&eacute; ascendante, lorsque la rupture pure et simple des anciens documents doit &ecirc;tre &eacute;vit&eacute;e.
</p><p><span id="Old_object_and_new_object"></span>
</p>
<h2><span class="mw-headline" id="Ancien_et_nouvel_objet">Ancien et nouvel objet</span></h2>
<p><span id="Old_object"></span>
</p>
<h3><span class="mw-headline" id="Ancien_objet">Ancien objet</span></h3>
<p>Un ancien objet est d&eacute;fini dans un module qui se trouve &agrave; la racine de l'atelier.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyArea"</span><span class="p">,</span> <span class="s2">"Area"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Area</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Type</span> <span class="o">=</span> <span class="s2">"Custom"</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
<p>Un objet peut &ecirc;tre cr&eacute;&eacute; &agrave; l'aide de cette classe et il peut &ecirc;tre enregistr&eacute; dans <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">my_document.FCstd</span>. Si aucun <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a> particulier n'est attribu&eacute; au nouvel objet, sa classe proxy est simplement d&eacute;finie sur une valeur diff&eacute;rente de <code>None</code>, dans ce cas, sur <code>1</code>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">old_module</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">FileName</span> <span class="o">=</span> <span class="s2">"my_document.FCStd"</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span> <span class="s2">"Custom"</span><span class="p">)</span>
<span class="n">old_module</span><span class="o">.</span><span class="n">OldObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">if</span> <span class="n">App</span><span class="o">.</span><span class="n">GuiUp</span><span class="p">:</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">doc</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
<span class="n">doc</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>Une session de <a href="../fr/Python_console.html" title="Python console/fr">console Python</a> avec les propri&eacute;t&eacute;s de base omises.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Area'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">old_module</span><span class="o">.</span><span class="n">OldObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7efc3c51c390</span><span class="o">&gt;</span>
</pre></div>
<p><span id="New_object"></span>
</p>
<h3><span class="mw-headline" id="Nouvel_objet">Nouvel objet</span></h3>
<p>Consid&eacute;rons maintenant que l'atelier est restructur&eacute;, de sorte que les classes ne se trouvent pas seulement dans le r&eacute;pertoire racine, mais plut&ocirc;t dans un r&eacute;pertoire <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">objects</span>. Les ateliers complexes qui comportent de nombreux types d'objets diff&eacute;rents devraient &ecirc;tre structur&eacute;s en r&eacute;pertoires comprenant des objets, des interfaces <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewproviders</a>, <a href="../fr/Command.html" title="Command/fr">Commandes Gui</a>, <a href="../fr/Task_panel.html" title="Task panel/fr">Panneau des t&acirc;ches</a>, etc.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># objects/new_module.py</span>
<span class="k">class</span> <span class="nc">NewObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyArea"</span><span class="p">,</span> <span class="s2">"GeneralArea"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyInteger"</span><span class="p">,</span> <span class="s2">"Divisions"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">600</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Divisions</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Type</span> <span class="o">=</span> <span class="s2">"Custom"</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
<p>Cette nouvelle classe fera r&eacute;f&eacute;rence au m&ecirc;me type d'objet, mais le nom du module ainsi que le nom de la classe ont &eacute;t&eacute; renomm&eacute;s. De plus, les propri&eacute;t&eacute;s ont &eacute;galement chang&eacute;&nbsp;; une propri&eacute;t&eacute; a &eacute;t&eacute; renomm&eacute;e et une propri&eacute;t&eacute; compl&egrave;tement nouvelle a &eacute;t&eacute; ajout&eacute;e.
</p><p>Si nous cr&eacute;ons un nouvel objet avec ce nouveau module, nous aurons la session de console suivante.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj2</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Divisions'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'GeneralArea'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj2</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">objects</span><span class="o">.</span><span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7efc1cf68c50</span><span class="o">&gt;</span>
</pre></div>
<p><span id="Method_1._Migration_by_redirecting_the_class"></span>
</p>
<h2><span id="M.C3.A9thode_1._Migration_en_redirigeant_la_classe"></span><span class="mw-headline" id="M&eacute;thode_1._Migration_en_redirigeant_la_classe">M&eacute;thode 1. Migration en redirigeant la classe</span></h2>
<p>Nous allons migrer l'ancien objet en redirigeant l'ancienne classe. La classe originale est supprim&eacute;e, et le nom de la classe est simplement redirig&eacute; pour pointer vers la nouvelle classe.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>

<span class="n">OldObject</span> <span class="o">=</span> <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span>
</pre></div>
<p>Tout document qui tente de charger <code>old_module.OldObject</code> sera redirig&eacute; pour charger <code>objects.new_module.NewObject</code> &agrave; la place.
</p><p>Si nous ouvrons le document et inspectons les propri&eacute;t&eacute;s de l'objet dans la <a href="../fr/Python_console.html" title="Python console/fr">console Python</a>, nous verrons que les anciennes propri&eacute;t&eacute;s sont conserv&eacute;es, mais que l'objet a une nouvelle classe Proxy.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Area'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">objects</span><span class="o">.</span><span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f099700b2b0</span><span class="o">&gt;</span>
</pre></div>
<p>Cependant, dans ce cas, nous ne voyons pas les nouvelles propri&eacute;t&eacute;s de la nouvelle classe. La raison en est simplement que l'ancien objet ne poss&eacute;dait pas ces propri&eacute;t&eacute;s. Lorsque <code>old_module.OldObject</code> a &eacute;t&eacute; redirig&eacute; vers <code>objects.new_module.NewObject</code>, seule la classe proxy a chang&eacute;, mais les informations pr&eacute;c&eacute;dentes ont &eacute;t&eacute; conserv&eacute;es.
</p><p>D&eacute;sormais, si le document est enregistr&eacute; et rouvert, il recherchera automatiquement <code>objets.nouveau_module.NewObject</code> et ne n&eacute;cessitera plus <code>ancien_module.OldObject</code>. Le fichier <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">old_module.py</span> peut &ecirc;tre supprim&eacute; d&eacute;finitivement du syst&egrave;me tant que tous les anciens objets ont &eacute;t&eacute; migr&eacute;s vers le nouveau module. Si l'ancien module est supprim&eacute; mais qu'un objet n'a pas &eacute;t&eacute; migr&eacute;, la <a href="../fr/Report_view.html" title="Report view/fr">Vue rapport</a> affichera un message comme celui-ci lors de l'ouverture d'un document contenant cet objet.
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>&lt;class <span class="s1">'ModuleNotFoundError'</span>&gt;: No module named <span class="s1">'old_module'</span>
</pre></div>
<p>S'il n'est pas possible, de mani&egrave;re r&eacute;aliste, de migrer tous les anciens objets, par exemple parce que l'ancien module a &eacute;t&eacute; utilis&eacute; dans un atelier pendant de nombreuses ann&eacute;es, alors <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">old_module.py</span> doit &ecirc;tre conserv&eacute; aussi longtemps qu'il est jug&eacute; n&eacute;cessaire pour donner aux utilisateurs la possibilit&eacute; de migrer leurs objets.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> C'est la m&eacute;thode la plus simple qui n&eacute;cessite juste de rediriger une ancienne classe vers une nouvelle classe.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Les anciennes propri&eacute;t&eacute;s sont conserv&eacute;es tant que la nouvelle classe ne les surcharge pas.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> C'est une bonne chose si l'ancienne et la nouvelle classe ont les m&ecirc;mes propri&eacute;t&eacute;s (g&egrave;rent le m&ecirc;me type de donn&eacute;es) mais que seul leur nom de module ou de classe est diff&eacute;rent.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> La nouvelle classe conserve les anciennes propri&eacute;t&eacute;s de l'objet, ce qui n'est pas toujours souhait&eacute;.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Les nouvelles propri&eacute;t&eacute;s ou les propri&eacute;t&eacute;s renomm&eacute;es ne sont pas g&eacute;r&eacute;es, donc l'objet sera charg&eacute; mais il peut ne pas montrer le comportement correct de la nouvelle classe.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> L'ancien module peut devoir &ecirc;tre conserv&eacute; ind&eacute;finiment pour migrer tous les anciens objets cr&eacute;&eacute;s dans le pass&eacute;.</li></ul>
<p><span id="Method_2._Migration_when_restoring_the_document"></span>
</p>
<h2><span id="M.C3.A9thode_2._Migration_lors_de_la_restauration_du_document"></span><span class="mw-headline" id="M&eacute;thode_2._Migration_lors_de_la_restauration_du_document">M&eacute;thode 2. Migration lors de la restauration du document</span></h2>
<p>Nous allons migrer l'ancien objet en modifiant l'ancienne classe. La majorit&eacute; de la classe d'origine est supprim&eacute;e et &agrave; la place la m&eacute;thode <code>onDocumentRestored</code> est impl&eacute;ment&eacute;e. Lorsque cette m&eacute;thode existe, elle s'ex&eacute;cute lorsque le document tente de restaurer un objet qui utilise la classe. C'est donc l'occasion pour nous d'attribuer une nouvelle classe, de manipuler les informations ou d'imprimer des messages.
</p><p>Dans ce cas, nous supposons que nous avons &eacute;galement d&eacute;fini un nouveau <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a> dans le module <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">viewp/new_view.py</span>. Si nous ne voulons pas migrer cette classe, nous pouvons omettre tout ce qui se trouve apr&egrave;s la v&eacute;rification <code>App.GuiUp</code>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>
<span class="kn">import</span> <span class="nn">viewp.new_view</span> <span class="k">as</span> <span class="nn">new_view</span>
<span class="n">_wrn</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span>

<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">App</span><span class="o">.</span><span class="n">GuiUp</span><span class="p">:</span>
            <span class="n">new_view</span><span class="o">.</span><span class="n">ViewProviderNew</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
            <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New viewprovider class used</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<p>Un exemple plus complexe v&eacute;rifie d'abord que la classe proxy est du type que nous recherchons, et ne proc&egrave;de &agrave; la migration que si c'est le bon type.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"Proxy"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">Type</span> <span class="o">==</span> <span class="s2">"Custom"</span><span class="p">:</span>
            <span class="n">_module</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
            <span class="n">_module</span> <span class="o">=</span> <span class="n">_module</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">"&lt;class '"</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">"'&gt;"</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">_module</span> <span class="o">==</span> <span class="s2">"old_module.OldObject"</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_migrate</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_migrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">App</span><span class="o">.</span><span class="n">GuiUp</span><span class="p">:</span>
            <span class="n">new_view</span><span class="o">.</span><span class="n">ViewProviderNew</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
            <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New viewprovider class used</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<p>En supposant que nous avons d&eacute;j&agrave; modifi&eacute; l'ancien module de cette mani&egrave;re, si nous ouvrons un document avec un ancien objet, nous verrons les messages mentionnant l'utilisation des nouvelles classes.
</p><p>En inspectant l'objet depuis la <a href="../fr/Python_console.html" title="Python console/fr">console Python</a>, nous verrons que les anciennes propri&eacute;t&eacute;s sont conserv&eacute;es, et qu'en plus, de nouvelles propri&eacute;t&eacute;s ont &eacute;t&eacute; ajout&eacute;es avec la nouvelle classe Proxy.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Area'</span><span class="p">,</span> <span class="s1">'Divisions'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'GeneralArea'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="s1">'Length1'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">objects</span><span class="o">.</span><span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fecb0ebd7b8</span><span class="o">&gt;</span>
</pre></div>
<p>Les anciennes propri&eacute;t&eacute;s &eacute;taient <code>Area</code> et <code>Length</code>&nbsp;; les nouvelles propri&eacute;t&eacute;s sont <code>Divisions</code>, <code>GeneralArea</code> et <code>Length</code>. L'objet migr&eacute; conserve les deux propri&eacute;t&eacute;s d'origine et acquiert trois nouvelles propri&eacute;t&eacute;s. Cependant, comme la nouvelle <code>Length</code> a le m&ecirc;me nom que l'ancienne propri&eacute;t&eacute;, la nouvelle propri&eacute;t&eacute; est renomm&eacute;e avec un num&eacute;ro incr&eacute;mental. Ce n'est sans doute pas ce que nous voulons. Nous pouvons am&eacute;liorer la situation en suivant l'addendum 2.1 ci-dessous.
</p><p>&Eacute;tant donn&eacute; que les classes sont cens&eacute;es g&eacute;rer le m&ecirc;me type d'objet, nous aimerions une migration dans laquelle <code>Area</code> se transforme en <code>GeneralArea</code>, et <code>Length</code> est simplement affect&eacute; au nouveau <code>Length</code>, et il n'y a pas de propri&eacute;t&eacute;s en double.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients_2"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients_2">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Cette m&eacute;thode nous permet de v&eacute;rifier que la classe que nous migrons est la bonne, au lieu de simplement rediriger vers une classe plus r&eacute;cente.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Similaire &agrave; la m&eacute;thode 1, les anciennes propri&eacute;t&eacute;s sont conserv&eacute;es tant que la nouvelle classe ne les surcharge pas.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Contrairement &agrave; la m&eacute;thode 1, les nouvelles propri&eacute;t&eacute;s sont toujours ajout&eacute;es, cependant si elles ont le m&ecirc;me nom, elles seront renomm&eacute;es.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> La migration n'est pas imm&eacute;diate, on peut encore manipuler les informations, ou imprimer des messages pendant que l'objet se charge.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Elle est plus verbeuse que la m&eacute;thode 1 car nous devons impl&eacute;menter la m&eacute;thode <code>onDocumentRestored</code> pour migrer l'objet.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Il ajoute toujours les nouvelles propri&eacute;t&eacute;s, donc il peut cr&eacute;er des propri&eacute;t&eacute;s dupliqu&eacute;es dans le cas o&ugrave; les nouvelles propri&eacute;t&eacute;s ont le m&ecirc;me nom que les anciennes propri&eacute;t&eacute;s. Ceci doit &ecirc;tre g&eacute;r&eacute; manuellement.</li></ul>
<p><span id="Method_3._Migration_when_restoring_the_document,_manually_handling_the_properties"></span>
</p>
<h2><span id="M.C3.A9thode_3._Migration_lors_de_la_restauration_du_document.2C_manipulation_manuelle_des_propri.C3.A9t.C3.A9s"></span><span class="mw-headline" id="M&eacute;thode_3._Migration_lors_de_la_restauration_du_document,_manipulation_manuelle_des_propri&eacute;t&eacute;s">M&eacute;thode 3. Migration lors de la restauration du document, manipulation manuelle des propri&eacute;t&eacute;s</span></h2>
<p>Il s'agit d'une extension de la m&eacute;thode 2. Dans la m&eacute;thode <code>onDocumentRestored</code>, nous devons enregistrer les valeurs des propri&eacute;t&eacute;s que nous voulons, puis nous pouvons supprimer ces propri&eacute;t&eacute;s originales. Ainsi, lorsque la nouvelle classe sera utilis&eacute;e, elle attribuera les nouvelles propri&eacute;t&eacute;s sans risquer de collision de noms avec les anciennes propri&eacute;t&eacute;s.
</p><p>Comme dans la m&eacute;thode 2, si nous le souhaitons, nous pouvons &eacute;galement ajouter le morceau de code qui v&eacute;rifie que la classe Proxy est la bonne. Dans cet exemple, nous supposons une fois de plus que nous utilisons un <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a> personnalis&eacute;, avec au moins une propri&eacute;t&eacute; personnalis&eacute;e.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>
<span class="kn">import</span> <span class="nn">viewp.new_view</span> <span class="k">as</span> <span class="nn">new_view</span>
<span class="n">_wrn</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span>

<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">old</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Area</span>
        <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Length</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Area"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Length"</span><span class="p">)</span>

        <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span>
        <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used; properties migrated</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">App</span><span class="o">.</span><span class="n">GuiUp</span><span class="p">:</span>
            <span class="n">vobj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ViewObject</span>
            <span class="n">old</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="n">old</span><span class="p">[</span><span class="s2">"LineScale"</span><span class="p">]</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">LineScale</span>
            <span class="n">vobj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"LineScale"</span><span class="p">)</span>

            <span class="n">new_view</span><span class="o">.</span><span class="n">ViewProviderNew</span><span class="p">(</span><span class="n">vobj</span><span class="p">)</span>

            <span class="n">vobj</span><span class="o">.</span><span class="n">LineScale</span> <span class="o">=</span> <span class="mf">1.05</span> <span class="o">*</span> <span class="n">old</span><span class="p">[</span><span class="s2">"LineScale"</span><span class="p">]</span>
            <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New viewprovider class used; view properties migrated</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<p>Nous pouvons voir que les anciennes valeurs sont stock&eacute;es dans un dictionnaire auxiliaire, puis les anciennes propri&eacute;t&eacute;s sont supprim&eacute;es, puis nous ajoutons la nouvelle classe, et enfin nous assignons les valeurs pr&eacute;c&eacute;demment sauvegard&eacute;es aux nouvelles propri&eacute;t&eacute;s. &Agrave; ce moment, nous pouvons transformer les valeurs sauvegard&eacute;es comme il se doit pour la nouvelle classe. Par exemple, le <code>GeneralArea</code> est fix&eacute; &agrave; 3 fois l'ancien <code>Area</code>, et le nouveau <code>Length</code> re&ccedil;oit simplement la valeur de l'ancien <code>Length</code>. Comme nous savons comment l'ancienne et la nouvelle classe sont cens&eacute;es se comporter, nous avons la libert&eacute; de manipuler les donn&eacute;es pour faire migrer l'objet comme nous le souhaitons.
</p><p>Nous ne pouvons supprimer que les propri&eacute;t&eacute;s qui ont &eacute;t&eacute; ajout&eacute;es par les classes <a href="../fr/Python.html" title="Python/fr">Python</a> lorsque nous avons construit l'<a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objet cr&eacute;&eacute; par script</a>. Les autres attributs appartiennent &agrave; l'objet C++ de base et ne peuvent pas &ecirc;tre supprim&eacute;s.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Visibility"</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
<p>En supposant que nous avons d&eacute;j&agrave; modifi&eacute; l'ancien module de cette mani&egrave;re, si nous ouvrons un document avec un ancien objet, nous verrons les messages mentionnant l'utilisation des nouvelles classes. En inspectant l'objet depuis la <a href="../fr/Python_console.html" title="Python console/fr">console Python</a>, nous voyons que les anciennes propri&eacute;t&eacute;s ont &eacute;t&eacute; supprim&eacute;es et que seules les nouvelles propri&eacute;t&eacute;s existent.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Divisions'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'GeneralArea'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">objects</span><span class="o">.</span><span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7efd456c9b00</span><span class="o">&gt;</span>
</pre></div>
<p>Comme la propri&eacute;t&eacute; <code>Divisions</code> n'existait pas dans l'ancienne classe, rien n'a &eacute;t&eacute; fait avec elle. Elle a simplement &eacute;t&eacute; cr&eacute;&eacute;e par la nouvelle classe <code>objects.new_module.NewObject</code>.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients_3"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients_3">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Similaire &agrave; la m&eacute;thode 2, cette m&eacute;thode nous permet de v&eacute;rifier que la classe que nous migrons est la bonne.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Nous avons le contr&ocirc;le total de ce qu'il faut faire avec les anciennes propri&eacute;t&eacute;s. Typiquement, elles seront supprim&eacute;es afin qu'il n'y ait pas de collision de noms avec les nouvelles propri&eacute;t&eacute;s ajout&eacute;es. Ainsi nous &eacute;vitons les propri&eacute;t&eacute;s dupliqu&eacute;es.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> En sauvegardant les anciennes valeurs, nous pouvons manipuler les informations de l'&eacute;tape de restauration comme nous le souhaitons, et affecter les valeurs correspondantes aux nouvelles propri&eacute;t&eacute;s.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Cette m&eacute;thode est tr&egrave;s verbeuse par rapport aux pr&eacute;c&eacute;dentes, car nous devons impl&eacute;menter la m&eacute;thode <code>onDocumentRestored</code>, et traiter chacune des propri&eacute;t&eacute;s individuellement (enregistrer la valeur, supprimer la propri&eacute;t&eacute;, r&eacute;assigner la valeur). Ceci est probl&eacute;matique si l'objet que nous voulons migrer poss&egrave;de de nombreuses propri&eacute;t&eacute;s, ou si leurs valeurs doivent &ecirc;tre transform&eacute;es de mani&egrave;re tr&egrave;s sp&eacute;ciale.</li></ul>
<p><span id="Addendum_A._Creating_the_properties_only_if_they_do_not_already_exist"></span>
</p>
<h2><span id="Addendum_A._Cr.C3.A9er_les_propri.C3.A9t.C3.A9s_uniquement_si_elles_n.27existent_pas_d.C3.A9j.C3.A0"></span><span class="mw-headline" id="Addendum_A._Cr&eacute;er_les_propri&eacute;t&eacute;s_uniquement_si_elles_n'existent_pas_d&eacute;j&agrave;">Addendum A. Cr&eacute;er les propri&eacute;t&eacute;s uniquement si elles n'existent pas d&eacute;j&agrave;</span></h2>
<p>L'un des inconv&eacute;nients de la m&eacute;thode 2 est qu'elle essaiera toujours d'ajouter les nouvelles propri&eacute;t&eacute;s. Si les anciennes propri&eacute;t&eacute;s ont le m&ecirc;me nom que les nouvelles, elles seront dupliqu&eacute;es avec un num&eacute;ro incr&eacute;mental, ainsi <code>Length</code> donnera <code>Length1</code>, puis <code>Length2</code>, et ainsi de suite. Cela fait de la m&eacute;thode 2 une option irr&eacute;aliste dans la plupart des cas, car la nouvelle classe n'utilisera de toute fa&ccedil;on qu'une seule propri&eacute;t&eacute;.
</p><p>Pour am&eacute;liorer cette m&eacute;thode, la nouvelle classe peut &eacute;galement &ecirc;tre modifi&eacute;e pour n'ajouter les propri&eacute;t&eacute;s que si elles n'existent pas d&eacute;j&agrave; sous le m&ecirc;me nom.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># objects/new_module.py</span>
<span class="k">class</span> <span class="nc">NewObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">):</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"GeneralArea"</span><span class="p">):</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyArea"</span><span class="p">,</span> <span class="s2">"GeneralArea"</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">600</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"Divisions"</span><span class="p">):</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyInteger"</span><span class="p">,</span> <span class="s2">"Divisions"</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">Divisions</span> <span class="o">=</span> <span class="mi">4</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Type</span> <span class="o">=</span> <span class="s2">"Custom"</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
<p>Dans ce cas, puisque <code>Length</code> existe d&eacute;j&agrave;, elle ne sera pas ajout&eacute;e &agrave; nouveau&nbsp;; <code>GeneralArea</code> et <code>Divisions</code> n'existent pas, elles seront donc ajout&eacute;es. Et comme pr&eacute;c&eacute;demment, <code>Area</code> sera conserv&eacute; car il n'est pas explicitement supprim&eacute;, bien qu'il ne soit peut-&ecirc;tre plus utilis&eacute; dans la nouvelle classe.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">PropertiesList</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'Area'</span><span class="p">,</span> <span class="s1">'Divisions'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'GeneralArea'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="s1">'Length'</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">objects</span><span class="o">.</span><span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f036bd4c6a0</span><span class="o">&gt;</span>
</pre></div>
<p>La m&ecirc;me chose peut &ecirc;tre faite pour la classe du <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a>.
</p><p>En utilisant cette m&eacute;thode 2 + A, le r&eacute;sultat est similaire &agrave; la m&eacute;thode 1 en ce sens que l'objet conservera toutes les propri&eacute;t&eacute;s pr&eacute;c&eacute;dentes, mais en plus il gagnera les nouvelles propri&eacute;t&eacute;s fournies par la nouvelle classe.
</p><p>La m&eacute;thode 3 n'a pas besoin de cet addendum &agrave; la nouvelle classe car les anciennes propri&eacute;t&eacute;s sont explicitement supprim&eacute;es, il n'y aura donc aucun conflit lors de l'installation des nouvelles propri&eacute;t&eacute;s. N&eacute;anmoins, c'est toujours une bonne pratique que chaque classe ajoute ses propri&eacute;t&eacute;s requises seulement si celles-ci n'existent pas d&eacute;j&agrave;. Ceci est utile &agrave; la fois dans le cas de la cr&eacute;ation de nouveaux <a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a> ou de leur migration.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients_4"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients_4">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> L'objet conservera toutes les propri&eacute;t&eacute;s pr&eacute;c&eacute;dentes, mais en plus il gagnera de nouvelles propri&eacute;t&eacute;s sans r&eacute;p&eacute;tition.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Comme la m&eacute;thode 2, elle ne traite toujours pas les propri&eacute;t&eacute;s renomm&eacute;es. Les anciennes propri&eacute;t&eacute;s doivent &ecirc;tre supprim&eacute;es manuellement.</li></ul>
<p><span id="Addendum_B._Migrating_different_versions_of_the_old_object"></span>
</p>
<h2><span id="Addendum_B._Migration_de_diff.C3.A9rentes_versions_de_l.27ancien_objet"></span><span class="mw-headline" id="Addendum_B._Migration_de_diff&eacute;rentes_versions_de_l'ancien_objet">Addendum B. Migration de diff&eacute;rentes versions de l'ancien objet</span></h2>
<p>La m&eacute;thode 3 est la plus complexe car les propri&eacute;t&eacute;s sont trait&eacute;es individuellement. Cependant, dans cette m&eacute;thode, nous disposons &eacute;galement d'une flexibilit&eacute; totale dans la mani&egrave;re de manipuler les donn&eacute;es, ce qui constitue un avantage si nous voulons effectuer des op&eacute;rations complexes.
</p><p>Si, d&egrave;s le d&eacute;but, nous cr&eacute;ons une propri&eacute;t&eacute; qui contient le num&eacute;ro de version de notre objet, nous pourrons utiliser ce num&eacute;ro &agrave; l'avenir pour effectuer une migration sp&eacute;cifique de cette version vers une autre. Nous d&eacute;finissons la propri&eacute;t&eacute; comme &eacute;tant en lecture seule, de sorte que nous ne pouvons pas l'&eacute;craser dans l'<a href="../fr/Property_editor.html" title="Property editor/fr">&Eacute;diteur de propri&eacute;t&eacute;s</a>, bien qu'elle soit toujours accessible depuis la <a href="../fr/Python_console.html" title="Python console/fr">console Python</a>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyArea"</span><span class="p">,</span> <span class="s2">"Area"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"Version"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">setEditorMode</span><span class="p">(</span><span class="s2">"Version"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Area</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">=</span> <span class="s2">"0.18"</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Type</span> <span class="o">=</span> <span class="s2">"Custom"</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
<p>Ensuite, lorsque nous voulons migrer l'objet, nous impl&eacute;mentons la m&eacute;thode <code>onDocumentRestored</code> et testons cette version.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>
<span class="n">_wrn</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span>

<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"Version"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">Version</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">==</span> <span class="s2">"0.18"</span><span class="p">:</span>
                <span class="n">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">==</span> <span class="s2">"0.19"</span><span class="p">:</span>
                <span class="n">_migrate_from_019</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="n">old</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Area</span>
    <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Length</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Area"</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Length"</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Version"</span><span class="p">)</span>

    <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">=</span> <span class="s2">"0.20"</span>
    <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used; properties migrated</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_migrate_from_019</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
<p>Nous ne sauvegardons pas la valeur <code>Version</code> car nous d&eacute;finirons un nouveau num&eacute;ro <code>Version</code> lors de la migration. Comme le montre l'exemple, nous pouvons impl&eacute;menter diverses fonctions pour chaque version correspondante de l'objet que nous avons l'intention de migrer. Nous omettons la migration des propri&eacute;t&eacute;s du <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a> mais elle suit le m&ecirc;me sch&eacute;ma.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients_5"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients_5">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Nous avons un contr&ocirc;le total sur ce qu'il faut faire avec les anciennes propri&eacute;t&eacute;s, et sur la fa&ccedil;on d'effectuer la migration.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Nous pouvons impl&eacute;menter une m&eacute;thode particuli&egrave;re pour migrer une version particuli&egrave;re de l'ancien objet.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Cette m&eacute;thode est tr&egrave;s verbeuse car nous devons avoir une id&eacute;e claire de la fa&ccedil;on de traiter chacune des propri&eacute;t&eacute;s de chaque "version" que nous voulons migrer. Si notre objet poss&egrave;de de nombreuses versions diff&eacute;rentes cr&eacute;&eacute;es au fil des ans, nous devrons peut-&ecirc;tre pr&eacute;parer une longue liste de m&eacute;thodes pour les faire migrer vers l'objet le plus r&eacute;cent.</li></ul>
<p><span id="Addendum_B2._Using_internal_class_attributes_instead_of_properties"></span>
</p>
<h2><span id="Addendum_B2._Utilisation_des_attributs_internes_de_la_classe_au_lieu_des_propri.C3.A9t.C3.A9s"></span><span class="mw-headline" id="Addendum_B2._Utilisation_des_attributs_internes_de_la_classe_au_lieu_des_propri&eacute;t&eacute;s">Addendum B2. Utilisation des attributs internes de la classe au lieu des propri&eacute;t&eacute;s</span></h2>
<p>Au lieu d'utiliser une <a href="../fr/Property.html" title="Property/fr">propri&eacute;t&eacute;</a> de l'objet pour contenir l'information de version, nous pouvons utiliser un attribut de la classe. De cette fa&ccedil;on, nous "cachons" l'information sur la version, car les propri&eacute;t&eacute;s sont normalement publiques et visibles dans l'<a href="../fr/Property_editor.html" title="Property editor/fr">&eacute;diteur de propri&eacute;t&eacute;s</a>, alors que les attributs de classe ne peuvent &ecirc;tre manipul&eacute;s qu'&agrave; partir de la <a href="../fr/Python_console.html" title="Python console/fr">console Python</a>. Les attributs de classe peuvent &ecirc;tre sauvegard&eacute;s et restaur&eacute;s comme expliqu&eacute; dans <a href="../fr/Scripted_objects_saving_attributes.html" title="Scripted objects saving attributes/fr">Sauvegarde des attributs des objets scripts</a>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyArea"</span><span class="p">,</span> <span class="s2">"Area"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Area</span> <span class="o">=</span> <span class="mi">300</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Type</span> <span class="o">=</span> <span class="s2">"Custom"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ver</span> <span class="o">=</span> <span class="s2">"0.18"</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
<p>Cet attribut est inspect&eacute; en regardant l'attribut <code>Proxy</code>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">Custom</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">ver</span><span class="p">)</span>
<span class="mf">0.18</span>
</pre></div>
<p>Ensuite, le fichier est modifi&eacute; pour migrer l'objet.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>
<span class="n">_wrn</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span>

<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="s2">"ver"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">ver</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span><span class="o">.</span><span class="n">ver</span> <span class="o">==</span> <span class="s2">"0.18"</span><span class="p">:</span>
                <span class="n">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="n">old</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Area</span>
    <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Length</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Area"</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Length"</span><span class="p">)</span>

    <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Length"</span><span class="p">]</span>
    <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used; properties migrated</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<p>Lorsque nous installons la nouvelle classe, celle-ci doit d&eacute;finir la nouvelle valeur de l'attribut version, par exemple, <code>self.ver = "0.20"</code>.
</p><p><span id="Addendum_C._Method_3_without_removing_old_properties_that_are_named_the_same"></span>
</p>
<h2><span id="Addendum_C._M.C3.A9thode_3_sans_supprimer_les_anciennes_propri.C3.A9t.C3.A9s_qui_portent_le_m.C3.AAme_nom"></span><span class="mw-headline" id="Addendum_C._M&eacute;thode_3_sans_supprimer_les_anciennes_propri&eacute;t&eacute;s_qui_portent_le_m&ecirc;me_nom">Addendum C. M&eacute;thode 3 sans supprimer les anciennes propri&eacute;t&eacute;s qui portent le m&ecirc;me nom</span></h2>
<p>Comme dans l'addendum A, nous pouvons &eacute;crire la nouvelle classe pour cr&eacute;er des propri&eacute;t&eacute;s uniquement si elles ne sont pas d&eacute;j&agrave; pr&eacute;sentes. En utilisant la m&eacute;thode 3, nous sauvegardons les valeurs des anciennes propri&eacute;t&eacute;s, puis nous supprimons les anciennes propri&eacute;t&eacute;s. Cependant, si les nouvelles propri&eacute;t&eacute;s sont nomm&eacute;es de la m&ecirc;me mani&egrave;re que les anciennes, il n'est pas n&eacute;cessaire de supprimer les anciennes, nous pouvons simplement r&eacute;utiliser la m&ecirc;me propri&eacute;t&eacute;, car nous savons que la propri&eacute;t&eacute; ne sera pas dupliqu&eacute;e. Si nous utilisons l'addendum B, nous avons &eacute;galement un moyen d'interroger la version.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># old_module.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">objects.new_module</span> <span class="k">as</span> <span class="nn">new_module</span>
<span class="n">_wrn</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span>

<span class="k">class</span> <span class="nc">OldObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">onDocumentRestored</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">"Version"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">Version</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">==</span> <span class="s2">"0.18"</span><span class="p">:</span>
                <span class="n">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_migrate_from_018</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="n">old</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">Area</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">"Area"</span><span class="p">)</span>

    <span class="n">new_module</span><span class="o">.</span><span class="n">NewObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">GeneralArea</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">old</span><span class="p">[</span><span class="s2">"Area"</span><span class="p">]</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">Version</span> <span class="o">=</span> <span class="s2">"0.20"</span>
    <span class="n">_wrn</span><span class="p">(</span><span class="s2">"New proxy class used; properties migrated</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<p>Comme nous le voyons dans l'exemple, l'ancienne propri&eacute;t&eacute; <code>Area</code> est supprim&eacute;e et migr&eacute;e vers la nouvelle propri&eacute;t&eacute; <code>GeneralArea</code> comme d'habitude. Nous n'avons pas besoin de supprimer <code>Length</code> ni <code>Version</code> parce que dans la nouvelle classe ils sont toujours utilis&eacute;s avec le m&ecirc;me nom, et ils ne seront pas cr&eacute;&eacute;s &agrave; nouveau (addendum A). Comme nous ne voulons pas modifier <code>Length</code>, cette propri&eacute;t&eacute; n'est pas touch&eacute;e du tout&nbsp;; elle est migr&eacute;e vers la nouvelle classe en silence. Par contre, nous mettons &agrave; jour <code>Version</code> avec la nouvelle valeur. Nous omettons la migration des propri&eacute;t&eacute;s de <a href="../fr/Viewprovider.html" title="Viewprovider/fr">viewprovider</a> mais elle suit le m&ecirc;me sch&eacute;ma.
</p><p>Cela devrait fonctionner comme la m&eacute;thode 3, c'est-&agrave;-dire que les anciennes propri&eacute;t&eacute;s sont supprim&eacute;es et que seules les nouvelles propri&eacute;t&eacute;s restent dans le nouvel objet. La seule diff&eacute;rence est que nous omettons de supprimer et de recr&eacute;er les propri&eacute;t&eacute;s qui portent le m&ecirc;me nom. Ce processus devrait fonctionner tant que l'ancienne <a href="../fr/Property.html" title="Property/fr">propri&eacute;t&eacute;</a> et la nouvelle <a href="../fr/Property.html" title="Property/fr">propri&eacute;t&eacute;</a> ont le m&ecirc;me type (par exemple, <code>App::PropertyLength</code> ou <code>App::PropertyArea</code>), de sorte que l'ancienne propri&eacute;t&eacute; peut transmettre sa valeur directement. Cependant, si la nouvelle propri&eacute;t&eacute; a un type diff&eacute;rent de l'ancienne, l'ancienne propri&eacute;t&eacute; doit &ecirc;tre supprim&eacute;e, sinon l'ancienne propri&eacute;t&eacute; &eacute;crasera compl&egrave;tement la nouvelle, ce qui n'est probablement pas ce que nous voulons car la nouvelle classe s'attendra au nouveau type et non &agrave; l'ancien.
</p><p><span id="Advantages_and_disadvantages"></span>
</p>
<h3><span id="Avantages_et_inconv.C3.A9nients_6"></span><span class="mw-headline" id="Avantages_et_inconv&eacute;nients_6">Avantages et inconv&eacute;nients</span></h3>
<p><b>Avantages</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Comme la m&eacute;thode 3, cette m&eacute;thode nous permet un contr&ocirc;le complet de la migration des anciennes informations.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_OK.svg&amp;filetimestamp=20240704192428&amp;.html" class="mw-file-description"><img src="../File/Edit_OK.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Nous &eacute;vitons d'&eacute;crire du code qui supprime et recr&eacute;e des propri&eacute;t&eacute;s dont le nom est identique.</li></ul>
<p><b>Inconv&eacute;nients</b>
</p>
<ul><li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Comme la m&eacute;thode 3, cette m&eacute;thode est encore tr&egrave;s verbeuse car nous devons manipuler les propri&eacute;t&eacute;s avec soin.</li>
<li><span typeof="mw:File"><a href="../index.php?title=Edit_Cancel.svg&amp;filetimestamp=20240704192407&amp;.html" class="mw-file-description"><img src="../File/Edit_Cancel.svg" decoding="async" width="24" height="24" class="mw-file-element"></a></span> Si une nouvelle <a href="../fr/Property.html" title="Property/fr">propri&eacute;t&eacute;</a> et une ancienne <a href="../fr/Property.html" title="Property/fr">propri&eacute;t&eacute;</a> partagent le m&ecirc;me nom, la nouvelle propri&eacute;t&eacute; sera &eacute;cras&eacute;e, ce qui peut &ecirc;tre un comportement ind&eacute;sirable, surtout si les deux propri&eacute;t&eacute;s ont des types diff&eacute;rents. Dans ce cas, la suppression de l'ancienne propri&eacute;t&eacute; et la migration manuelle de sa valeur sont toujours n&eacute;cessaires.</li></ul>
<p><span id="Summary"></span>
</p>
<h2><span id="R.C3.A9sum.C3.A9"></span><span class="mw-headline" id="R&eacute;sum&eacute;">R&eacute;sum&eacute;</span></h2>
<p>Chacune des m&eacute;thodes a une utilisation recommand&eacute;e&nbsp;:
</p>
<ul><li>M&eacute;thode 1. Le module est d&eacute;plac&eacute; ou renomm&eacute; mais les propri&eacute;t&eacute;s sont les m&ecirc;mes. Redirection simple des classes car les propri&eacute;t&eacute;s n'ont pas besoin d'&ecirc;tre modifi&eacute;es du tout.</li>
<li>M&eacute;thode 2+A. Sc&eacute;narios de migration simples. Affichage d'un message lorsque l'objet est migr&eacute; d'une classe &agrave; une autre. Les propri&eacute;t&eacute;s sont du m&ecirc;me type et n'ont pas besoin d'&ecirc;tre modifi&eacute;es du tout.</li>
<li>M&eacute;thode 3, 3+A ou 3+B. Sc&eacute;narios de migration complexes. Contr&ocirc;le total des propri&eacute;t&eacute;s, suppression des anciennes propri&eacute;t&eacute;s et ajout de nouvelles propri&eacute;t&eacute;s. Un identifiant pour conna&icirc;tre la version de l'objet est utile pour choisir la bonne fonction pour effectuer la migration (Addendum B ou B2).</li></ul>
<p>&Eacute;vitez de pr&eacute;f&eacute;rence les m&eacute;thodes suivantes&nbsp;:
</p>
<ul><li>M&eacute;thode 2. Les propri&eacute;t&eacute;s seront dupliqu&eacute;es si la nouvelle classe ne v&eacute;rifie pas les propri&eacute;t&eacute;s existantes (Addendum A).</li>
<li>M&eacute;thode 3+C. A n'utiliser que lorsque les anciennes propri&eacute;t&eacute;s et les nouvelles propri&eacute;t&eacute;s sont du m&ecirc;me type. Sinon, utilisez la m&eacute;thode 3 ou 3+B pour supprimer les anciennes propri&eacute;t&eacute;s, et traitez-les exactement comme il se doit.</li></ul>
<p><span id="Links"></span>
</p>
<h2><span class="mw-headline" id="Liens">Liens</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?t=42948">Migrating and upgrading old scripted objects</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=46218">Migrate old scripted objects</a></li></ul>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../index.php?title=Power_user_hub.png&amp;filetimestamp=20200511213015&amp;.html" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24" class="mw-file-element"></a></span> <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>Scripts FreeCAD&nbsp;:</b> <a href="../fr/Python.html" title="Python/fr">Python</a>, <a href="../fr/Introduction_to_Python.html" title="Introduction to Python/fr">Introduction &agrave; Python</a>, <a href="../fr/Python_scripting_tutorial.html" title="Python scripting tutorial/fr">Tutoriel sur les scripts Python</a>, <a href="../fr/FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/fr">D&eacute;buter avec les scripts</a></li></ul>
<hr>
<ul><li><b>Modules&nbsp;:</b> <a href="../fr/Builtin_modules.html" title="Builtin modules/fr">Modules int&eacute;gr&eacute;s</a>, <a href="../fr/Units.html" title="Units/fr">Unit&eacute;s</a>, <a href="../fr/Quantity.html" title="Quantity/fr">Quantity</a></li>
<li><b>Ateliers&nbsp;:</b> <a href="../fr/Workbench_creation.html" title="Workbench creation/fr">Cr&eacute;ation d'atelier</a>, <a href="../fr/Gui_Command.html" title="Gui Command/fr">Commands Gui</a>, <a href="../fr/Command.html" title="Command/fr">Les commandes</a>, <a href="../fr/Installing_more_workbenches.html" title="Installing more workbenches/fr">Installer des ateliers suppl&eacute;mentaires</a></li>
<li><b>Maillages et objets Parts&nbsp;:</b> <a href="../fr/Mesh_Scripting.html" title="Mesh Scripting/fr">Scripts Mesh</a>, <a href="../fr/Topological_data_scripting.html" title="Topological data scripting/fr">Script de donn&eacute;es topologiques</a>, <a href="../fr/Mesh_to_Part.html" title="Mesh to Part/fr">Conversion objet Mesh en Part</a>, <a href="../fr/PythonOCC.html" title="PythonOCC/fr">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Objets param&eacute;triques&nbsp;:</b> <a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a>, <a href="../fr/Viewprovider.html" title="Viewprovider/fr">Viewproviders</a> <small>(<a href="../fr/Custom_icon_in_tree_view.html" title="Custom icon in tree view/fr">Ic&ocirc;ne personnalis&eacute;e dans l'arborescence</a>)</small></li>
<li><b>Sc&eacute;nographie&nbsp;:</b> <a href="../fr/Scenegraph.html" title="Scenegraph/fr">Graphe de sc&egrave;ne Coin (Inventor)</a>, <a href="../fr/Pivy.html" title="Pivy/fr">Pivy</a></li>
<li><b>Interface graphique&nbsp;:</b> <a href="../fr/Interface_creation.html" title="Interface creation/fr">Cr&eacute;ation d'interface</a>, <a href="../fr/Dialog_creation.html" title="Dialog creation/fr">Cr&eacute;ation d'une boite de dialogue</a> <small>(<a href="../fr/Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/fr">1</a>, <a href="../fr/Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/fr">2</a>, <a href="../fr/Dialog_creation_setting_colors.html" title="Dialog creation setting colors/fr">3</a>, <a href="../fr/Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/fr">4</a>, <a href="../fr/PySide_usage_snippets.html" title="PySide usage snippets/fr">5</a>)</small>, <a href="../fr/PySide.html" title="PySide/fr">PySide</a>, Exemples PySide <a href="../fr/PySide_Beginner_Examples.html" title="PySide Beginner Examples/fr">d&eacute;butant</a>, <a href="../fr/PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/fr">interm&eacute;diaire</a>, <a href="../fr/PySide_Advanced_Examples.html" title="PySide Advanced Examples/fr">exp&eacute;riment&eacute;</a></li>
<li><b>Macros&nbsp;:</b> <a href="../fr/Macros.html" title="Macros/fr">Macros</a>, <a href="../fr/How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a></li>
<li><b>Int&eacute;gration&nbsp;:</b> <a href="../fr/Embedding_FreeCAD.html" title="Embedding FreeCAD/fr">Int&eacute;grer FreeCAD</a>, <a href="../fr/Embedding_FreeCADGui.html" title="Embedding FreeCADGui/fr">Int&eacute;gration de FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Autre&nbsp;:</b> <a href="../fr/Expressions.html" title="Expressions/fr">Expressions</a>, <a href="../fr/Code_snippets.html" title="Code snippets/fr">Extraits de codes</a>, <a href="../fr/Line_drawing_function.html" title="Line drawing function/fr">Fonction - tracer une ligne</a>, <a href="../fr/FreeCAD_vector_math_library.html" title="FreeCAD vector math library/fr">Biblioth&egrave;que math&eacute;matique vectorielle de FreeCAD</a> <small>(d&eacute;pr&eacute;ci&eacute;)</small></li></ul>
<hr>
<ul><li><b>Hubs&nbsp;:</b> <a href="../fr/User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>, <a href="../fr/Developer_hub.html" title="Developer hub/fr">Hub d&eacute;veloppeurs</a></li></ul></div>
    </div></div>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20250713174127
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.159 seconds
Real time usage: 2.864 seconds
Preprocessor visited node count: 834/1000000
Post&#8208;expand include size: 10102/2097152 bytes
Template argument size: 11675/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 24/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 52220/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 2760.635      1 -total
 99.43% 2744.772     24 Template:Code
  0.17%    4.639      1 Template:Powerdocnavi/fr
  0.09%    2.426     48 Template:Incode
  0.07%    2.017      5 Template:FileName
  0.07%    1.807      1 Template:Navigation_menu_2
  0.03%    0.849      1 Template:Clear
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:273001-0!canonical and timestamp 20250713174124 and revision id 1612568. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>