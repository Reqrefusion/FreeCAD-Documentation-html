<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Translating an external workbench/fr</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Translating+an+external+workbench&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--high" title="&Uuml;bersetzen eines externen Arbeitsbereichs (87% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Translating_an_external_workbench.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Translating an external workbench (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../es/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="Traduciendo un banco de trabajo externo (6% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--high" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="../it/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="Traduzione di un ambiente di lavoro esterno (2% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--high" title="T&#322;umaczenie interfejsu zewn&#281;trznych &#347;rodowisk pracy (98% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../pt-br/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--med" title="Traduzindo uma bancada externa (40% translated)" lang="pt-BR" dir="ltr">portugu&ecirc;s do Brasil</a></li>
<li><a href="../ru/Translating_an_external_workbench.html" class="mw-pt-progress mw-pt-progress--low" title="&#1055;&#1077;&#1088;&#1077;&#1074;&#1086;&#1076; &#1074;&#1085;&#1077;&#1096;&#1085;&#1080;&#1093; &#1074;&#1077;&#1088;&#1089;&#1090;&#1072;&#1082;&#1086;&#1074; (14% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<p>Dans les notes suivantes, <code>"context"</code> doit &ecirc;tre le nom de votre extension ou de votre atelier, par exemple, <code>"MySuperAddon"</code> ou <code>"DraftPlus"</code>, ou autre. Les majuscules ont leur importance ici&nbsp;: <code>"Context"</code> n'est pas la m&ecirc;me chose que <code>"context"</code> par exemple. Le contexte fait en sorte que toutes les traductions de votre code seront rassembl&eacute;es sous le m&ecirc;me nom, pour &ecirc;tre plus facilement identifi&eacute;es par les traducteurs. En d'autres termes, ils sauront exactement &agrave; quelle extension ou atelier appartient une cha&icirc;ne de caract&egrave;res particuli&egrave;re.
</p><p><b>Remarque</b>&nbsp;: Voici un script tout-en-un qui automatise la proc&eacute;dure compl&egrave;te mentionn&eacute;e ci-dessous (il est tout de m&ecirc;me conseill&eacute; de lire la proc&eacute;dure pour savoir ce que le script doit faire)&nbsp;: <a rel="nofollow" class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>.
</p><p><span id="Preparing_the_sources"></span>
</p>
<meta property="mw:PageProp/toc">
<h2><span id="Pr.C3.A9parer_les_sources"></span><span class="mw-headline" id="Pr&eacute;parer_les_sources">Pr&eacute;parer les sources</span></h2>
<p><span id="General"></span>
</p>
<h3><span id="G.C3.A9n.C3.A9ralit.C3.A9s"></span><span class="mw-headline" id="G&eacute;n&eacute;ralit&eacute;s">G&eacute;n&eacute;ralit&eacute;s</span></h3>
<ul><li>Ajouter un dossier <code>translations/</code>. Vous pouvez le nommer autrement, mais ce sera plus facile car c'est la m&ecirc;me chose dans FreeCAD. Dans ce dossier, vous placerez les fichiers <code>.ts</code> (les fichiers de traduction "source") et les fichiers <code>.qm</code> (fichiers de traduction compil&eacute;s).</li>
<li>Seul le texte affich&eacute; pour l'utilisateur dans l'interface de FreeCAD doit &ecirc;tre traduit. Le texte affich&eacute; uniquement dans la console Python ne doit pas &ecirc;tre traduit.</li>
<li>Le texte qui s'imprime dans la <code>FreeCAD.Console</code> est affich&eacute; dans la "vue rapport" et doit donc &ecirc;tre traduit. La "vue rapport" est diff&eacute;rente depuis la console Python.</li></ul>
<p><span id="In_every_Python_.py_file"></span>
</p>
<h3><span class="mw-headline" id="Dans_chaque_fichier_Python_.py">Dans chaque fichier Python .py</span></h3>
<ul><li>Dans chaque fichier o&ugrave; vous devez traduire du texte, vous devez d&eacute;finir une fonction <code>translate()</code>. Elle doit &ecirc;tre nomm&eacute;e exactement <code>translate</code>&nbsp;: l'extracteur de cha&icirc;nes de caract&egrave;res s'appuie sur ce nom exact. Vous pouvez utiliser le nom enti&egrave;rement qualifi&eacute; de Qt, mais c'est un peu plus propre &agrave; utiliser&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="n">translate</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">translate</span>
</pre></div></dd></dl>
<ul><li>Tout le texte qui doit &ecirc;tre traduit doit &ecirc;tre trait&eacute; par la fonction <code>translate()</code>&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">"My text"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>devient&nbsp;:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>Sachez que <code>translate()</code> n'est pas seulement une fonction normale&nbsp;: elle sert &eacute;galement de "balise" (tag) pour l'utilitaire de traitement de texte <code>lupdate</code>, et doit donc &ecirc;tre nomm&eacute;e exactement "translate". Le programme <code>lupdate</code> est un simple processeur de texte, il n'ex&eacute;cute pas votre code. Vous devez passer des cha&icirc;nes de caract&egrave;res directement &agrave; la fonction <code>translate()</code>&nbsp;: vous ne pouvez pas passer de variables, de constantes, etc. Par exemple&nbsp;:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># This works:</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># This does not, lupdate only sees the word "a_variable", and doesn't know what that is:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="s2">"My text"</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="n">a_variable</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># But this works -- a_variable will contain the translated string:</span>
<span class="n">a_variable</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">a_variable</span>  <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<dl><dd>Ceci peut &ecirc;tre utilis&eacute; partout&nbsp;: dans <code>print()</code>, dans <code>FreeCAD.Console.PrintMessage()</code>, dans les dialogues Qt, etc. Les fonctions <code>FreeCAD.Console</code> n'ajoutent pas automatiquement le caract&egrave;re de nouvelle ligne (<code>\n</code>), qui doit donc &ecirc;tre ajout&eacute; &agrave; la fin si vous le souhaitez. Ce caract&egrave;re n'a pas besoin d'&ecirc;tre traduit non plus, il peut donc se trouver en dehors de la fonction de traduction&nbsp;:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="n">translate</span><span class="p">(</span><span class="s2">"context"</span><span class="p">,</span> <span class="s2">"My text"</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</pre></div></dd></dl>
<ul><li>Si vous utilisez des fichiers <code>.ui</code> r&eacute;alis&eacute;s avec QtDesigner, vous n'avez rien &agrave; faire de sp&eacute;cial avec eux.</li>
<li>Lorsque vous cr&eacute;ez de nouveaux objets, ne traduisez pas le "Name" de l'objet. Traduisez plut&ocirc;t le "Label" de l'objet. La diff&eacute;rence est qu'un "Nom" est unique&nbsp;; il reste le m&ecirc;me pendant toute la dur&eacute;e de vie de l'objet&nbsp;; en revanche, une "&Eacute;tiquette" peut &ecirc;tre modifi&eacute;e par l'utilisateur comme il le souhaite.</li>
<li>Lorsque vous cr&eacute;ez des propri&eacute;t&eacute;s pour vos objets, ne traduisez pas le nom de la propri&eacute;t&eacute;. Mais placez la description dans <code>QT_TRANSLATE_NOOP</code>&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyBool"</span><span class="p">,</span> <span class="s2">"MyProperty"</span><span class="p">,</span> <span class="s2">"PropertyGroup"</span><span class="p">,</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"App::Property"</span><span class="p">,</span> <span class="s2">"This is what My Property does"</span><span class="p">))</span>
</pre></div></dd></dl>
<dl><dd>N'utilisez pas votre propre <code>"context"</code> dans ce cas pr&eacute;cis. Gardez <code>"App::Property"</code>.</dd></dl>
<p><span id="In_InitGui.py"></span>
</p>
<h3><span class="mw-headline" id="Dans_InitGui.py">Dans InitGui.py</span></h3>
<ul><li>Ajouter la ligne suivante en haut du fichier&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<div class="mw-translate-fuzzy">
<dl><dd>La macro <code>QT_TRANSLATE_NOOP</code> ne fait rien, mais elle marque les textes qui seront repris plus tard par l'utilitaire <code>lupdate</code>. Nous ne l'utilisons que dans des cas particuliers o&ugrave; FreeCAD s'occupe lui-m&ecirc;me de tout.</dd></dl>
</div>
<ul><li>Pour traduire les noms des menus et des barres d'outils, utilisez le mot <code>"Workbench"</code> comme contexte&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My menu"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"Workbench"</span><span class="p">,</span> <span class="s2">"My toolbar"</span><span class="p">),</span> <span class="p">[</span><span class="nb">list</span> <span class="n">of</span> <span class="n">commands</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div></dd></dl>
<ul><li>Ajoutez le chemin vers votre dossier <code>translations/</code> et mettez &agrave; jour la locale dans la fonction Initialized&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="s2">"/path/to/translations"</span><span class="p">)</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<dl><dd>Le fichier <code>InitGui.py</code> n'a pas d'attribut <b>file</b>, il n'est donc pas facile de trouver l'emplacement relatif du dossier des traductions. Une fa&ccedil;on simple de contourner ce probl&egrave;me est de faire en sorte qu'il importe un autre fichier du m&ecirc;me dossier, et de faire dans ce fichier&nbsp;:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addLanguagePath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">"translations"</span><span class="p">))</span>
<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">updateLocale</span><span class="p">()</span>
</pre></div></dd></dl>
<p><span id="Inside_each_FreeCAD_command_class"></span>
</p>
<h3><span id=".C3.80_l.27int.C3.A9rieur_de_chaque_classe_de_commande_de_FreeCAD"></span><span class="mw-headline" id="&Agrave;_l'int&eacute;rieur_de_chaque_classe_de_commande_de_FreeCAD">&Agrave; l'int&eacute;rieur de chaque classe de commande de FreeCAD</span></h3>
<ul><li>Ajouter la ligne suivante en haut du fichier&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div></dd></dl>
<ul><li>Traduisez les <code>'MenuText'</code> et <code>'Tooltip'</code> de la commande comme ceci&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">),</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div></dd></dl>
<dl><dd>o&ugrave; <code>"CommandName"</code> est le nom de la commande, d&eacute;fini par&nbsp;:</dd></dl>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">'CommandName'</span><span class="p">,</span> <span class="n">My_Command_Class</span><span class="p">())</span>
</pre></div></dd></dl>
<p><span id="Gather_all_the_strings_from_your_module"></span>
</p>
<h2><span id="Rassemblez_toutes_les_cha.C3.AEnes_de_votre_module"></span><span class="mw-headline" id="Rassemblez_toutes_les_cha&icirc;nes_de_votre_module">Rassemblez toutes les cha&icirc;nes de votre module</span></h2>
<ul><li>Vous aurez besoin des outils <code>lupdate</code>, <code>lconvert</code>, <code>lrelease</code> et <code>pylupdate</code> install&eacute;s sur votre syst&egrave;me. Dans les distributions Linux, ils sont g&eacute;n&eacute;ralement fournis dans des paquets nomm&eacute;s <code>pyside-tools</code> ou <code>pyside2-tools</code>. Sur certains syst&egrave;mes, <code>lupdate</code> est nomm&eacute; <code>lupdate4</code> ou <code>lupdate5</code> ou <code>lupdate-qt4</code> ou similaire. Idem pour les autres outils. Vous pouvez utiliser la version Qt4 ou Qt5 &agrave; votre choix. Dans Qt6 il n'y a pas de syst&egrave;me de traduction s&eacute;par&eacute; pour les fichiers Python, <code>lupdate</code> est utilis&eacute; pour extraire les cha&icirc;nes de caract&egrave;res de tous les types de fichiers sources.</li>
<li>Si vous avez des fichiers <code>.ui</code>, vous devez d'abord ex&eacute;cuter <code>lupdate</code>&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<dl><dd>Cette m&eacute;thode est r&eacute;cursive et trouvera les fichiers <code>.ui</code> dans toute la structure de votre r&eacute;pertoire.</dd></dl>
<ul><li>Si vous avez des fichiers <code>.py</code>, vous devez aussi ex&eacute;cuter <code>pylupdate</code>&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>Si vous avez ex&eacute;cut&eacute; les deux op&eacute;rations, vous devez maintenant unifier ces deux fichiers en un seul&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<ul><li>V&eacute;rifiez le contenu des trois fichiers <code>.ts</code> pour vous assurer qu'ils contiennent les cha&icirc;nes de caract&egrave;res, puis vous pouvez supprimer <code>pyfiles.ts</code> et <code>uifiles.ts</code>.</li>
<li>Vous pouvez faire tout cela dans un script bash comme celui-ci&nbsp;:</li></ul>
<dl><dd><div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="n">lupdate</span> <span class="o">*.</span><span class="n">ui</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">pylupdate</span> <span class="o">*.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">lconvert</span> <span class="o">-</span><span class="n">i</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span> <span class="o">-</span><span class="n">o</span> <span class="n">translations</span><span class="o">/</span><span class="n">MyModule</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">pyfiles</span><span class="o">.</span><span class="n">ts</span>
<span class="n">rm</span> <span class="n">translations</span><span class="o">/</span><span class="n">uifiles</span><span class="o">.</span><span class="n">ts</span>
</pre></div></dd></dl>
<p><span id="Send_the_.ts_file_to_a_translation_platform"></span>
</p>
<h2><span id="Envoyer_le_fichier_.ts_.C3.A0_une_plateforme_de_traduction"></span><span class="mw-headline" id="Envoyer_le_fichier_.ts_&agrave;_une_plateforme_de_traduction">Envoyer le fichier .ts &agrave; une plateforme de traduction</span></h2>
<p>Il est temps de faire traduire votre fichier <code>.ts</code>. Vous pouvez choisir de cr&eacute;er un compte sur une plateforme de traduction publique telle que <a rel="nofollow" class="external text" href="https://crowdin.com/">Crowdin</a> ou <a rel="nofollow" class="external text" href="https://www.transifex.com/">Transifex</a>, ou vous pouvez b&eacute;n&eacute;ficier de notre <a rel="nofollow" class="external text" href="https://crowdin.com/project/freecad-addons">compte FreeCAD existant sur Crowdin</a>, qui compte d&eacute;j&agrave; de nombreux utilisateurs et qui a donc plus de chance de faire traduire votre fichier rapidement par des personnes connaissant FreeCAD.
</p><p>Si vous souhaitez h&eacute;berger votre fichier sur le compte Crowdin de FreeCAD, contactez <a rel="nofollow" class="external text" href="https://forum.freecad.org/memberlist.php?mode=viewprofile&amp;u=68">Yorik</a> sur le <a rel="nofollow" class="external text" href="https://forum.freecad.org/">forum de FreeCAD</a>.
</p><p><i>Note:</i> certaines plates-formes comme Crowdin peuvent s'int&eacute;grer &agrave; GitHub et effectuer automatiquement tout le processus &agrave; partir des points 2, 3 et 4. Pour cela, vous ne pouvez pas utiliser le compte FreeCAD Crowdin&nbsp;; vous devrez cr&eacute;er votre propre compte.
</p><p><span id="Merge_the_translations"></span>
</p>
<h2><span class="mw-headline" id="Fusionner_les_traductions">Fusionner les traductions</span></h2>
<p>Une fois que votre fichier <code>.ts</code> a &eacute;t&eacute; traduit, m&ecirc;me partiellement, vous pouvez t&eacute;l&eacute;charger les traductions &agrave; partir du site&nbsp;:
</p>
<ul><li>Vous t&eacute;l&eacute;chargerez g&eacute;n&eacute;ralement un fichier <code>.zip</code> contenant un <code>.ts</code> par langue</li>
<li>Placez tous les fichiers <code>.ts</code> traduits, ainsi que votre fichier <code>.ts</code> de base, dans le dossier <code>translations/</code></li></ul>
<p><span id="Compile_the_translations"></span>
</p>
<h2><span class="mw-headline" id="Compiler_les_traductions">Compiler les traductions</span></h2>
<p>Maintenant, lancez le programme <code>lrelease</code> sur chaque fichier que vous avez:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">lrelease</span> <span class="s2">"translations/Draft_de.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_fr.ts"</span>
<span class="n">lrelease</span> <span class="s2">"translations/Draft_pt-BR.ts"</span>
</pre></div>
<p>Vous pouvez automatiser le processus:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">translations</span><span class="o">/*</span><span class="n">_</span><span class="o">*.</span><span class="n">ts</span>
<span class="n">do</span>
    <span class="n">lrelease</span> <span class="s2">"translations/$f"</span>
<span class="n">done</span>
</pre></div>
<p>Vous devriez trouver un fichier <code>.qm</code> pour chaque fichier <code>.ts</code> traduit. Les fichiers <code>.qm</code> sont ceux qui seront utilis&eacute;s par Qt et FreeCAD au moment de l'ex&eacute;cution.
</p><p>C'est tout ce dont vous avez besoin. Notez que certaines parties de votre atelier ne peuvent pas &ecirc;tre traduites &agrave; la vol&eacute;e si vous d&eacute;cidez de changer de langue. Si tel est le cas, vous devrez red&eacute;marrer FreeCAD pour que la nouvelle langue prenne effet.
</p><p><span id="Testing_translations"></span>
</p>
<h2><span class="mw-headline" id="Tester_les_traductions">Tester les traductions</span></h2>
<ol><li>Basculez FreeCAD vers une langue que vous avez traduite (par exemple l'Allemand)</li>
<li>Chargez la traduction dans FreeCAD, par exemple <code>FreeCADGui.addTranslationPath("/path/to/the/folder/containing/qmfile")</code></li>
<li>Tester quelque chose, par exemple <code>FreeCAD.Qt.translate("your context", "some string")</code></li></ol>
<p>R&eacute;sultat&nbsp;: Cela devrait vous donner la traduction allemande. Si cela fonctionne bien, alors la configuration de base est correcte. Alors nous pouvons regarder autre chose. Par exemple, les noms des commandes devraient toujours utiliser un contexte sp&eacute;cial qui est le nom de la commande telle qu'elle est enregistr&eacute;e dans FreeCAD.
</p><p><span id="Important_notes"></span>
</p>
<h3><span class="mw-headline" id="Remarques_importantes">Remarques importantes</span></h3>
<ul><li>Assurez-vous que vous utilisez un *contexte* et une *cha&icirc;ne* qui se trouvent r&eacute;ellement dans le fichier ts/qm bien s&ucirc;r.</li></ul>
<p><span id="Convenience_script"></span>
</p>
<h2><span class="mw-headline" id="Script_pratique">Script pratique</span></h2>
<p>Yorik maintient un script pratique pour l'atelier BIM, qui peut rassembler, charger et t&eacute;l&eacute;charger des fichiers ts.
Vous pouvez simplement copier et adapter ce script &agrave; votre atelier&nbsp;:
</p><p><a rel="nofollow" class="external free" href="https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py">https://github.com/yorikvanhavre/BIM_Workbench/blob/master/utils/updateTranslations.py</a>
</p><p><span id="Technical_details_and_advanced_usage"></span>
</p>
<h2><span id="D.C3.A9tails_techniques_et_utilisation_avanc.C3.A9e"></span><span class="mw-headline" id="D&eacute;tails_techniques_et_utilisation_avanc&eacute;e">D&eacute;tails techniques et utilisation avanc&eacute;e</span></h2>
<p>Dans les exemples ci-dessus, deux fonctions distinctes sont utilis&eacute;es&nbsp;: <code>translate()</code> et <code>QT_TRANSLATE_NOOP</code>. Vous pouvez &eacute;galement rencontrer <code></code> et <code>QT_TR_NOOP</code>, qui fournissent automatiquement l'argument "context" en fonction de l'emplacement de l'appel. Ces deux paires de fonctions sont fondamentalement diff&eacute;rentes. 
</p><p><code>translate()</code> et <code>tr()</code> accomplissent deux t&acirc;ches distinctes&nbsp;: au moment de l'ex&eacute;cution, elles effectuent la traduction r&eacute;elle de la cha&icirc;ne qui leur est pass&eacute;e en cha&icirc;ne traduite finale. Ceci est vrai qu'on leur fournisse une cha&icirc;ne litt&eacute;rale, une variable ou une constante&nbsp;: la recherche est dynamique et en temps r&eacute;el pendant l'ex&eacute;cution du code. Toutefois, elles fournissent une fonction suppl&eacute;mentaire hors temps d'ex&eacute;cution&nbsp;: elles sont reconnues par l'utilitaire <code>pylupdate</code>. Si (et seulement si) elles contiennent une cha&icirc;ne de caract&egrave;res litt&eacute;rale, cette cha&icirc;ne est extraite par l'utilitaire. SEULS les cha&icirc;nes de caract&egrave;res sont extraites par <code>pylupdate</code>. Si une variable est pass&eacute;e, elle est ignor&eacute;e par l'utilitaire <code>pylupdate</code>. Qt essaiera de fournir une traduction au moment de l'ex&eacute;cution, mais cela ne fonctionnera que si un autre morceau de code a appel&eacute; une des fonctions de traduction avec la cha&icirc;ne litt&eacute;rale qui doit &ecirc;tre traduite, afin que <code>pylupdate</code> puisse l'extraire. Notez que le code contenant la cha&icirc;ne litt&eacute;rale ne doit jamais &ecirc;tre ex&eacute;cut&eacute;, il doit simplement exister en tant que ligne de code dans un fichier quelque part&nbsp;: <code>pylupdate</code> n'effectue aucune analyse ou ex&eacute;cution de code, il effectue simplement une recherche et une extraction de cha&icirc;ne.
</p><p>En revanche, <code>QT_TRANSLATE_NOOP</code> et <code>QT_TR_NOOP</code> ne font rien du tout &agrave; l'ex&eacute;cution&nbsp;: ce sont des "no-ops" litt&eacute;rales et sont compl&egrave;tement ignor&eacute;es par le code en cours d'ex&eacute;cution. Leur seule utilit&eacute; est de marquer une cha&icirc;ne litt&eacute;rale pour qu'elle soit extraite par <code>pylupdate</code>&nbsp;: il est inutile de placer une variable dans un appel &agrave; l'une de ces fonctions, cela n'aura aucun effet. Elles sont utilis&eacute;es dans les cas o&ugrave; <code>translate()</code> ou <code>tr()</code> seront appel&eacute;es avec une variable contenant le texte &agrave; traduire. Par exemple, tout code utilis&eacute; pour cr&eacute;er une commande ou une propri&eacute;t&eacute; utilisera une fonction de type NOOP autour du texte ou de l'info-bulle du menu de la commande, ou de la docstring de la propri&eacute;t&eacute;&nbsp;: &agrave; l'ex&eacute;cution, lorsque FreeCAD affiche ces &eacute;l&eacute;ments &agrave; l'utilisateur, il appelle <code>translate()</code>&nbsp;: les cha&icirc;nes litt&eacute;rales doivent avoir &eacute;t&eacute; extraites par <code>pylupdate</code> au moment de la cr&eacute;ation, par exemple&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
            <span class="s1">'MenuText'</span><span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"My Command"</span><span class="p">),</span>
            <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="n">QT_TRANSLATE_NOOP</span><span class="p">(</span><span class="s2">"CommandName"</span><span class="p">,</span> <span class="s2">"Describes what the command does"</span><span class="p">),</span>
            <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
    <span class="p">}</span>
</pre></div>
<p>Dans cette utilisation, au moment de l'ex&eacute;cution, le dictionnaire renvoy&eacute; par cette fonction est litt&eacute;ralement&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="p">{</span> 
    <span class="s1">'Pixmap'</span>  <span class="p">:</span> <span class="s2">"path/to/icon.svg"</span><span class="p">,</span>
    <span class="s1">'MenuText'</span><span class="p">:</span> <span class="s2">"My Command"</span><span class="p">,</span>
    <span class="s1">'ToolTip'</span> <span class="p">:</span> <span class="s2">"Describes what the command does"</span><span class="p">,</span>
    <span class="s1">'Accel'</span>   <span class="p">:</span> <span class="s2">"Shift+A"</span>
<span class="p">}</span>
</pre></div>
<p>Il n'y a aucune r&eacute;f&eacute;rence &agrave; un quelconque type d'information de traduction. Lorsque FreeCAD affiche r&eacute;ellement ces informations &agrave; l'utilisateur, le pseudo-code est le suivant&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">commands</span><span class="p">:</span>
    <span class="n">resources</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">GetResources</span><span class="p">()</span>
    <span class="n">menu_text</span> <span class="o">=</span> <span class="n">translate</span><span class="p">(</span><span class="n">resources</span><span class="p">[</span><span class="s1">'MenuText'</span><span class="p">])</span>
</pre></div>
<p>Dans ce cas, <code>lupdate</code> ne peut pas extraire de cha&icirc;ne de caract&egrave;res de l'appel &agrave; <code>translate()</code> car il fait r&eacute;f&eacute;rence &agrave; une variable. Ainsi, <code>lupdate</code> ignore cet appel, mais au moment de l'ex&eacute;cution, Qt recherche la cha&icirc;ne qui lui est pass&eacute;e. Tant que quelque part dans le code, il y a un appel &agrave; l'une des fonctions de traduction avec une cha&icirc;ne litt&eacute;rale correspondante (dans ce cas, dans la fonction <code>GetResources()</code>), cet appel de traduction r&eacute;ussira.
</p><p>Pour v&eacute;rifier que les cha&icirc;nes de caract&egrave;res attendues sont extraites, vous pouvez ex&eacute;cuter manuellement la commande <code>pylupdate</code>&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pylupdate</span> <span class="n">myfile</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">ts</span> <span class="n">outfile</span><span class="o">.</span><span class="n">ts</span>
</pre></div>
<p>Le fichier <code>outfile.ts</code> contiendra l'ensemble des cha&icirc;nes de caract&egrave;res qui sont t&eacute;l&eacute;charg&eacute;es vers CrowdIn pour &ecirc;tre traduites.
</p><p><span id="Important_references"></span>
</p>
<h2><span id="R.C3.A9f.C3.A9rences_importantes"></span><span class="mw-headline" id="R&eacute;f&eacute;rences_importantes">R&eacute;f&eacute;rences importantes</span></h2>
<ul><li>Pourquoi et comment traduire les fonctions <code>openCommand()</code> (<a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=10&amp;t=55869">fil de discussion</a>)</li></ul>
<p><span id="Related_Pages"></span>
</p>
<h2><span class="mw-headline" id="Pages_en_relation">Pages en relation</span></h2>
<ul><li><a href="../fr/External_workbenches.html" title="External workbenches/fr">Ateliers externes</a></li>
<li><a href="../fr/Localisation.html" title="Localisation/fr">Localisation</a></li>
<li>Pour plus d'informations faites vos demandes ici sur le forum&nbsp;: <a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=10&amp;t=36413">Translating external workbenches</a>.</li></ul>
<p><br>
</p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../index.php?title=User_hub.png&amp;filetimestamp=20190221145008&amp;.html" class="mw-file-description"><img src="../File/User_hub.png" decoding="async" width="24" height="24" class="mw-file-element"></a></span> <a href="../fr/User_hub.html" title="User hub/fr">Hub utilisateurs</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b><a href="../fr/Getting_started.html" title="Getting started/fr">D&eacute;marrer avec FreeCAD</a></b></li>
<li><b>Installation&nbsp;:</b> <a href="../fr/Download.html" title="Download/fr">T&eacute;l&eacute;chargements</a>, <a href="../fr/Installing_on_Windows.html" title="Installing on Windows/fr">Windows</a>, <a href="../fr/Installing_on_Linux.html" title="Installing on Linux/fr">Linux</a>, <a href="../fr/Installing_on_Mac.html" title="Installing on Mac/fr">Mac</a>, <a href="../fr/Installing_additional_components.html" title="Installing additional components/fr">Logiciels suppl&eacute;mentaires</a>, <a href="../fr/Compile_on_Docker.html" title="Compile on Docker/fr">Docker</a>, <a href="../fr/AppImage.html" title="AppImage/fr">AppImage</a>, <a href="../fr/Ubuntu_Snap.html" title="Ubuntu Snap/fr">Ubuntu Snap</a></li>
<li><b>Bases&nbsp;:</b> <a href="../fr/About_FreeCAD.html" title="About FreeCAD/fr">&Agrave; propos de FreeCAD</a>, <a href="../fr/Interface.html" title="Interface/fr">Interface</a>, <a href="../fr/Mouse_navigation.html" title="Mouse navigation/fr">Navigation par la souris</a>, <a href="../fr/Selection_methods.html" title="Selection methods/fr">M&eacute;thodes de s&eacute;lection</a>, <a href="../fr/Object_name.html" title="Object name/fr">Objet name</a>, <a href="../fr/Preferences_Editor.html" title="Preferences Editor/fr">Pr&eacute;f&eacute;rences</a>, <a href="../fr/Workbenches.html" title="Workbenches/fr">Ateliers</a>, <a href="../fr/Document_structure.html" title="Document structure/fr">Structure du document</a>, <a href="../fr/Property.html" title="Property/fr">Propri&eacute;t&eacute;s</a>, <a href="../fr/Help_FreeCAD.html" title="Help FreeCAD/fr">Contribuer &agrave; FreeCAD</a>, <a href="../fr/Donate.html" title="Donate/fr">Faire un don</a></li></ul>
<hr>
<ul><li><b>Aide&nbsp;:</b> <a href="../fr/Tutorials.html" title="Tutorials/fr">Tutoriels</a>, <a href="../fr/Video_tutorials.html" title="Video tutorials/fr">Tutoriels vid&eacute;o</a></li>
<li><b><a href="../fr/Workbenches.html" title="Workbenches/fr">Ateliers</a>&nbsp;:</b> <a href="../fr/Std_Base.html" title="Std Base/fr">Std Base</a>, <a href="../fr/Arch_Workbench.html" title="Arch Workbench/fr">Arch</a>, <a href="../fr/Assembly_Workbench.html" title="Assembly Workbench/fr">Assembly</a>, <a href="../fr/CAM_Workbench.html" title="CAM Workbench/fr">CAM</a>, <a href="../fr/Draft_Workbench.html" title="Draft Workbench/fr">Draft</a>, <a href="../fr/FEM_Workbench.html" title="FEM Workbench/fr">FEM</a>, <a href="../fr/Inspection_Workbench.html" title="Inspection Workbench/fr">Inspection</a>, <a href="../fr/Mesh_Workbench.html" title="Mesh Workbench/fr">Mesh</a>, <a href="../fr/OpenSCAD_Workbench.html" title="OpenSCAD Workbench/fr">OpenSCAD</a>, <a href="../fr/Part_Workbench.html" title="Part Workbench/fr">Part</a>, <a href="../fr/PartDesign_Workbench.html" title="PartDesign Workbench/fr">PartDesign</a>, <a href="../fr/Points_Workbench.html" title="Points Workbench/fr">Points</a>, <a href="../fr/Reverse_Engineering_Workbench.html" title="Reverse Engineering Workbench/fr">Reverse Engineering</a>, <a href="../fr/Robot_Workbench.html" title="Robot Workbench/fr">Robot</a>, <a href="../fr/Sketcher_Workbench.html" title="Sketcher Workbench/fr">Sketcher</a>, <a href="../fr/Spreadsheet_Workbench.html" title="Spreadsheet Workbench/fr">Spreadsheet</a>, <a href="../fr/Surface_Workbench.html" title="Surface Workbench/fr">Surface</a>, <a href="../fr/TechDraw_Workbench.html" title="TechDraw Workbench/fr">TechDraw</a>, <a href="../fr/Testing.html" title="Testing/fr">Test</a></li></ul>
<hr>
<ul><li><b><a href="../fr/Addon.html" title="Addon/fr">Addons</a>&nbsp;:</b> <a href="../fr/Std_AddonMgr.html" title="Std AddonMgr/fr">Gestionnaire d'Addons</a>, <a href="../fr/External_workbenches.html" title="External workbenches/fr">Ateliers externes</a>, <a href="../fr/Scripting_and_macros.html" title="Scripting and macros/fr">Scripts et macros</a></li></ul>
<hr>
<ul><li><b>Hubs&nbsp;:</b> <a href="../fr/User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>, <a href="../fr/Developer_hub.html" title="Developer hub/fr">Hub D&eacute;veloppeurs</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20250719165103
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.064 seconds
Real time usage: 0.081 seconds
Preprocessor visited node count: 920/1000000
Post&#8208;expand include size: 9426/2097152 bytes
Template argument size: 5527/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 23/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 18669/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   21.377      1 -total
 38.38%    8.204     23 Template:Code
 18.23%    3.896     89 Template:Incode
 11.34%    2.424      1 Template:Userdocnavi/fr
  6.55%    1.401      1 Template:Emphasis
  4.42%    0.945      1 Template:Navigation_menu_2
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:150031-0!canonical and timestamp 20250719165103 and revision id 1615782. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>