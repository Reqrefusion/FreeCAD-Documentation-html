<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Workbench creation/fr</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Workbench+creation&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--complete" title="Erstellung von Arbeitsbereichen (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Workbench_creation.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Workbench creation (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../es/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="Workbench creation/es (2% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--high" lang="fr" dir="ltr">fran&ccedil;ais</span></li>
<li><a href="../it/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--high" title="Creare un Ambiente di lavoro (85% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--high" title="Tworzenie &#347;rodowiska pracy (85% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../pt-br/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--med" title="Cria&ccedil;&atilde;o de bancadas de trabalho (23% translated)" lang="pt-BR" dir="ltr">portugu&ecirc;s do Brasil</a></li>
<li><a href="../ro/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="Workbench creation/ro (2% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="../ru/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--high" title="&#1056;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1072; &#1074;&#1077;&#1088;&#1089;&#1090;&#1072;&#1082;&#1072; (85% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li>
<li><a href="../zh-cn/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--high" title="&#24037;&#20316;&#21488;&#30340;&#21019;&#24314; (85% translated)" lang="zh-Hans-CN" dir="ltr">&#20013;&#25991;&#65288;&#20013;&#22269;&#22823;&#38470;&#65289;</a></li>
<li><a href="../zh-hant/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="Workbench creation/zh-hant (0% translated)" lang="zh-Hant" dir="ltr">&#20013;&#25991;&#65288;&#32321;&#39636;&#65289;</a></li>
<li><a href="../zh-tw/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="&#24314;&#31435;Workbench (8% translated)" lang="zh-Hant-TW" dir="ltr">&#20013;&#25991;&#65288;&#33274;&#28771;&#65289;</a></li>
<li><a href="../ja/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="&#12527;&#12540;&#12463;&#12505;&#12531;&#12481;&#12398;&#36861;&#21152; (2% translated)" lang="ja" dir="ltr">&#26085;&#26412;&#35486;</a></li>
<li><a href="../ko/Workbench_creation.html" class="mw-pt-progress mw-pt-progress--low" title="&#51089;&#50629;&#45824; &#47564;&#46308;&#44592; (10% translated)" lang="ko" dir="ltr">&#54620;&#44397;&#50612;</a></li></ul></div>
<div class="warning-box">Cette page d&eacute;crit une m&eacute;thode &eacute;prouv&eacute;e pour cr&eacute;er des ateliers, mais il y a quelques ann&eacute;es, une suggestion a &eacute;t&eacute; faite pour am&eacute;liorer la structure des ateliers externes bas&eacute;s sur Python. Il semble y avoir un certain consensus sur le fait que cette structure devrait &eacute;tablir un nouveau standard, mais il n'a pas encore &eacute;t&eacute; int&eacute;gr&eacute; &agrave; ce wiki (&agrave; l'exception de deux liens dans la section &laquo;&nbsp;Liens connexes&nbsp;&raquo;).
Un autre paragraphe a &eacute;t&eacute; cr&eacute;&eacute; pour d&eacute;crire le nouveau standard. Voir la [<a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?t=101843">discussion</a>]</div>
<div class="docnav">
    <div><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></span></span> <a href="../fr/Localisation.html" title="Localisation/fr">Localisation</a></div>
    <div><a href="../fr/Extra_python_modules.html" title="Extra python modules/fr">Modules Python suppl&eacute;mentaires</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></span></span></div>
    <div><a href="../fr/Online_Help_Toc.html" title="Online Help Toc/fr">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Online_Help_Toc.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="48" data-file-height="48"></span></span></div>
</div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><meta property="mw:PageProp/toc"></div>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Cette page vous montrera comment ajouter un nouvel atelier &agrave; l'interface de FreeCAD. Les <a href="../fr/Workbenches.html" title="Workbenches/fr">ateliers</a> sont des conteneurs pour les commandes de FreeCAD. Ils peuvent &ecirc;tre cod&eacute;s en Python, en C++, ou dans un m&eacute;lange des deux, ce qui a l'avantage d'allier la vitesse du C++ &agrave; la flexibilit&eacute; du Python. Dans tous les cas, cependant, votre atelier sera lanc&eacute; par un ensemble de deux fichiers Python. Il peut s'agir d'ateliers &laquo;&nbsp;internes&nbsp;&raquo;, inclus dans la distribution de FreeCAD, ou d'ateliers &laquo;&nbsp;externes&nbsp;&raquo;, distribu&eacute;s via le <a href="../fr/Std_AddonMgr.html" title="Std AddonMgr/fr">gestionnaire des extensions</a> ou install&eacute;s manuellement par t&eacute;l&eacute;chargement depuis un d&eacute;p&ocirc;t en ligne. Les ateliers internes peuvent &ecirc;tre cod&eacute;s en C++, Python, ou une combinaison des deux, alors que les ateliers externes doivent &ecirc;tre en Python uniquement.
</p><p><span id="The_workbench_structure"></span>
</p>
<h2><span id="Structure_d.27un_atelier"></span><span class="mw-headline" id="Structure_d'un_atelier">Structure d'un atelier</span></h2>
<p>Vous avez besoin d'un dossier, avec le nom de votre choix, plac&eacute; dans le r&eacute;pertoire Mod de l'utilisateur, avec un fichier <code>Init.py</code> et, &eacute;ventuellement, un fichier <code>InitGui.py</code>. Le fichier <code>Init.py</code> est ex&eacute;cut&eacute; au d&eacute;marrage de FreeCAD et le fichier <code>InitGui.py</code> est ex&eacute;cut&eacute; imm&eacute;diatement apr&egrave;s, mais uniquement lorsque FreeCAD d&eacute;marre en mode GUI. C'est tout ce dont FreeCAD a besoin pour trouver votre atelier au d&eacute;marrage et l'ajouter &agrave; son interface.
</p><p>Le r&eacute;pertoire User Mod est un sous-r&eacute;pertoire du r&eacute;pertoire de donn&eacute;es de l'application utilisateur (vous pouvez trouver ce dernier en tapant <code>App.getUserAppDataDir()</code> dans la <a href="../fr/Python_console.html" class="mw-redirect" title="Python console/fr">console Python</a>)&nbsp;:
</p>
<ul><li>Sous Linux, il s'agit g&eacute;n&eacute;ralement de <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/home/&lt;username&gt;/.local/share/FreeCAD/Mod/</span> (<span style="font-size:small;color:green;">version 0.20 et suivantes</span>) ou <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/home/&lt;username&gt;/.FreeCAD/Mod/</span> (<span style="font-size:small;color:blue;">version 0.19 et pr&eacute;c&eacute;dentes</span>).</li>
<li>Sous Windows, il s'agit de <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">%APPDATA%\FreeCAD\Mod\</span>, qui est g&eacute;n&eacute;ralement <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">C:\Users\&lt;username&gt;\Appdata\Roaming\FreeCAD\Mod\</span>.</li>
<li>Sous macOS, il s'agit g&eacute;n&eacute;ralement de <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/Users/&lt;username&gt;/Library/Application Support/FreeCAD/Mod/</span>.</li></ul>
<p>Le r&eacute;pertoire Mod devrait ressembler &agrave; ceci&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">/</span><span class="n">Mod</span><span class="o">/</span>
 <span class="o">+--</span> <span class="n">MyWorkbench</span><span class="o">/</span>
     <span class="o">+--</span> <span class="n">Init</span><span class="o">.</span><span class="n">py</span>
     <span class="o">+--</span> <span class="n">InitGui</span><span class="o">.</span><span class="n">py</span>
</pre></div>
<p>Dans ces fichiers, vous pouvez faire ce que vous voulez. Ils sont g&eacute;n&eacute;ralement utilis&eacute;s comme ceci&nbsp;:
</p>
<ul><li>Dans le fichier Init.py, vous ajoutez simplement quelques &eacute;l&eacute;ments utilis&eacute;s m&ecirc;me lorsque FreeCAD fonctionne en mode console, par exemple les importateurs et les exportateurs de fichiers</li></ul>
<ul><li>Dans le fichier InitGui.py, vous d&eacute;finissez g&eacute;n&eacute;ralement un atelier, qui contient un nom, une ic&ocirc;ne et une s&eacute;rie de commandes FreeCAD (voir ci-dessous). Cet fichier Python d&eacute;finit &eacute;galement les fonctions ex&eacute;cut&eacute;es lors du chargement de FreeCAD (essayez d'en faire le moins possible &agrave; ce niveau, afin de ne pas ralentir le d&eacute;marrage). Un autre est ex&eacute;cut&eacute; lorsque l'atelier est activ&eacute; (c'est l&agrave; que vous ferez le plus du travail) et un troisi&egrave;me lorsque l'atelier est d&eacute;sactiv&eacute; (vous pouvez donc supprimer des &eacute;l&eacute;ments si n&eacute;cessaire).</li></ul>
<p>La structure et le contenu des fichiers d'un atelier d&eacute;crits ici correspondent &agrave; la m&eacute;thode classique de cr&eacute;ation d'un nouvel atelier. Il est possible d'utiliser une structure de fichiers l&eacute;g&egrave;rement diff&eacute;rente pour cr&eacute;er un nouvel atelier Python, cette m&eacute;thode alternative &eacute;tant mieux d&eacute;crite comme un &laquo;&nbsp;atelier avec espace de noms&nbsp;&raquo;. Les deux structures fonctionnent, il s'agit donc plut&ocirc;t d'une question de pr&eacute;f&eacute;rence lors de la cr&eacute;ation d'un nouvel atelier. Le style et la structure des ateliers pr&eacute;sent&eacute;s ici sont disponibles dans l'espace de noms global de FreeCAD, tandis que pour le style et la structure alternatifs, l'atelier r&eacute;side dans un espace de noms d&eacute;di&eacute;. Voir <a href="#Nouvel_atelier_externe_standard">Nouvel atelier externe standard</a> ci-dessous.
</p><p><span id="C++_workbench_structure"></span>
</p>
<h3><span id="Structure_d.27un_atelier_en_C.2B.2B"></span><span class="mw-headline" id="Structure_d'un_atelier_en_C++">Structure d'un atelier en C++</span></h3>
<p>Si vous codez votre atelier en Python, vous n'avez pas besoin de prendre de pr&eacute;cautions particuli&egrave;res, et pouvez simplement placer vos autres fichiers Python avec vos fichiers Init.py et InitGui.py. Lorsque vous travaillez en C++, cependant, vous devez faire plus attention, et commencer par respecter une r&egrave;gle fondamentale de FreeCAD&nbsp;: la s&eacute;paration de votre environnement de travail entre une partie App (qui peut fonctionner en mode console, sans aucun &eacute;l&eacute;ment GUI), et une partie Gui, qui ne sera charg&eacute;e que lorsque FreeCAD fonctionnera avec son environnement GUI complet. Ainsi, lors du d&eacute;veloppement d'un atelier en C++, vous allez tr&egrave;s probablement cr&eacute;er deux modules, un App et un Gui. Ces deux modules doivent bien s&ucirc;r &ecirc;tre appelables depuis Python. Tout module FreeCAD (App ou Gui) consiste, au minimum, en un fichier init de module. Voici un fichier typique AppMyModuleGui.cpp&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">extern</span> <span class="s2">"C"</span> <span class="p">{</span>
    <span class="n">void</span> <span class="n">MyModuleGuiExport</span> <span class="n">initMyModuleGui</span><span class="p">()</span>  
    <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="err">!</span><span class="n">Gui</span><span class="p">::</span><span class="n">Application</span><span class="p">::</span><span class="n">Instance</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyErr_SetString</span><span class="p">(</span><span class="n">PyExc_ImportError</span><span class="p">,</span> <span class="s2">"Cannot load Gui module in console application."</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="o">//</span> <span class="kn">import</span> <span class="nn">other</span> <span class="n">modules</span> <span class="n">this</span> <span class="n">one</span> <span class="n">depends</span> <span class="n">on</span>
            <span class="n">Base</span><span class="p">::</span><span class="n">Interpreter</span><span class="p">()</span><span class="o">.</span><span class="n">runString</span><span class="p">(</span><span class="s2">"import PartGui"</span><span class="p">);</span>
            <span class="o">//</span> <span class="n">run</span> <span class="n">some</span> <span class="n">python</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">console</span>
            <span class="n">Base</span><span class="p">::</span><span class="n">Interpreter</span><span class="p">()</span><span class="o">.</span><span class="n">runString</span><span class="p">(</span><span class="s2">"print('welcome to my module!')"</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="n">const</span> <span class="n">Base</span><span class="p">::</span><span class="ne">Exception</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PyErr_SetString</span><span class="p">(</span><span class="n">PyExc_ImportError</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">what</span><span class="p">());</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">(</span><span class="n">void</span><span class="p">)</span> <span class="n">Py_InitModule</span><span class="p">(</span><span class="s2">"MyModuleGui"</span><span class="p">,</span> <span class="n">MyModuleGui_Import_methods</span><span class="p">);</span>   <span class="o">/*</span> <span class="n">mod</span> <span class="n">name</span><span class="p">,</span> <span class="n">table</span> <span class="n">ptr</span> <span class="o">*/</span>
        <span class="n">Base</span><span class="p">::</span><span class="n">Console</span><span class="p">()</span><span class="o">.</span><span class="n">Log</span><span class="p">(</span><span class="s2">"Loading GUI of MyModule... done</span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
    
        <span class="o">//</span> <span class="n">initializes</span> <span class="n">the</span> <span class="n">FreeCAD</span> <span class="n">commands</span> <span class="p">(</span><span class="ow">in</span> <span class="n">another</span> <span class="n">cpp</span> <span class="n">file</span><span class="p">)</span>
        <span class="n">CreateMyModuleCommands</span><span class="p">();</span>
    
        <span class="o">//</span> <span class="n">initializes</span> <span class="n">workbench</span> <span class="ow">and</span> <span class="nb">object</span> <span class="n">definitions</span>
        <span class="n">MyModuleGui</span><span class="p">::</span><span class="n">Workbench</span><span class="p">::</span><span class="n">init</span><span class="p">();</span>
        <span class="n">MyModuleGui</span><span class="p">::</span><span class="n">ViewProviderSomeCustomObject</span><span class="p">::</span><span class="n">init</span><span class="p">();</span>
    
         <span class="o">//</span> <span class="n">add</span> <span class="n">resources</span> <span class="ow">and</span> <span class="n">reloads</span> <span class="n">the</span> <span class="n">translators</span>
        <span class="n">loadMyModuleResource</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p><span id="The_Init.py_file"></span>
</p>
<h3><span class="mw-headline" id="Le_fichier_Init.py">Le fichier Init.py</span></h3>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="sd">"""FreeCAD init script of XXX module"""</span>

<span class="c1"># ***************************************************************************</span>
<span class="c1"># *   Copyright (c) 2015 John Doe john@doe.com                              *   </span>
<span class="c1"># *                                                                         *</span>
<span class="c1"># *   This file is part of the FreeCAD CAx development system.              *</span>
<span class="c1"># *                                                                         *</span>
<span class="c1"># *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="c1"># *   it under the terms of the GNU Lesser General Public License (LGPL)    *</span>
<span class="c1"># *   as published by the Free Software Foundation; either version 2 of     *</span>
<span class="c1"># *   the License, or (at your option) any later version.                   *</span>
<span class="c1"># *   for detail see the LICENSE text file.                                 *</span>
<span class="c1"># *                                                                         *</span>
<span class="c1"># *   FreeCAD is distributed in the hope that it will be useful,            *</span>
<span class="c1"># *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<span class="c1"># *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
<span class="c1"># *   GNU Lesser General Public License for more details.                   *</span>
<span class="c1"># *                                                                         *</span>
<span class="c1"># *   You should have received a copy of the GNU Library General Public     *</span>
<span class="c1"># *   License along with FreeCAD; if not, write to the Free Software        *</span>
<span class="c1"># *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  *</span>
<span class="c1"># *   USA                                                                   *</span>
<span class="c1"># *                                                                         *</span>
<span class="c1"># ***************************************************************************/</span>

<span class="n">FreeCAD</span><span class="o">.</span><span class="n">addImportType</span><span class="p">(</span><span class="s2">"My own format (*.own)"</span><span class="p">,</span> <span class="s2">"importOwn"</span><span class="p">)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">addExportType</span><span class="p">(</span><span class="s2">"My own format (*.own)"</span><span class="p">,</span> <span class="s2">"exportOwn"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"I am executing some stuff here when FreeCAD starts!"</span><span class="p">)</span>
</pre></div>
<p>Vous pouvez choisir la licence de votre choix pour votre atelier, mais sachez que si vous souhaitez que votre atelier soit int&eacute;gr&eacute; et distribu&eacute; avec le code source de FreeCAD &agrave; un moment donn&eacute;, il doit &ecirc;tre LGPL2+, comme dans l'exemple ci-dessus. Voir <a href="../fr/License.html" title="License/fr">Licence</a>.
</p><p>Les fonctions <code>FreeCAD.addImportType()</code> et <code>addEXportType()</code> vous permettent de fournir le nom et l'extension d'un type de fichier, ainsi qu'un module Python responsable de son importation. Dans l'exemple ci-dessus, un module <code>importOwn.py</code> g&eacute;rera les fichiers <code>.own</code>. Voir <a href="../fr/Code_snippets.html" title="Code snippets/fr">Extraits de codes</a> pour plus d'exemples.
</p><p><span id="Python_workbenches"></span>
</p>
<h3><span class="mw-headline" id="Ateliers_en_Python">Ateliers en Python</span></h3>
<p>Ceci est le fichier InitGui.py&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">MyWorkbench</span> <span class="p">(</span><span class="n">Workbench</span><span class="p">):</span>

    <span class="n">MenuText</span> <span class="o">=</span> <span class="s2">"My Workbench"</span>
    <span class="n">ToolTip</span> <span class="o">=</span> <span class="s2">"A description of my workbench"</span>
    <span class="n">Icon</span> <span class="o">=</span> <span class="s2">"""paste here the contents of a 16x16 xpm icon"""</span>

    <span class="k">def</span> <span class="nf">Initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""This function is executed when the workbench is first activated.</span>
<span class="sd">        It is executed once in a FreeCAD session followed by the Activated function.</span>
<span class="sd">        """</span>
        <span class="kn">import</span> <span class="nn">MyModuleA</span><span class="o">,</span> <span class="nn">MyModuleB</span> <span class="c1"># import here all the needed files that create your FreeCAD commands</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"MyCommand1"</span><span class="p">,</span> <span class="s2">"MyCommand2"</span><span class="p">]</span> <span class="c1"># a list of command names created in the line above</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="s2">"My Commands"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="c1"># creates a new toolbar with your commands</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">(</span><span class="s2">"My New Menu"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="c1"># creates a new menu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendMenu</span><span class="p">([</span><span class="s2">"An existing Menu"</span><span class="p">,</span> <span class="s2">"My submenu"</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="c1"># appends a submenu to an existing menu</span>

    <span class="k">def</span> <span class="nf">Activated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""This function is executed whenever the workbench is activated"""</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">Deactivated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""This function is executed whenever the workbench is deactivated"""</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">ContextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipient</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""This function is executed whenever the user right-clicks on screen"""</span>
        <span class="c1"># "recipient" will be either "view" or "tree"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendContextMenu</span><span class="p">(</span><span class="s2">"My commands"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list</span><span class="p">)</span> <span class="c1"># add commands to the context menu</span>

    <span class="k">def</span> <span class="nf">GetClassName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="c1"># This function is mandatory if this is a full Python workbench</span>
        <span class="c1"># This is not a template, the returned string should be exactly "Gui::PythonWorkbench"</span>
        <span class="k">return</span> <span class="s2">"Gui::PythonWorkbench"</span>
       
<span class="n">Gui</span><span class="o">.</span><span class="n">addWorkbench</span><span class="p">(</span><span class="n">MyWorkbench</span><span class="p">())</span>
</pre></div>
<p>En dehors de cela, vous pouvez faire ce que vous voulez&nbsp;: vous pouvez ins&eacute;rer tout votre code d'atelier dans le fichier InitGui.py si vous le souhaitez, mais il est g&eacute;n&eacute;ralement plus pratique de placer les diff&eacute;rentes fonctions de votre atelier dans des fichiers s&eacute;par&eacute;s. Ainsi ces fichiers sont plus petits et plus faciles &agrave; lire. Ensuite, vous importerez ces fichiers dans votre fichier InitGui.py. Vous pouvez organiser ces fichiers comme bon vous semble, un bon exemple est en avoir un pour chaque commande FreeCAD que vous ajoutez.
</p><p><span id="Preferences"></span>
</p>
<h4><span id="Pr.C3.A9f.C3.A9rences"></span><span class="mw-headline" id="Pr&eacute;f&eacute;rences">Pr&eacute;f&eacute;rences</span></h4>
<p>Vous pouvez ajouter une page Pr&eacute;f&eacute;rences pour votre atelier Python. Les pages Pr&eacute;f&eacute;rences recherchent une ic&ocirc;ne de pr&eacute;f&eacute;rence avec un nom sp&eacute;cifique dans le syst&egrave;me de ressources Qt. Si votre ic&ocirc;ne ne se trouve pas dans le syst&egrave;me de ressources ou si son nom n'est pas correct, votre ic&ocirc;ne n'appara&icirc;tra pas sur la page Pr&eacute;f&eacute;rences.
</p><p>Ajoutez votre ic&ocirc;ne d'atelier&nbsp;:
</p>
<ul><li>l&rsquo;ic&ocirc;ne des pr&eacute;f&eacute;rences doit &ecirc;tre nomm&eacute;e &laquo;&nbsp;pr&eacute;f&eacute;rences-&nbsp;&raquo; + &laquo;&nbsp;nom du module&nbsp;&raquo; + &laquo;&nbsp;.svg&nbsp;&raquo; (en minuscules)</li>
<li>cr&eacute;ez un fichier qrc contenant les noms de tous les ic&ocirc;nes</li>
<li>dans le r&eacute;pertoire *.py principal, ex&eacute;cutez pyside-rcc -o myResources.py myqrc.qrc</li>
<li>dans InitGui.py, ajoutez importer myResource(.py)</li>
<li>mettez &agrave; jour votre r&eacute;f&eacute;rentiel (git) avec myResources.py et myqrc.qrc</li></ul>
<p>Vous devrez refaire les &eacute;tapes si vous ajoutez/modifiez des ic&ocirc;nes. 
</p><p>@kbwbe a cr&eacute;&eacute; un joli script pour compiler des ressources pour l'atelier A2Plus. Voir ci-dessous. 
</p><p>Ajoutez votre/vos page(s) de pr&eacute;f&eacute;rence&nbsp;:
</p>
<ul><li>Vous devez compiler le plugin Qt Designer qui vous permet d&rsquo;ajouter des param&egrave;tres de pr&eacute;f&eacute;rence avec <a href="../fr/Compile_on_Linux.html#Plugin_Qt_designer" title="Compile on Linux/fr">Qt Designer</a></li>
<li>Cr&eacute;ez un widget vide dans Qt Designer (sans boutons ni quoi que ce soit)</li>
<li>Concevez votre page de pr&eacute;f&eacute;rences, de nombreux param&egrave;tres qui doivent &ecirc;tre enregistr&eacute;s (pr&eacute;f&eacute;rences) doivent &ecirc;tre l&rsquo;un des widgets Gui::Pref* ajout&eacute;s par le plug-in)</li>
<li>Dans ces cas-l&agrave;, veillez &agrave; renseigner PrefName (le nom de votre valeur de pr&eacute;f&eacute;rence) et PrefPath (ex: Mod/MyWorkbenchName), qui sauvegardera votre valeur sous BaseApp/Preferences/Mod/MyWorkbenchName</li>
<li>Enregistrez le fichier d'interface utilisateur dans votre atelier, assurez-vous qu'il est g&eacute;r&eacute; par cmake.</li>
<li>Dans votre atelier, par exemple dans le fichier InitGui, dans la m&eacute;thode Initialize (mais tout autre endroit fonctionne &eacute;galement), ajoutez&nbsp;: FreeCADGui.addPreferencePage (&laquo;&nbsp;/chemin/vers/monFichierUi.ui&nbsp;&raquo;,&laquo;&nbsp;MonGroupe&nbsp;&raquo;), &laquo;&nbsp;MonGroupe&nbsp;&raquo; &eacute;tant l'un des groupes de pr&eacute;f&eacute;rences de la gauche. FreeCAD recherchera automatiquement un fichier &laquo;&nbsp;preferences-mygroup.svg&nbsp;&raquo; dans ses emplacements connus (que vous pouvez &eacute;tendre avec FreeCADGui.addIconPath())</li>
<li>Assurez-vous que la m&eacute;thode addPreferencePage() n&rsquo;est appel&eacute;e qu&rsquo;une fois, sinon votre page de pr&eacute;f&eacute;rence sera ajout&eacute;e plusieurs fois</li></ul>
<h4><span class="mw-headline" id="Distribution">Distribution</span></h4>
<p>Pour distribuer votre atelier Python, vous pouvez soit simplement h&eacute;berger les fichiers dans un endroit quelconque et demander &agrave; vos utilisateurs de les t&eacute;l&eacute;charger et de les placer manuellement dans leur r&eacute;pertoire Mod, ou vous pouvez les h&eacute;berger dans un d&eacute;p&ocirc;t git en ligne (GitHub, GitLab, Framagit et Debian Salsa sont actuellement des emplacements support&eacute;s) et les configurer pour que le <a href="../fr/Std_AddonMgr.html" title="Std AddonMgr/fr">gestionnaire des extensions</a> les installe. Les instructions pour l'inclusion dans la liste officielle des extensionss de FreeCAD peuvent &ecirc;tre trouv&eacute;es sur le <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD-addons/blob/master/README.md">D&eacute;p&ocirc;t GitHub des extensions de FreeCAD</a>. Pour utiliser le gestionnaire des extensions, un <a href="../fr/Package_Metadata.html" title="Package Metadata/fr">fichier de m&eacute;tadonn&eacute;es package.xml</a> doit &ecirc;tre inclus, qui indique au gestionnaire des extensions comment trouver l'ic&ocirc;ne de votre atelier, et permet d'afficher une description, un num&eacute;ro de version, etc. Il peut &eacute;galement &ecirc;tre utilis&eacute; pour sp&eacute;cifier d'autres ateliers ou paquets Python dont votre atelier d&eacute;pend, qui le bloquent ou qu'il est destin&eacute; &agrave; remplacer.
</p><p>Pour un guide rapide sur la fa&ccedil;on de cr&eacute;er un fichier package.xml de base et d'ajouter un atelier au <a href="../fr/Std_AddonMgr.html" title="Std AddonMgr/fr">gestionnaire des extensions</a>, voir&nbsp;: <a href="../fr/Add_Workbench_to_Addon_Manager.html" title="Add Workbench to Addon Manager/fr">Ajouter un atelier au gestionnaire des extensions</a>.
</p><p>En outre, vous pouvez inclure un fichier de m&eacute;tadonn&eacute;es distinct d&eacute;crivant vos d&eacute;pendances Python. Il peut s'agir soit d'un fichier appel&eacute; metadata.txt d&eacute;crivant les d&eacute;pendances externes de votre atelier (soit d'autres addons, ateliers ou modules Python), soit d'un fichier <a rel="nofollow" class="external text" href="https://pip.pypa.io/en/latest/reference/requirements-file-format/">requirements.txt</a> d&eacute;crivant vos d&eacute;pendances Python. Notez que si vous utilisez un fichier requirements.txt, seuls les noms des paquets sp&eacute;cifi&eacute;s sont utilis&eacute;s pour la r&eacute;solution des d&eacute;pendances&nbsp;: les options de la commande pip, les options include et les informations de version ne sont pas prises en charge par le gestionnaire d'addons. Les utilisateurs peuvent ex&eacute;cuter manuellement le fichier d'exigences en utilisant pip si ces fonctionnalit&eacute;s sont requises.
</p><p>Le format du fichier metadata.txt est du texte brut, avec trois lignes optionnelles&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">workbenches</span><span class="o">=</span>
<span class="n">pylibs</span><span class="o">=</span>
<span class="n">optionalpylibs</span><span class="o">=</span>
</pre></div>
<p>Chaque ligne doit consister en une liste d'&eacute;l&eacute;ments, s&eacute;par&eacute;s par des virgules, dont d&eacute;pend votre atelier. Les ateliers peuvent &ecirc;tre soit un atelier FreeCAD interne, par exemple &laquo;&nbsp;FEM&nbsp;&raquo;, soit une extension externe, par exemple &laquo;&nbsp;Curves&nbsp;&raquo;. Les biblioth&egrave;ques Python requises et optionnelles doivent &ecirc;tre sp&eacute;cifi&eacute;es avec leur nom Python canonique, tel que vous l'utiliseriez avec <code>pip install</code>. Par exemple&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">workbenches</span><span class="o">=</span><span class="n">FEM</span><span class="p">,</span><span class="n">Curves</span>
<span class="n">pylibs</span><span class="o">=</span><span class="n">ezdxf</span>
<span class="n">optionalpylibs</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span><span class="n">git</span>
</pre></div>
<p>Vous pouvez &eacute;galement inclure un script qui est ex&eacute;cut&eacute; lorsque votre paquet est d&eacute;sinstall&eacute;. Il s'agit d'un fichier appel&eacute; &laquo;&nbsp;uninstall.py&nbsp;&raquo; situ&eacute; au niveau sup&eacute;rieur de votre extension. Il est ex&eacute;cut&eacute; lorsqu'un utilisateur d&eacute;sinstalle votre extension &agrave; l'aide du gestionnaire des extensions. Utilisez-le pour nettoyer tout ce que votre extension a pu faire sur le syst&egrave;me de l'utilisateur et qui ne devrait pas persister apr&egrave;s la disparition de l'extension (par exemple, suppression des fichiers de cache, etc.).
</p><p>Pour que votre extension soit lue correctement par le gestionnaire des extensions, vous pouvez activer un "mode d&eacute;veloppeur" dans lequel le gestionnaire des extensions examine toutes les extensions disponibles et s'assure que leurs m&eacute;tadonn&eacute;es contiennent les &eacute;l&eacute;ments requis. Pour activer ce mode, s&eacute;lectionnez&nbsp;: <b>&Eacute;dition &rarr; Pr&eacute;f&eacute;rences &rarr; Gestionnaire des extensions &rarr; Options du gestionnaire des extensions &rarr; Activer le mode d&eacute;veloppeur des extensions</b>, voir <a href="../fr/Preferences_Editor.html#Options_du_gestionnaire_d.27Addons" title="Preferences Editor/fr">R&eacute;glage des pr&eacute;f&eacute;rences</a>.
</p><p><span id="C++_workbenches"></span>
</p>
<h3><span id="Ateliers_en_C.2B.2B"></span><span class="mw-headline" id="Ateliers_en_C++">Ateliers en C++</span></h3>
<p>Si vous voulez coder votre atelier en C++, vous souhaiterez probablement coder aussi sa d&eacute;finition elle-m&ecirc;me en C++ (bien que cela ne soit pas n&eacute;cessaire&nbsp;: vous pouvez &eacute;galement coder uniquement les outils en C++, et laisser la d&eacute;finition de de l'atelier en Python). Dans ce cas, le fichier InitGui.py devient tr&egrave;s simple&nbsp;: il peut contenir une seule ligne&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">MyModuleGui</span>
</pre></div>
<p>o&ugrave; MyModule est votre atelier C++ complet, incluant les commandes et la d&eacute;finition de l'atelier.
</p><p>Le codage des ateliers C++ fonctionne de mani&egrave;re assez similaire. Il s'agit d'un fichier Workbench.cpp typique &agrave; inclure dans la partie interface graphique de votre module&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">namespace</span> <span class="n">MyModuleGui</span> <span class="p">{</span>
    <span class="k">class</span> <span class="nc">MyModuleGuiExport</span> <span class="n">Workbench</span> <span class="p">:</span> <span class="n">public</span> <span class="n">Gui</span><span class="p">::</span><span class="n">StdWorkbench</span>
    <span class="p">{</span>
        <span class="n">TYPESYSTEM_HEADER</span><span class="p">();</span>

    <span class="n">public</span><span class="p">:</span>
        <span class="n">Workbench</span><span class="p">();</span>
        <span class="n">virtual</span> <span class="o">~</span><span class="n">Workbench</span><span class="p">();</span>

        <span class="n">virtual</span> <span class="n">void</span> <span class="n">activated</span><span class="p">();</span>
        <span class="n">virtual</span> <span class="n">void</span> <span class="n">deactivated</span><span class="p">();</span>

    <span class="n">protected</span><span class="p">:</span>
        <span class="n">Gui</span><span class="p">::</span><span class="n">ToolBarItem</span><span class="o">*</span> <span class="n">setupToolBars</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
        <span class="n">Gui</span><span class="p">::</span><span class="n">MenuItem</span><span class="o">*</span>    <span class="n">setupMenuBar</span><span class="p">()</span> <span class="n">const</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
<p><span id="Preferences"></span>
</p>
<h4><span id="Pr.C3.A9f.C3.A9rences_2"></span><span class="mw-headline" id="Pr&eacute;f&eacute;rences_2">Pr&eacute;f&eacute;rences</span></h4>
<p>Vous pouvez &eacute;galement ajouter une page de pr&eacute;f&eacute;rences pour les ateliers C++. Les &eacute;tapes sont similaires &agrave; celles de Python.
</p>
<h4><span class="mw-headline" id="Distribution_2">Distribution</span></h4>
<p>Il y a deux options pour distribuer un atelier C++, vous pouvez soit h&eacute;berger vous-m&ecirc;me des versions pr&eacute;compil&eacute;es pour les diff&eacute;rents syst&egrave;mes d'exploitation, soit demander &agrave; ce que votre code soit int&eacute;gr&eacute; au code source de FreeCAD. Comme mentionn&eacute; ci-dessus, cela n&eacute;cessite une licence LGPL2+, et vous devez d'abord pr&eacute;senter votre atelier &agrave; la communaut&eacute; dans le <a rel="nofollow" class="external text" href="https://forum.freecad.org">forum de FreeCAD</a> pour revue.
</p><p><span id="FreeCAD_commands"></span>
</p>
<h2><span class="mw-headline" id="Commandes_FreeCAD">Commandes FreeCAD</span></h2>
<p>Les commandes FreeCAD constituent le bloc de construction de base de l'interface FreeCAD. Ils peuvent appara&icirc;tre sous la forme d'un bouton dans les barres d'outils et d'une entr&eacute;e de menu dans les menus. Mais c'est la m&ecirc;me commande. Une commande est une simple classe Python, qui doit contenir un couple attributs et fonctions pr&eacute;d&eacute;finis, d&eacute;finissant le nom de la commande, son ic&ocirc;ne et l'action &agrave; effectuer lorsque la commande est activ&eacute;e.
</p><p><span id="Python_command_definition"></span>
</p>
<h3><span id="D.C3.A9finition_des_commandes_Python"></span><span class="mw-headline" id="D&eacute;finition_des_commandes_Python">D&eacute;finition des commandes Python</span></h3>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">My_Command_Class</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""My new command"""</span>

    <span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"Pixmap"</span>  <span class="p">:</span> <span class="s2">"My_Command_Icon"</span><span class="p">,</span> <span class="c1"># the name of a svg file available in the resources</span>
                <span class="s2">"Accel"</span>   <span class="p">:</span> <span class="s2">"Shift+S"</span><span class="p">,</span> <span class="c1"># a default shortcut (optional)</span>
                <span class="s2">"MenuText"</span><span class="p">:</span> <span class="s2">"My New Command"</span><span class="p">,</span>
                <span class="s2">"ToolTip"</span> <span class="p">:</span> <span class="s2">"What my new command does"</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">Activated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Do something here"""</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">IsActive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Here you can define if the command must be active or not (greyed) if certain conditions</span>
<span class="sd">        are met or not. This function is optional."""</span>
        <span class="k">return</span> <span class="kc">True</span>

<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s2">"My_Command"</span><span class="p">,</span> <span class="n">My_Command_Class</span><span class="p">())</span>
</pre></div>
<p><span id="C++_command_definition"></span>
</p>
<h3><span id="D.C3.A9finition_des_commandes_en_C.2B.2B"></span><span class="mw-headline" id="D&eacute;finition_des_commandes_en_C++">D&eacute;finition des commandes en C++</span></h3>
<p>De m&ecirc;me, vous pouvez coder vos commandes en C++, typiquement dans un fichier Commands.cpp dans votre module Gui. Ceci est un fichier Commands.cpp typique&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">DEF_STD_CMD_A</span><span class="p">(</span><span class="n">CmdMyCommand</span><span class="p">);</span>

<span class="n">CmdMyCommand</span><span class="p">::</span><span class="n">CmdMyCommand</span><span class="p">()</span>
  <span class="p">:</span><span class="n">Command</span><span class="p">(</span><span class="s2">"My_Command"</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">sAppModule</span>    <span class="o">=</span> <span class="s2">"MyModule"</span><span class="p">;</span>
  <span class="n">sGroup</span>        <span class="o">=</span> <span class="n">QT_TR_NOOP</span><span class="p">(</span><span class="s2">"MyModule"</span><span class="p">);</span>
  <span class="n">sMenuText</span>     <span class="o">=</span> <span class="n">QT_TR_NOOP</span><span class="p">(</span><span class="s2">"Runs my command..."</span><span class="p">);</span>
  <span class="n">sToolTipText</span>  <span class="o">=</span> <span class="n">QT_TR_NOOP</span><span class="p">(</span><span class="s2">"Describes what my command does"</span><span class="p">);</span>
  <span class="n">sWhatsThis</span>    <span class="o">=</span> <span class="n">QT_TR_NOOP</span><span class="p">(</span><span class="s2">"Describes what my command does"</span><span class="p">);</span>
  <span class="n">sStatusTip</span>    <span class="o">=</span> <span class="n">QT_TR_NOOP</span><span class="p">(</span><span class="s2">"Describes what my command does"</span><span class="p">);</span>
  <span class="n">sPixmap</span>       <span class="o">=</span> <span class="s2">"some_svg_icon_from_my_resource"</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">CmdMyCommand</span><span class="p">::</span><span class="n">activated</span><span class="p">(</span><span class="nb">int</span> <span class="n">iMsg</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">openCommand</span><span class="p">(</span><span class="s2">"My Command"</span><span class="p">);</span>
    <span class="n">doCommand</span><span class="p">(</span><span class="n">Doc</span><span class="p">,</span><span class="s2">"print('Hello, world!')"</span><span class="p">);</span>
    <span class="n">commitCommand</span><span class="p">();</span>
    <span class="n">updateActive</span><span class="p">();</span>
<span class="p">}</span>

<span class="nb">bool</span> <span class="n">CmdMyCommand</span><span class="p">::</span><span class="n">isActive</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">getActiveGuiDocument</span><span class="p">()</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
  <span class="k">else</span>
    <span class="k">return</span> <span class="n">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">void</span> <span class="n">CreateMyModuleCommands</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Gui</span><span class="p">::</span><span class="n">CommandManager</span> <span class="o">&amp;</span><span class="n">rcCmdMgr</span> <span class="o">=</span> <span class="n">Gui</span><span class="p">::</span><span class="n">Application</span><span class="p">::</span><span class="n">Instance</span><span class="o">-&gt;</span><span class="n">commandManager</span><span class="p">();</span>
    <span class="n">rcCmdMgr</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="n">new</span> <span class="n">CmdMyCommand</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
<p><span id='"Compiling"_your_resource_file'></span>
</p>
<h2><span id=".C2.AB_Compiler_.C2.BB_votre_fichier_ressources"></span><span class="mw-headline" id="&laquo;_Compiler_&raquo;_votre_fichier_ressources">&laquo;&nbsp;Compiler&nbsp;&raquo; votre fichier ressources</span></h2>
<p>compileA2pResources.py depuis l'atelier A2Plus&nbsp;:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#***************************************************************************</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#*   Copyright (c) 2019 kbwbe                                              *</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#*   Portions of code based on hamish's assembly 2                         *</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#*   This program is free software; you can redistribute it and/or modify  *</span>
<span class="c1">#*   it under the terms of the GNU Lesser General Public License (LGPL)    *</span>
<span class="c1">#*   as published by the Free Software Foundation; either version 2 of     *</span>
<span class="c1">#*   the License, or (at your option) any later version.                   *</span>
<span class="c1">#*   for detail see the LICENSE text file.                                 *</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#*   This program is distributed in the hope that it will be useful,       *</span>
<span class="c1">#*   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<span class="c1">#*   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
<span class="c1">#*   GNU Library General Public License for more details.                  *</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#*   You should have received a copy of the GNU Library General Public     *</span>
<span class="c1">#*   License along with this program; if not, write to the Free Software   *</span>
<span class="c1">#*   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  *</span>
<span class="c1">#*   USA                                                                   *</span>
<span class="c1">#*                                                                         *</span>
<span class="c1">#***************************************************************************</span>

<span class="c1"># This script compiles the A2plus icons for py2 and py3</span>
<span class="c1"># For Linux only</span>
<span class="c1"># Start this file in A2plus main directory</span>
<span class="c1"># Make sure pyside-rcc is installed</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">glob</span>

<span class="n">qrc_filename</span> <span class="o">=</span> <span class="s1">'temp.qrc'</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">)</span>

<span class="n">qrc</span> <span class="o">=</span> <span class="s1">'''&lt;RCC&gt;</span>
<span class="se">\t</span><span class="s1">&lt;qresource prefix="/"&gt;'''</span>
<span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">'./icons/*.svg'</span><span class="p">):</span>
    <span class="n">qrc</span> <span class="o">=</span> <span class="n">qrc</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n\t\t</span><span class="s1">&lt;file&gt;</span><span class="si">%s</span><span class="s1">&lt;/file&gt;'</span> <span class="o">%</span> <span class="n">fn</span>
<span class="n">qrc</span> <span class="o">=</span> <span class="n">qrc</span> <span class="o">+</span> <span class="s1">'''</span><span class="se">\n\t</span><span class="s1">&lt;/qresource&gt;</span>
<span class="s1">&lt;/RCC&gt;'''</span>

<span class="nb">print</span><span class="p">(</span><span class="n">qrc</span><span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">,</span><span class="s1">'w'</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">qrc</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span>
    <span class="s1">'pyside-rcc -o a2p_Resources2.py </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">))</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span>
    <span class="s1">'pyside-rcc -py3 -o a2p_Resources3.py </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">))</span>

<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">qrc_filename</span><span class="p">)</span>
</pre></div>
<p><span id="New_Standard_External_Workbench"></span>
</p>
<h2><span class="mw-headline" id="Nouvel_atelier_externe_standard">Nouvel atelier externe standard</span></h2>
<p>La structure et le contenu des fichiers d'un atelier d&eacute;crits ci-dessus constituent la m&eacute;thode classique pour cr&eacute;er un nouvel atelier. Il est possible d'utiliser une l&eacute;g&egrave;re variante dans la structure des fichiers lors de la cr&eacute;ation d'un nouvel atelier Python. Cette m&eacute;thode alternative est mieux d&eacute;crite comme un <b>atelier avec espace de noms</b>, ouvrant la possibilit&eacute; d'utiliser pip pour installer l'atelier. Les deux structures fonctionnent, il s'agit donc plut&ocirc;t d'une question de pr&eacute;f&eacute;rence lors de la cr&eacute;ation d'un nouvel atelier. Le style et la structure de ces ateliers r&eacute;sident dans un espace de noms d&eacute;di&eacute;, au lieu d'&ecirc;tre disponibles dans l'espace de noms global de FreeCAD.
</p>
<pre>(Ajouter une explication sur <b>espace de noms d&eacute;di&eacute;</b>)
</pre>
<h3><span class="mw-headline" id="Structure">Structure</span></h3>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>This structure is also based on the /Mod directory (see <a href="#The_workbench_structure">the workbench structure</a> above) but differs in the use of subdirectories:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">/</span><span class="n">Mod</span><span class="o">/</span>
 <span class="o">+--</span> <span class="n">MyWorkbench</span><span class="o">/</span>
     <span class="o">+--</span> <span class="n">freecad</span><span class="o">/</span>
         <span class="o">+--</span> <span class="n">MyWorkbench</span><span class="o">/</span>
             <span class="o">+--</span> <span class="n">__init</span><span class="o">.</span><span class="n">py__</span>
             <span class="o">+--</span> <span class="n">init_gui</span><span class="o">.</span><span class="n">py</span>
             <span class="o">+--</span> <span class="n">resources</span><span class="o">/</span>
                 <span class="o">+--</span> <span class="n">icons</span><span class="o">/</span>
                 <span class="o">+--</span> <span class="n">translations</span><span class="o">/</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h3><span class="mw-headline" id="Starter_Kit">Starter Kit</span></h3>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>A starter kit to create the structure of an external Python workbench is available on GitHub: <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/freecad.workbench_starterkit">FreeCAD Workbench Starter Kit</a>
</p>
</div>
<p><span id="Related"></span>
</p>
<h2><span class="mw-headline" id="En_relation">En relation</span></h2>
<ul><li><a href="../fr/Translating_an_external_workbench.html" title="Translating an external workbench/fr">Traduction et ateliers externes</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?t=47460">Discussion sur le forum&nbsp;: Namespaced Workbenches</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/FreeCAD/freecad.workbench_starterkit">freecad.workbench_starterkit</a></li></ul>
<p><br>
</p>
<div class="docnav">
    <div><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></span></span> <a href="../fr/Localisation.html" title="Localisation/fr">Localisation</a></div>
    <div><a href="../fr/Extra_python_modules.html" title="Extra python modules/fr">Modules Python suppl&eacute;mentaires</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></span></span></div>
    <div><a href="../fr/Online_Help_Toc.html" title="Online Help Toc/fr">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Online_Help_Toc.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="48" data-file-height="48"></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: var(--background-color-neutral-subtle, #fefefe);"><span typeof="mw:File"><a href="../index.php?title=Power_user_hub.png&amp;filetimestamp=20200511213015&amp;.html" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="128" data-file-height="128"></a></span> <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid var(--border-color-base, #aaaaaa); text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: var(--background-color-neutral-subtle, #fefefe);">
<ul><li><b>Scripts FreeCAD&nbsp;:</b> <a href="../fr/Python.html" title="Python/fr">Python</a>, <a href="../fr/Introduction_to_Python.html" title="Introduction to Python/fr">Introduction &agrave; Python</a>, <a href="../fr/Python_scripting_tutorial.html" title="Python scripting tutorial/fr">Tutoriel sur les scripts Python</a>, <a href="../fr/FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/fr">D&eacute;buter avec les scripts</a></li></ul>
<hr>
<ul><li><b>Modules&nbsp;:</b> <a href="../fr/Builtin_modules.html" title="Builtin modules/fr">Modules int&eacute;gr&eacute;s</a>, <a href="../fr/Units.html" title="Units/fr">Unit&eacute;s</a>, <a href="../fr/Quantity.html" title="Quantity/fr">Quantity</a></li>
<li><b>Ateliers&nbsp;:</b> <a class="mw-selflink selflink">Cr&eacute;ation d'atelier</a>, <a href="../fr/Gui_Command.html" title="Gui Command/fr">Commands Gui</a>, <a href="../fr/Command.html" title="Command/fr">Les commandes</a>, <a href="../fr/Installing_more_workbenches.html" title="Installing more workbenches/fr">Installer des ateliers suppl&eacute;mentaires</a></li>
<li><b>Maillages et objets Parts&nbsp;:</b> <a href="../fr/Mesh_Scripting.html" title="Mesh Scripting/fr">Scripts Mesh</a>, <a href="../fr/Topological_data_scripting.html" title="Topological data scripting/fr">Script de donn&eacute;es topologiques</a>, <a href="../fr/Mesh_to_Part.html" title="Mesh to Part/fr">Conversion objet Mesh en Part</a>, <a href="../fr/PythonOCC.html" title="PythonOCC/fr">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Objets param&eacute;triques&nbsp;:</b> <a href="../fr/Scripted_objects.html" title="Scripted objects/fr">Objets cr&eacute;&eacute;s par script</a>, <a href="../fr/Viewprovider.html" title="Viewprovider/fr">Viewproviders</a> <small>(<a href="../fr/Custom_icon_in_tree_view.html" title="Custom icon in tree view/fr">Ic&ocirc;ne personnalis&eacute;e dans l'arborescence</a>)</small></li>
<li><b>Sc&eacute;nographie&nbsp;:</b> <a href="../fr/Scenegraph.html" title="Scenegraph/fr">Graphe de sc&egrave;ne Coin (Inventor)</a>, <a href="../fr/Pivy.html" title="Pivy/fr">Pivy</a></li>
<li><b>Interface graphique&nbsp;:</b> <a href="../fr/Interface_creation.html" title="Interface creation/fr">Cr&eacute;ation d'interface</a>, <a href="../fr/Dialog_creation.html" title="Dialog creation/fr">Cr&eacute;ation d'une boite de dialogue</a> <small>(<a href="../fr/Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets/fr">1</a>, <a href="../fr/Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files/fr">2</a>, <a href="../fr/Dialog_creation_setting_colors.html" title="Dialog creation setting colors/fr">3</a>, <a href="../fr/Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF/fr">4</a>, <a href="../fr/PySide_usage_snippets.html" title="PySide usage snippets/fr">5</a>)</small>, <a href="../fr/PySide.html" title="PySide/fr">PySide</a>, Exemples PySide <a href="../fr/PySide_Beginner_Examples.html" title="PySide Beginner Examples/fr">d&eacute;butant</a>, <a href="../fr/PySide_Intermediate_Examples.html" title="PySide Intermediate Examples/fr">interm&eacute;diaire</a>, <a href="../fr/PySide_Advanced_Examples.html" title="PySide Advanced Examples/fr">exp&eacute;riment&eacute;</a></li>
<li><b>Macros&nbsp;:</b> <a href="../fr/Macros.html" title="Macros/fr">Macros</a>, <a href="../fr/How_to_install_macros.html" title="How to install macros/fr">Comment installer des macros</a></li>
<li><b>Int&eacute;gration&nbsp;:</b> <a href="../fr/Embedding_FreeCAD.html" title="Embedding FreeCAD/fr">Int&eacute;grer FreeCAD</a>, <a href="../fr/Embedding_FreeCADGui.html" title="Embedding FreeCADGui/fr">Int&eacute;gration de FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Autre&nbsp;:</b> <a href="../fr/Expressions.html" title="Expressions/fr">Expressions</a>, <a href="../fr/Code_snippets.html" title="Code snippets/fr">Extraits de codes</a>, <a href="../fr/Line_drawing_function.html" title="Line drawing function/fr">Fonction - tracer une ligne</a>, <a href="../fr/FreeCAD_vector_math_library.html" title="FreeCAD vector math library/fr">Biblioth&egrave;que math&eacute;matique vectorielle de FreeCAD</a> <small>(d&eacute;pr&eacute;ci&eacute;)</small></li></ul>
<hr>
<ul><li><b>Hubs&nbsp;:</b> <a href="../fr/User_hub.html" title="User hub/fr">Hub utilisateurs</a>, <a href="../fr/Power_users_hub.html" title="Power users hub/fr">Hub utilisateurs exp&eacute;riment&eacute;s</a>, <a href="../fr/Developer_hub.html" title="Developer hub/fr">Hub d&eacute;veloppeurs</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20251221101754
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.142 seconds
Real time usage: 0.214 seconds
Preprocessor visited node count: 476/1000000
Post&#8208;expand include size: 10922/2097152 bytes
Template argument size: 13337/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 12/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 32655/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   39.901      1 -total
 22.20%    8.859      1 Template:Powerdocnavi/fr
 14.44%    5.764     12 Template:Code
 10.09%    4.025      1 Template:Navigation_menu_2
  9.00%    3.592      1 Template:VeryImportantMessage
  9.00%    3.590      5 Template:FileName
  8.53%    3.404      2 Template:Docnav/fr
  8.05%    3.211      1 Template:VersionPlus/fr
  7.86%    3.135      1 Template:MenuCommand
  5.96%    2.380     10 Template:Incode
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:69748-0!canonical and timestamp 20251221101753 and revision id 1719182. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>