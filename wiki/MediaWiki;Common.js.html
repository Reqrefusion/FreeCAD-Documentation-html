<link href="site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">MediaWiki:Common.js</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-highlight mw-highlight-lang-javascript mw-content-ltr mw-highlight-lines" dir="ltr"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos" data-line="1"></span></a><span class="c1">// show a hand cursor on expand links</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos" data-line="2"></span></a><span class="nx">$</span><span class="p">(</span><span class="s2">".expand-link"</span><span class="p">).</span><span class="nx">hover</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">"cursor"</span><span class="p">,</span> <span class="s2">"pointer"</span><span class="p">);</span> <span class="p">});</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos" data-line="3"></span></a><span class="c1">// make sublist visible on expand links click</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos" data-line="4"></span></a><span class="nx">$</span><span class="p">(</span><span class="s2">".expand-link"</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">'li'</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">'ul'</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s1">'div'</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s2">"collapsible-list"</span><span class="p">);</span> <span class="p">});</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos" data-line="5"></span></a><span class="c1">// restrict width of images on manual and command pages to fit besides TOC</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos" data-line="6"></span></a><span class="nx">$</span><span class="p">(</span><span class="s2">".manualtoc"</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">"img"</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="s2">"max-width"</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="s2">".manualtoc"</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">width</span><span class="p">()</span><span class="o">-</span><span class="mf">300</span><span class="p">,</span><span class="s2">"height"</span><span class="o">:</span><span class="s2">"auto"</span><span class="p">});</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos" data-line="7"></span></a><span class="nx">$</span><span class="p">(</span><span class="s2">".fcinfobox"</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">"img"</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span><span class="s2">"max-width"</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="s2">".fcinfobox"</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">width</span><span class="p">()</span><span class="o">-</span><span class="mf">300</span><span class="p">,</span><span class="s2">"height"</span><span class="o">:</span><span class="s2">"auto"</span><span class="p">});</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos" data-line="8"></span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos" data-line="9"></span></a><span class="nx">mw</span><span class="p">.</span><span class="nx">loader</span><span class="p">.</span><span class="nx">using</span><span class="p">(</span><span class="s1">'mediawiki.util'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos" data-line="10"></span></a>    <span class="nx">mw</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="s1">'wikipage.content'</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos" data-line="11"></span></a>        <span class="k">if</span> <span class="p">(</span><span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgNamespaceNumber'</span><span class="p">)</span> <span class="o">!==</span> <span class="mf">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos" data-line="12"></span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ca-editgithub'</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos" data-line="13"></span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos" data-line="14"></span></a>        <span class="kd">var</span> <span class="nx">pageName</span> <span class="o">=</span> <span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgPageName'</span><span class="p">);</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos" data-line="15"></span></a>        <span class="k">if</span> <span class="p">(</span><span class="sr">/\/[a-z\-]{2,3}$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">pageName</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos" data-line="16"></span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos" data-line="17"></span></a>        <span class="kd">var</span> <span class="nx">fileName</span>  <span class="o">=</span> <span class="nx">pageName</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/:/g</span><span class="p">,</span> <span class="s1">';'</span><span class="p">);</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos" data-line="18"></span></a>        <span class="kd">var</span> <span class="nx">githubUrl</span> <span class="o">=</span> <span class="s1">'https://github.com/Reqrefusion/FreeCAD-Documentation-Project/blob/main/wiki/'</span> <span class="o">+</span> <span class="nx">fileName</span> <span class="o">+</span> <span class="s1">'.wikitext'</span><span class="p">;</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos" data-line="19"></span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos" data-line="20"></span></a>        <span class="kd">var</span> <span class="nx">after</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ca-edit'</span><span class="p">)</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ca-viewsource'</span><span class="p">);</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos" data-line="21"></span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos" data-line="22"></span></a>        <span class="nx">mw</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">addPortletLink</span><span class="p">(</span><span class="s1">'p-views'</span><span class="p">,</span> <span class="nx">githubUrl</span><span class="p">,</span> <span class="s1">'Edit on GitHub'</span><span class="p">,</span> <span class="s1">'ca-editgithub'</span><span class="p">,</span> <span class="s1">'Edit this page on GitHub'</span><span class="p">);</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos" data-line="23"></span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos" data-line="24"></span></a>        <span class="kd">var</span> <span class="nx">newLink</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'ca-editgithub'</span><span class="p">);</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos" data-line="25"></span></a>        <span class="k">if</span> <span class="p">(</span><span class="nx">after</span> <span class="o">&amp;&amp;</span> <span class="nx">newLink</span><span class="p">)</span> <span class="nx">after</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">newLink</span><span class="p">,</span> <span class="nx">after</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">);</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos" data-line="26"></span></a>    <span class="p">});</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos" data-line="27"></span></a><span class="p">});</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos" data-line="28"></span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos" data-line="29"></span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos" data-line="30"></span></a><span class="nx">mw</span><span class="p">.</span><span class="nx">loader</span><span class="p">.</span><span class="nx">using</span><span class="p">(</span><span class="s1">'mediawiki.util'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos" data-line="31"></span></a>    <span class="nx">mw</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="s1">'wikipage.content'</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos" data-line="32"></span></a>        <span class="k">if</span><span class="p">(</span><span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgNamespaceNumber'</span><span class="p">)</span><span class="o">!==</span><span class="mf">0</span><span class="p">)</span><span class="k">return</span><span class="p">;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos" data-line="33"></span></a>        <span class="kd">var</span> <span class="nx">sub</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'mw-content-subtitle'</span><span class="p">);</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos" data-line="34"></span></a>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">sub</span><span class="o">||</span><span class="nx">sub</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'.mw-pt-translate-header'</span><span class="p">))</span><span class="k">return</span><span class="p">;</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos" data-line="35"></span></a>        <span class="kd">var</span> <span class="nx">groups</span><span class="o">=</span><span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgUserGroups'</span><span class="p">)</span><span class="o">||</span><span class="p">[];</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos" data-line="36"></span></a>        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">groups</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">g</span><span class="p">){</span><span class="k">return</span><span class="p">[</span><span class="s1">'translator'</span><span class="p">,</span><span class="s1">'translationadmin'</span><span class="p">,</span><span class="s1">'sysop'</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span><span class="o">!==-</span><span class="mf">1</span><span class="p">;}))</span><span class="k">return</span><span class="p">;</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos" data-line="37"></span></a>        <span class="kd">var</span> <span class="nx">titlePlus</span><span class="o">=</span><span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgTitle'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /g</span><span class="p">,</span><span class="s1">'+'</span><span class="p">);</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos" data-line="38"></span></a>        <span class="kd">var</span> <span class="nx">pageLang</span><span class="o">=</span><span class="nx">mw</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'wgPageContentLanguage'</span><span class="p">)</span><span class="o">||</span><span class="s1">'en'</span><span class="p">;</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos" data-line="39"></span></a>        <span class="kd">var</span> <span class="nx">href</span><span class="o">=</span><span class="nx">mw</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">getUrl</span><span class="p">(</span><span class="s1">'Special:Translate'</span><span class="p">,{</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos" data-line="40"></span></a>            <span class="nx">group</span><span class="o">:</span><span class="s1">'page-'</span><span class="o">+</span><span class="nx">titlePlus</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos" data-line="41"></span></a>            <span class="nx">action</span><span class="o">:</span><span class="s1">'page'</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos" data-line="42"></span></a>            <span class="nx">filter</span><span class="o">:</span><span class="s1">''</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos" data-line="43"></span></a>            <span class="nx">language</span><span class="o">:</span><span class="nx">pageLang</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos" data-line="44"></span></a>        <span class="p">});</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos" data-line="45"></span></a>        <span class="kd">var</span> <span class="nx">label</span><span class="o">=</span><span class="nx">mw</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s1">'pt-translate'</span><span class="p">).</span><span class="nx">exists</span><span class="p">()</span><span class="o">?</span><span class="nx">mw</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s1">'pt-translate'</span><span class="p">).</span><span class="nx">plain</span><span class="p">()</span><span class="o">:</span><span class="s1">'Translate this page'</span><span class="p">;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos" data-line="46"></span></a>        <span class="kd">var</span> <span class="nx">span</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'span'</span><span class="p">);</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos" data-line="47"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="s1">'mw-pt-translate-header'</span><span class="p">;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos" data-line="48"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="o">=</span><span class="s1">'block'</span><span class="p">;</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos" data-line="49"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">textAlign</span><span class="o">=</span><span class="s1">'center'</span><span class="p">;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos" data-line="50"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">borderBottom</span><span class="o">=</span><span class="s1">'0'</span><span class="p">;</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos" data-line="51"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginBottom</span><span class="o">=</span><span class="s1">'4px'</span><span class="p">;</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos" data-line="52"></span></a>        <span class="kd">var</span> <span class="nx">link</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'a'</span><span class="p">);</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos" data-line="53"></span></a>        <span class="nx">link</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span><span class="nx">href</span><span class="p">;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos" data-line="54"></span></a>        <span class="nx">link</span><span class="p">.</span><span class="nx">textContent</span><span class="o">=</span><span class="nx">label</span><span class="p">;</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos" data-line="55"></span></a>        <span class="nx">span</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos" data-line="56"></span></a>        <span class="nx">sub</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="nx">span</span><span class="p">);</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos" data-line="57"></span></a>    <span class="p">});</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos" data-line="58"></span></a><span class="p">});</span>
</span></pre></div>
<!-- 
NewPP limit report
Cached time: 20250617200004
Cache expiry: 86400
Reduced expiry: false
Complications: [no&#8208;toc&#8208;conversion]
CPU time usage: 0.003 seconds
Real time usage: 0.003 seconds
Preprocessor visited node count: 1/1000000
Post&#8208;expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 1/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
</div><script src="site.js"></script>