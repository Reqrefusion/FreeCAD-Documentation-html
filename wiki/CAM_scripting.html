<link href="site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">CAM scripting</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="de/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--med" title="CAM skripten (40% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="en" dir="ltr">English</span></li>
<li><a href="es/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--stub" title="Gui&oacute;n de trayectoria (19% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="fr/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--complete" title="CAM Script (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="it/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--low" title="Script di Path (32% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="pl/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--complete" title="Skrypty &#347;rodowiska CAM (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="pt-br/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripting (0% translated)" lang="pt-BR" dir="ltr">portugu&ecirc;s do Brasil</a></li>
<li><a href="ro/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--stub" title="Path scripting (15% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="ru/CAM_scripting.html" class="mw-pt-progress mw-pt-progress--stub" title="&#1057;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; &#1089;&#1082;&#1088;&#1080;&#1087;&#1090;&#1086;&#1074; &#1076;&#1083;&#1103; Path (9% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="CAM_Preferences.html" title="CAM Preferences">Preferences</a></div>
    <div style="margin: 4px 0; float: right;"><span class="mw-default-size" typeof="mw:File"><span><img src="File/Freecad.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="CAM_Workbench.html" title="CAM Workbench">CAM</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="File/Workbench_CAM.svg" decoding="async" width="24" height="24"></span></span></div>
</div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Quickstart"><span class="tocnumber">2</span> <span class="toctext">Quickstart</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#The_FreeCAD_Internal_G-code_Format"><span class="tocnumber">3</span> <span class="toctext">The FreeCAD Internal G-code Format</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#G-code_Reference"><span class="tocnumber">3.1</span> <span class="toctext">G-code Reference</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#List_of_currently_supported_G-code_commands"><span class="tocnumber">3.2</span> <span class="toctext">List of currently supported G-code commands</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#The_Command_object"><span class="tocnumber">4</span> <span class="toctext">The Command object</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#The_Path_object"><span class="tocnumber">5</span> <span class="toctext">The Path object</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#The_Path_feature"><span class="tocnumber">6</span> <span class="toctext">The Path feature</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#The_Tool_and_Tooltable_objects"><span class="tocnumber">7</span> <span class="toctext">The Tool and Tooltable objects</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Scripting_&lt;=_0.18"><span class="tocnumber">7.1</span> <span class="toctext">Scripting &lt;= 0.18</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Features"><span class="tocnumber">8</span> <span class="toctext">Features</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#The_Path_Compound_feature"><span class="tocnumber">8.1</span> <span class="toctext">The Path Compound feature</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#The_Path_Project_feature"><span class="tocnumber">8.2</span> <span class="toctext">The Path Project feature</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Getting_Path_from_Shape"><span class="tocnumber">8.3</span> <span class="toctext">Getting Path from Shape</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Python_features"><span class="tocnumber">8.4</span> <span class="toctext">Python features</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Importing_and_exporting_G-code"><span class="tocnumber">9</span> <span class="toctext">Importing and exporting G-code</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Native_format"><span class="tocnumber">9.1</span> <span class="toctext">Native format</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Using_pre-_and_post-processing_scripts"><span class="tocnumber">9.2</span> <span class="toctext">Using pre- and post-processing scripts</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Writing_processing_scripts"><span class="tocnumber">9.3</span> <span class="toctext">Writing processing scripts</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Adding_all_faces_of_a_ShapeString_to_the_BaseFeature's_list_of_a_ProfileFromFaces_operation"><span class="tocnumber">10</span> <span class="toctext">Adding all faces of a ShapeString to the BaseFeature's list of a ProfileFromFaces operation</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Prerequisites"><span class="tocnumber">10.1</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#The_code"><span class="tocnumber">10.2</span> <span class="toctext">The code</span></a></li>
</ul>
</li>
</ul>
</div>
</div>
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>The CAM Workbench offers tools to import, create, manipulate and export <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/G-code">machine toolpaths</a> in FreeCAD. With it, the user is able to import, visualize and modify existing G-code programs, generate toolpaths from 3D shapes, and export these toolpaths to G-code.
</p><p>The CAM Workbench is currently in early development, and does not offer all the advanced functions found in some commercial alternatives. However, the Python scripting interface makes it easy to modify or develop more powerful tools.
</p>
<h2><span class="mw-headline" id="Quickstart">Quickstart</span></h2>
<p>FreeCAD's Path objects are made of a sequence of motion commands. A typical use is this:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1x1"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1y4"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1 x2 y2"</span><span class="p">)</span> <span class="c1"># spaces end newlines are ignored</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">([</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">,</span><span class="n">c3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"mypath"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">p</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">toGCode</span><span class="p">())</span>
</pre></div>
<h2><span class="mw-headline" id="The_FreeCAD_Internal_G-code_Format">The FreeCAD Internal G-code Format</span></h2>
<p>A preliminary concept is important to grasp. Most of the implementation below relies heavily on motion commands that have the same names as G-code commands, but aren't meant to be close to a particular controller's implementation. Names such as 'G0' to represent 'rapid' move or 'G1' were chosen to represent 'feed' move for performance (efficient file saving) and to minimize the work needed to translate to/from other G-code formats. Since the CNC world speaks thousands of G-code dialects, a very simplified subset of it was chosen. You could describe FreeCAD's G-code format as a "machine-agnostic" form of G-code.
</p><p>Inside .FCStd files, Path data is saved directly into that G-code form.
</p><p>All translations to/from dialects to FreeCAD G-code are done through pre- and post- scripts. That means that if you want to work with a machine that uses a specific LinuxCNC, Fanuc, Mitusubishi, or HAAS controller etc, you will have to use (or write if nonexistent) a post processor for that particular controller (see the "Importing and exporting G-code" section below).
</p>
<h3><span class="mw-headline" id="G-code_Reference">G-code Reference</span></h3>
<p>The following rules and guidelines define the G-code subset used internally in FreeCAD:
</p>
<ul><li>G-code data, inside FreeCAD Path objects, is separated into "Commands". A Command is defined by a command name, which must begin with G or M, and (optionally) arguments, which are in the form Letter plus a Float, for example X 0.02 or Y 3.5 or F 300. These are examples of typical G-code commands in FreeCAD:</li></ul>
<pre>G0 X2.5 Y0 (The command name is G0, the arguments are X=2.5 and Y=0)
</pre>
<pre>G1 X30 (The command name is G1, the only argument is X=30)
</pre>
<pre>G90 (The command name is G90, there are no arguments)
</pre>
<ul><li>For the numeric part of a G or M command, both "G1" or "G01" forms are supported.</li>
<li>Only commands starting with G or M are supported at the moment.</li>
<li>Only millimeters are accepted at the moment. G20/G21 are ignored.</li>
<li>Arguments are always sorted alphabetically. This means that if you create a command with "G1 X2 Y4 F300", it will be stored as "G1 F300 X2 Y4"</li>
<li>Arguments cannot be repeated inside a same command. For example, "G1 X1 Y2 X2 Y3" will not work. You will need to split it into two commands, for example: "G1 X1 Y2, G1 X2 Y3"</li>
<li>X, Y, Z, A, B, C arguments are absolute or relative, depending on the current G90/G91 mode. Default (if not specified) is absolute.</li>
<li>I, J, K are always relative to the last point. K can be omitted.</li>
<li>X, Y, or Z (and A, B, C) can be omitted. In this case, the previous X, Y or Z coordinates are maintained.</li>
<li>G-code commands other than the ones listed in the table below are supported, that is, they are saved inside the path data (as long as they comply to the rules above, of course), but they simply won't produce any visible result on screen. For example, you could add a G81 command, it will be stored, but not displayed.</li></ul>
<h3><span class="mw-headline" id="List_of_currently_supported_G-code_commands">List of currently supported G-code commands</span></h3>
<table class="wikitable">
<tbody><tr>
<th>Command
</th>
<th>Description
</th>
<th>Supported Arguments
</th>
<th>Displayed
</th></tr>
<tr>
<td>G0
</td>
<td>rapid move
</td>
<td>X,Y,Z,A,B,C
</td>
<td>Red
</td></tr>
<tr>
<td>G1
</td>
<td>normal move
</td>
<td>X,Y,Z,A,B,C
</td>
<td>Green
</td></tr>
<tr>
<td>G2
</td>
<td>clockwise arc
</td>
<td>X,Y,Z,A,B,C,I,J,K
</td>
<td>Green
</td></tr>
<tr>
<td>G3
</td>
<td>counterclockwise arc
</td>
<td>X,Y,Z,A,B,C,I,J,K
</td>
<td>Green
</td></tr>
<tr>
<td>G81, G82, G83
</td>
<td>drill
</td>
<td>X,Y,Z,R,Q
</td>
<td>Red/Green
</td></tr>
<tr>
<td>G38.2
</td>
<td>Straight probe move (used in probe operation)
</td>
<td>Z,F
</td>
<td>Yellow
</td></tr>
<tr>
<td>G90
</td>
<td>absolute coordinates
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td>G91
</td>
<td>relative coordinates
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<td>(Message)
</td>
<td>comment
</td>
<td>
</td>
<td>
</td></tr></tbody></table>
<h2><span class="mw-headline" id="The_Command_object">The Command object</span></h2>
<p>The Command object represents a G-code command. It has three attributes: Name, Parameters and Placement, and two methods: toGCode() and setFromGCode(). Internally, it contains only a name and a dictionary of parameters. The rest (placement and gcode) is computed to/from this data.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">Command</span>  <span class="p">(</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="s2">"G1"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">(</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">Parameters</span><span class="o">=</span> <span class="p">{</span><span class="s2">"X"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">"Y"</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">(</span> <span class="n">X</span><span class="p">:</span><span class="mi">1</span> <span class="n">Y</span><span class="p">:</span><span class="mi">0</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">Parameters</span>
<span class="p">{</span><span class="s1">'Y'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">'X'</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">Parameters</span><span class="o">=</span> <span class="p">{</span><span class="s2">"X"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">"Y"</span><span class="p">:</span><span class="mf">0.5</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">(</span> <span class="n">X</span><span class="p">:</span><span class="mi">1</span> <span class="n">Y</span><span class="p">:</span><span class="mf">0.5</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">toGCode</span><span class="p">()</span>
<span class="s1">'G1X1Y0.5'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"G2"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span>
<span class="n">Command</span> <span class="n">G2</span> <span class="p">(</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"G1"</span><span class="p">,{</span><span class="s2">"X"</span><span class="p">:</span><span class="mi">34</span><span class="p">,</span><span class="s2">"Y"</span><span class="p">:</span><span class="mf">1.2</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">(</span> <span class="n">X</span><span class="p">:</span><span class="mi">34</span> <span class="n">Y</span><span class="p">:</span><span class="mf">1.2</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span><span class="o">.</span><span class="n">Placement</span>
<span class="n">Placement</span> <span class="p">[</span><span class="n">Pos</span><span class="o">=</span><span class="p">(</span><span class="mi">34</span><span class="p">,</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">Yaw</span><span class="o">-</span><span class="n">Pitch</span><span class="o">-</span><span class="n">Roll</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span><span class="o">.</span><span class="n">toGCode</span><span class="p">()</span>
<span class="s1">'G1X34Y1.2'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span><span class="o">.</span><span class="n">setFromGCode</span><span class="p">(</span><span class="s2">"G1X1Y0"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c3</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">1</span> <span class="n">Y</span><span class="p">:</span><span class="mi">0</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c4</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"G1X4Y5"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c4</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">4</span> <span class="n">Y</span><span class="p">:</span><span class="mi">5</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Placement</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span><span class="o">.</span><span class="n">Base</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span>
<span class="n">Placement</span> <span class="p">[</span><span class="n">Pos</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">Yaw</span><span class="o">-</span><span class="n">Pitch</span><span class="o">-</span><span class="n">Roll</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1"</span><span class="p">,</span><span class="n">p1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">3</span> <span class="n">Y</span><span class="p">:</span><span class="mi">2</span> <span class="n">Z</span><span class="p">:</span><span class="mi">1</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p2</span><span class="o">=</span><span class="n">App</span><span class="o">.</span><span class="n">Placement</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p2</span><span class="o">.</span><span class="n">Base</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">3</span> <span class="n">Y</span><span class="p">:</span><span class="mi">2</span> <span class="n">Z</span><span class="p">:</span><span class="mi">1</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span><span class="o">.</span><span class="n">Placement</span><span class="o">=</span><span class="n">p2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">5</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span><span class="o">.</span><span class="n">x</span>
<span class="mf">5.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span><span class="o">.</span><span class="n">x</span><span class="o">=</span><span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">10</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span><span class="o">.</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c5</span>
<span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">10</span> <span class="n">Y</span><span class="p">:</span><span class="mi">2</span> <span class="p">]</span>
</pre></div>
<h2><span class="mw-headline" id="The_Path_object">The Path object</span></h2>
<p>The Path object holds a list of commands
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c1</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1"</span><span class="p">,{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">"y"</span><span class="p">:</span><span class="mi">0</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c2</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="s2">"g1"</span><span class="p">,{</span><span class="s2">"x"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">"y"</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">([</span><span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span>
<span class="n">Path</span> <span class="p">[</span> <span class="n">size</span><span class="p">:</span><span class="mi">2</span> <span class="n">length</span><span class="p">:</span><span class="mi">3</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">Commands</span>
<span class="p">[</span><span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">1</span> <span class="n">Y</span><span class="p">:</span><span class="mi">0</span> <span class="p">],</span> <span class="n">Command</span> <span class="n">G1</span> <span class="p">[</span> <span class="n">X</span><span class="p">:</span><span class="mi">0</span> <span class="n">Y</span><span class="p">:</span><span class="mi">2</span> <span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">Length</span>
<span class="mf">3.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">addCommands</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
<span class="n">Path</span> <span class="p">[</span> <span class="n">size</span><span class="p">:</span><span class="mi">3</span> <span class="n">length</span><span class="p">:</span><span class="mi">4</span> <span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">toGCode</span><span class="p">()</span>
<span class="s1">'G1X1G1Y2G1X1'</span>

<span class="n">lines</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">G0X-0.5905Y-0.3937S3000M03</span>
<span class="s2">G0Z0.125</span>
<span class="s2">G1Z-0.004F3</span>
<span class="s2">G1X0.9842Y-0.3937F14.17</span>
<span class="s2">G1X0.9842Y0.433</span>
<span class="s2">G1X-0.5905Y0.433</span>
<span class="s2">G1X-0.5905Y-0.3937</span>
<span class="s2">G0Z0.5</span>
<span class="s2">"""</span>

<span class="n">slines</span> <span class="o">=</span> <span class="n">lines</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">slines</span><span class="p">:</span>
    <span class="n">p</span><span class="o">.</span><span class="n">addCommands</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">Command</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>

<span class="n">o</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"mypath"</span><span class="p">)</span>
<span class="n">o</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">p</span>

<span class="c1"># but you can also create a path directly form a piece of G-code.</span>
<span class="c1"># The commands will be created automatically:</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">setFromGCode</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</pre></div>
<p>As a shortcut, a Path object can also be created directly from a full G-code sequence. It will be divided into a sequence of commands automatically.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">"G0 X2 Y2 G1 X0 Y2"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span>
<span class="n">Path</span> <span class="p">[</span> <span class="n">size</span><span class="p">:</span><span class="mi">2</span> <span class="n">length</span><span class="p">:</span><span class="mi">2</span> <span class="p">]</span>
</pre></div>
<h2><span class="mw-headline" id="The_Path_feature">The Path feature</span></h2>
<p>The Path feature is a FreeCAD document object, that holds a path, and represents it in the 3D view.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">pf</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"mypath"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pf</span>
<span class="o">&lt;</span><span class="n">Document</span> <span class="nb">object</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pf</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">p</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pf</span><span class="o">.</span><span class="n">Path</span>
<span class="n">Path</span> <span class="p">[</span> <span class="n">size</span><span class="p">:</span><span class="mi">2</span> <span class="n">length</span><span class="p">:</span><span class="mi">2</span> <span class="p">]</span>
</pre></div>
<p>The Path feature also holds a Placement property. Changing the value of that placement will change the position of the Feature in the 3D view, although the Path information itself won't be modified. The transformation is purely visual. This allows you, for example, to create a Path around a face that has a particular orientation on your model, that is not the same orientation as your cutting material will have on the CNC machine.
</p><p>However, Path Compounds can make use of the Placement of their children (see below).
</p>
<h2><span class="mw-headline" id="The_Tool_and_Tooltable_objects">The Tool and Tooltable objects</span></h2>
<p><b>NOTE:</b> This type of tool usage is depreciated as of the 0.19 official release. In 0.19 the new ToolBit tool system was implemented to supersede this older, Legacy, system. Therefore, coding has changed from what is represented below. Please visit <a href="CAM_Tools.html" title="CAM Tools">CAM Tools</a> page for more information.
</p>
<h3><span id="Scripting_.3C.3D_0.18"></span><span class="mw-headline" id="Scripting_&lt;=_0.18">Scripting &lt;= 0.18</span></h3>
<p>The Tool object contains the definitions of a CNC tool. The Tooltable object contains an ordered list of tools. Tooltables are attached as a property to Path Project features, and can also be edited via the GUI, by double-clicking a project in the tree view, and clicking the "Edit tooltable" button in the task views that opens.
</p><p>From that dialog, tooltables can be imported from FreeCAD's .xml and HeeksCad's .tooltable formats, and exported to FreeCAD's .xml format.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">=</span><span class="n">Path</span><span class="o">.</span><span class="n">Tool</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span>
<span class="n">Tool</span> <span class="n">Default</span> <span class="n">tool</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">Name</span> <span class="o">=</span> <span class="s2">"12.7mm Drill Bit"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span>
<span class="n">Tool</span> <span class="mf">12.7</span><span class="n">mm</span> <span class="n">Drill</span> <span class="n">Bit</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">ToolType</span>
<span class="s1">'Undefined'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">ToolType</span> <span class="o">=</span> <span class="s2">"Drill"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">Diameter</span><span class="o">=</span> <span class="mf">12.7</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">LengthOffset</span> <span class="o">=</span> <span class="mi">127</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">CuttingEdgeAngle</span> <span class="o">=</span> <span class="mi">59</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span><span class="o">.</span><span class="n">CuttingEdgeHeight</span> <span class="o">=</span> <span class="mf">50.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Tool</span><span class="p">(</span><span class="s2">"my other tool"</span><span class="p">,</span><span class="n">tooltype</span><span class="o">=</span><span class="s2">"EndMill"</span><span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span>
<span class="n">Tool</span> <span class="n">my</span> <span class="n">other</span> <span class="n">tool</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span><span class="o">.</span><span class="n">Diameter</span>
<span class="mf">10.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Tooltable</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span>
<span class="n">Tooltable</span> <span class="n">containing</span> <span class="mi">0</span> <span class="n">tools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">addTools</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
<span class="n">Tooltable</span> <span class="n">containing</span> <span class="mi">1</span> <span class="n">tools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">addTools</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
<span class="n">Tooltable</span> <span class="n">containing</span> <span class="mi">2</span> <span class="n">tools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">table</span><span class="o">.</span><span class="n">Tools</span>
<span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="n">Tool</span> <span class="mf">12.7</span><span class="n">mm</span> <span class="n">Drill</span> <span class="n">Bit</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Tool</span> <span class="n">my</span> <span class="n">other</span> <span class="n">tool</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
<h2><span class="mw-headline" id="Features">Features</span></h2>
<h3><span class="mw-headline" id="The_Path_Compound_feature">The Path Compound feature</span></h3>
<p>The aim of this feature is to gather one or more toolpaths and associate it (them) with a tooltable. The Compound feature also behaves like a standard FreeCAD group, so you can add or remove objects to/from it directly from the tree view. You can also reorder items by double-clicking the Compound object in the Tree view, and reorder its elements in the Task view that opens.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">"G1X1"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"path1"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">Path</span><span class="o">=</span><span class="n">p1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s2">"G1Y1"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o2</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"path2"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o2</span><span class="o">.</span><span class="n">Path</span><span class="o">=</span><span class="n">p2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o3</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::FeatureCompound"</span><span class="p">,</span><span class="s2">"compound"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o3</span><span class="o">.</span><span class="n">Group</span><span class="o">=</span><span class="p">[</span><span class="n">o1</span><span class="p">,</span><span class="n">o2</span><span class="p">]</span>
</pre></div>
<p>An important feature of Path Compounds is the possibility to take into account the Placement of their child paths or not, by setting their UsePlacements property to True or False. If not, the Path data of their children will simply be added sequentially. If True, each command of the child paths, if containing position information (G0, G1, etc..) will first be transformed by the Placement before being added.
</p><p>Creating a compound with just one child path allows you therefore to turn the child path's Placement "real" (it affects the Path data).
</p>
<h3><span class="mw-headline" id="The_Path_Project_feature">The Path Project feature</span></h3>
<p>The Path project is an extended kind of Compound, that has a couple of additional machine-related properties such as a tooltable. It is made mainly to be the main object type you'll want to export to G-code once your whole path setup is ready. The Project object is now coded in Python, so its creation mechanism is a bit different:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">PathScripts</span> <span class="kn">import</span> <span class="n">PathProject</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o4</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::FeatureCompoundPython"</span><span class="p">,</span><span class="s2">"prj"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">PathProject</span><span class="o">.</span><span class="n">ObjectPathProject</span><span class="p">(</span><span class="n">o4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o4</span><span class="o">.</span><span class="n">Group</span> <span class="o">=</span> <span class="p">[</span><span class="n">o3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o4</span><span class="o">.</span><span class="n">Tooltable</span>
<span class="n">Tooltable</span> <span class="n">containing</span> <span class="mi">0</span> <span class="n">tools</span>
</pre></div>
<p>The Path module also features a GUI tooltable editor that can be called from Python, giving it an object that has a ToolTable property:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">PathScripts</span> <span class="kn">import</span> <span class="n">TooltableEditor</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">TooltableEditor</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">o4</span><span class="p">)</span>
</pre></div>
<h3><span class="mw-headline" id="Getting_Path_from_Shape">Getting Path from Shape</span></h3>
<p>Assign the shape of wire Part to a normal Path object, using Path.fromShape() script function (or more powerful Path.fromShapes()). By giving as parameter a wire Part object, its path will be automatically calculated from the shape. Note that in this case the placement is automatically set to the first point of the wire, and the object is therefore not movable anymore by changing its placement. To move it, the underlying shape itself must be moved.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Part</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">wire</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makePolygon</span><span class="p">([</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v4</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"myPath2"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">fromShape</span><span class="p">(</span><span class="n">wire</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span>  <span class="n">o</span><span class="o">.</span><span class="n">Path</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">toGCode</span><span class="p">())</span>
</pre></div>
<h3><span class="mw-headline" id="Python_features">Python features</span></h3>
<p>Both Path::Feature and Path::FeatureShape features have a Python version, respectively named Path::FeaturePython and Path::FeatureShapePython, that can be used in Python code to create more advanced parametric objects derived from them.
</p>
<h2><span class="mw-headline" id="Importing_and_exporting_G-code">Importing and exporting G-code</span></h2>
<h3><span class="mw-headline" id="Native_format">Native format</span></h3>
<p>G-code files can be directly imported and exported via the GUI, by using the "open", "insert" or "export" menu items. After the file name is acquired, a dialog pops up to ask which processing script must be used. It can also be done from Python:
</p><p>Path information is stored into Path objects using a subset of G-code described in the "FreeCAD's internal G-code format"section above. This subset can be imported or exported "as is", or converted to/from a particular version of G-code suited for your machine.
</p><p>If you have a very simple and standard G-code program, that complies to the rules described in the "FreeCAD's internal G-code format" section above, for example the boomerang from <a rel="nofollow" class="external text" href="https://www.cnccookbook.com/g-code-examples-files/">cnccookbook</a>, it can be imported directly into a Path object, without translation (this is equivalent to using the "None" option of the GUI dialog):
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">Path</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"/path/to/boomerangv4.ncc"</span><span class="p">)</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"boomerang"</span><span class="p">)</span>
<span class="n">o</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">p</span>
</pre></div>
<p>In the same manner, you can obtain the path information as "agnostic" G-code, and store it manually in a file:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">toGCode</span><span class="p">()</span>
<span class="nb">print</span> <span class="n">text</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"/path/to/newfile.ngc"</span><span class="p">)</span>
<span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">myfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
<p>If you need a different output, though, you will need to convert this agnostic G-code into a format suited for your machine. That is the job of post-processing scripts.
</p>
<h3><span class="mw-headline" id="Using_pre-_and_post-processing_scripts">Using pre- and post-processing scripts</span></h3>
<p>If you have a G-code file written for a particular machine, which doesn't comply to the internal rules used by FreeCAD, described in the "FreeCAD's internal G-code format" section above, it might fail to import and/or render properly in the 3D view. To remedy to this, you must use a pre-processing script, which will convert from your machine-specific format to the FreeCAD format.
</p><p>If you know the name of the pre-processing script to use, you can import your file using it, from the Python console like this:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">example_pre</span>
<span class="n">example_pre</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">"/path/to/myfile.ncc"</span><span class="p">,</span><span class="s2">"DocumentName"</span><span class="p">)</span>
</pre></div>
<p>In the same manner, you can output a Path object to G-code, using a post_processor script like this:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">example_post</span>
<span class="n">example_post</span><span class="o">.</span><span class="n">export</span> <span class="p">(</span><span class="n">myObjectName</span><span class="p">,</span><span class="s2">"/path/to/outputFile.ncc"</span><span class="p">)</span>
</pre></div>
<h3><span class="mw-headline" id="Writing_processing_scripts">Writing processing scripts</span></h3>
<p>Pre- and post-processing scripts behave like other common FreeCAD imports/exporters. When choosing a pre/post processing script from the dialog, the import/export process will be redirected to the specified given script.  Preprocessing scripts must contain at least the following methods open(filename) and insert(filename,docname).  Postprocessing scripts need to implement export(objectslist,filename).
</p><p>Scripts are placed into either the Mod/Path/Path/Post/scripts folder or the user's macro path directory.  You can give them any name you like but by convention, and to be picked by the GUI dialog, pre-processing scripts names must end with "_pre", post-processing scripts with "_post" (make sure to use the underscore, not the hyphen, otherwise Python cannot import it). This is an example of a very, very simple preprocessor. More complex examples are found in the Mod/Path/Path/Post/scripts folder:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">gfile</span> <span class="o">=</span> <span class="n">__builtins__</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">inputstring</span> <span class="o">=</span> <span class="n">gfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="c1"># the whole gcode program will come in as one string,</span>
    <span class="c1"># for example: "G0 X1 Y1\nG1 X2 Y2"</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s2">""</span>
    <span class="c1"># we add a comment</span>
    <span class="n">output</span> <span class="o">+=</span> <span class="s2">"(This is my first parsed output!)</span><span class="se">\n</span><span class="s2">"</span>
    <span class="c1"># we split the input string by lines</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">inputstring</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="n">line</span>
        <span class="c1"># we must insert the "end of line" character again</span>
        <span class="c1"># because the split removed it</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span>
    <span class="c1"># another comment</span>
    <span class="n">output</span> <span class="o">+=</span> <span class="s2">"(End of program)"</span>
    <span class="kn">import</span> <span class="nn">Path</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="n">myPath</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Path::Feature"</span><span class="p">,</span><span class="s2">"Import"</span><span class="p">)</span>
    <span class="n">myPath</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="n">p</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p>Pre- and post-processors work exactly the same way. They just do the contrary: The pre scripts convert from specific G-code to FreeCAD's "agnostic" G-code, while post scripts convert from FreeCAD's "agnostic" G-code to machine-specific G-code.
</p>
<h2><span id="Adding_all_faces_of_a_ShapeString_to_the_BaseFeature.27s_list_of_a_ProfileFromFaces_operation"></span><span class="mw-headline" id="Adding_all_faces_of_a_ShapeString_to_the_BaseFeature's_list_of_a_ProfileFromFaces_operation">Adding all faces of a ShapeString to the BaseFeature's list of a ProfileFromFaces operation</span></h2>
<p>This example is based on a <a rel="nofollow" class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=13&amp;t=33310&amp;p=279991#p279959">discussion in the german forum</a>.
</p>
<h3><span class="mw-headline" id="Prerequisites">Prerequisites</span></h3>
<ul><li>Create a solid with ShapeString as Cutout</li>
<li>Create a Job using this solid as its BaseObject</li>
<li>Create a ProfileFromFaces operation named "Profile_Faces" with empty BaseGeometry.</li></ul>
<h3><span class="mw-headline" id="The_code">The code</span></h3>
<p>The following code will then add all faces from ShapeString and create the paths:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">doc</span> <span class="o">=</span> <span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span>
<span class="n">list_of_all_element_faces</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">face</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">ShapeString</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">Faces</span><span class="p">):</span>
    <span class="n">list_of_all_element_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'Face'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">doc</span><span class="o">.</span><span class="n">Profile_Faces</span><span class="o">.</span><span class="n">Base</span> <span class="o">=</span> <span class="p">[(</span><span class="n">doc</span><span class="o">.</span><span class="n">ShapeString</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">list_of_all_element_faces</span><span class="p">))]</span>
<span class="n">doc</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<p><br>
</p>
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="CAM_Preferences.html" title="CAM Preferences">Preferences</a></div>
    <div style="margin: 4px 0; float: right;"><span class="mw-default-size" typeof="mw:File"><span><img src="File/Freecad.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="CAM_Workbench.html" title="CAM Workbench">CAM</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="File/Workbench_CAM.svg" decoding="async" width="24" height="24"></span></span></div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="File/Workbench_CAM.svg" class="mw-file-description"><img src="File/Workbench_CAM.svg" decoding="async" width="24" height="24"></a></span> <a href="CAM_Workbench.html" title="CAM Workbench">CAM</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>Project Commands:</b> <a href="CAM_Job.html" title="CAM Job">Job</a>, <a href="CAM_Post.html" title="CAM Post">Post Process</a>, <a href="CAM_Sanity.html" title="CAM Sanity">Check the CAM job for common errors</a>, <a href="CAM_ExportTemplate.html" title="CAM ExportTemplate">Export Template</a></li></ul>
<hr>
<ul><li><b>Tool Commands:</b> <a href="CAM_Inspect.html" title="CAM Inspect">Inspect CAM Commands</a>, <a href="CAM_Simulator.html" title="CAM Simulator">CAM Simulator</a>, <a href="CAM_SelectLoop.html" title="CAM SelectLoop">Finish Selecting Loop</a>, <a href="CAM_OpActiveToggle.html" title="CAM OpActiveToggle">Toggle the Active State of the Operation</a>, <a href="CAM_ToolBitLibraryOpen.html" title="CAM ToolBitLibraryOpen">ToolBit Library editor</a>, <a href="CAM_ToolBitDock.html" title="CAM ToolBitDock">ToolBit Dock</a></li></ul>
<hr>
<ul><li><b>Basic Operations:</b> <a href="CAM_Profile.html" title="CAM Profile">Profile</a>, <a href="CAM_Pocket_Shape.html" title="CAM Pocket Shape">Pocket Shape</a>, <a href="CAM_Drilling.html" title="CAM Drilling">Drilling</a>, <a href="CAM_MillFace.html" title="CAM MillFace">Face</a>, <a href="CAM_Helix.html" title="CAM Helix">Helix</a>, <a href="CAM_Adaptive.html" title="CAM Adaptive">Adaptive</a>, <a href="CAM_Slot.html" title="CAM Slot">Slot</a>, <a href="CAM_Engrave.html" title="CAM Engrave">Engrave</a>, <a href="CAM_Deburr.html" title="CAM Deburr">Deburr</a>, <a href="CAM_Vcarve.html" title="CAM Vcarve">Vcarve</a></li></ul>
<hr>
<ul><li><b>3D Operations:</b> <a href="CAM_Pocket_3D.html" title="CAM Pocket 3D">3D Pocket</a>, <a href="CAM_Surface.html" title="CAM Surface">3D Surface</a>, <a href="CAM_Waterline.html" title="CAM Waterline">Waterline</a></li></ul>
<hr>
<ul><li><b>CAM Dressup:</b> <a href="CAM_DressupAxisMap.html" title="CAM DressupAxisMap">Axis Map</a>, <a href="CAM_DressupPathBoundary.html" title="CAM DressupPathBoundary">Boundary</a>, <a href="CAM_DressupDogbone.html" title="CAM DressupDogbone">Dogbone</a>, <a href="CAM_DressupDragKnife.html" title="CAM DressupDragKnife">DragKnife</a>, <a href="CAM_DressupLeadInOut.html" title="CAM DressupLeadInOut">LeadInOut</a>, <a href="CAM_DressupRampEntry.html" title="CAM DressupRampEntry">RampEntry</a>, <a href="CAM_DressupTag.html" title="CAM DressupTag">Tag</a>, <a href="CAM_DressupZCorrect.html" title="CAM DressupZCorrect">Z Depth Correction</a></li></ul>
<hr>
<ul><li><b>Supplemental Commands:</b> <a href="CAM_Fixture.html" title="CAM Fixture">Fixture</a>, <a href="CAM_Comment.html" title="CAM Comment">Comment</a>, <a href="CAM_Stop.html" title="CAM Stop">Stop</a>, <a href="CAM_Custom.html" title="CAM Custom">Custom</a>, <a href="CAM_Probe.html" title="CAM Probe">Probe</a>, <a href="CAM_Shape.html" title="CAM Shape">From Shape</a></li></ul>
<hr>
<ul><li><b>CAM Modification:</b> <a href="CAM_Copy.html" title="CAM Copy">Copy the operation in the job</a>, <a href="CAM_Array.html" title="CAM Array">Array</a>, <a href="CAM_SimpleCopy.html" title="CAM SimpleCopy">Simple Copy</a></li></ul>
<hr>
<ul><li><b>Specialty Operations:</b> <a href="CAM_ThreadMilling.html" title="CAM ThreadMilling">Thread Milling</a></li></ul>
<hr>
<ul><li><b>Miscellaneous:</b> <a href="CAM_Area.html" title="CAM Area">Area</a>, <a href="CAM_Area_Workplane.html" title="CAM Area Workplane">Area workplane</a></li></ul>
<hr>
<ul><li><b>ToolBit architecture:</b> <a href="CAM_Tools.html" title="CAM Tools">Tools</a>, <a href="CAM_ToolShape.html" title="CAM ToolShape">ToolShape</a>, <a href="CAM_ToolBit.html" title="CAM ToolBit">ToolBit</a>, <a href="CAM_ToolBit_Library.html" title="CAM ToolBit Library">ToolBit Library</a>, <a href="CAM_ToolController.html" title="CAM ToolController">ToolController</a></li></ul>
<hr>
<ul><li><b>Additional:</b> <a href="CAM_Preferences.html" title="CAM Preferences">Preferences</a>,  <a class="mw-selflink selflink">Scripting</a></li></ul></div>
    </div></div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="File/Power_user_hub.png" class="mw-file-description"><img src="File/Power_user_hub.png" decoding="async" width="24" height="24"></a></span> <a href="Power_users_hub.html" title="Power users hub">Power user documentation</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>FreeCAD scripting:</b> <a href="Python.html" title="Python">Python</a>, <a href="Introduction_to_Python.html" title="Introduction to Python">Introduction to Python</a>, <a href="Python_scripting_tutorial.html" title="Python scripting tutorial">Python scripting tutorial</a>, <a href="FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics">FreeCAD Scripting Basics</a></li></ul>
<hr>
<ul><li><b>Modules:</b> <a href="Builtin_modules.html" title="Builtin modules">Builtin modules</a>, <a href="Units.html" title="Units">Units</a>, <a href="Quantity.html" title="Quantity">Quantity</a></li>
<li><b>Workbenches:</b> <a href="Workbench_creation.html" title="Workbench creation">Workbench creation</a>, <a href="Gui_Command.html" title="Gui Command">Gui Commands</a>, <a href="Command.html" title="Command">Commands</a>, <a href="Installing_more_workbenches.html" title="Installing more workbenches">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="Mesh_Scripting.html" title="Mesh Scripting">Mesh Scripting</a>, <a href="Topological_data_scripting.html" title="Topological data scripting">Topological data scripting</a>, <a href="Mesh_to_Part.html" title="Mesh to Part">Mesh to Part</a>, <a href="PythonOCC.html" title="PythonOCC">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Parametric objects:</b> <a href="Scripted_objects.html" title="Scripted objects">Scripted objects</a>, <a href="Viewprovider.html" title="Viewprovider">Viewproviders</a> <small>(<a href="Custom_icon_in_tree_view.html" title="Custom icon in tree view">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="Scenegraph.html" title="Scenegraph">Coin (Inventor) scenegraph</a>, <a href="Pivy.html" title="Pivy">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="Interface_creation.html" title="Interface creation">Interface creation</a>, <a href="Dialog_creation.html" title="Dialog creation">Interface creation completely in Python</a> <small>(<a href="Dialog_creation_with_various_widgets.html" title="Dialog creation with various widgets">1</a>, <a href="Dialog_creation_reading_and_writing_files.html" title="Dialog creation reading and writing files">2</a>, <a href="Dialog_creation_setting_colors.html" title="Dialog creation setting colors">3</a>, <a href="Dialog_creation_image_and_animated_GIF.html" title="Dialog creation image and animated GIF">4</a>, <a href="PySide_usage_snippets.html" title="PySide usage snippets">5</a>)</small>, <a href="PySide.html" title="PySide">PySide</a>, PySide examples <a href="PySide_Beginner_Examples.html" title="PySide Beginner Examples">beginner</a>, <a href="PySide_Intermediate_Examples.html" title="PySide Intermediate Examples">intermediate</a>, <a href="PySide_Advanced_Examples.html" title="PySide Advanced Examples">advanced</a></li>
<li><b>Macros:</b> <a href="Macros.html" title="Macros">Macros</a>, <a href="How_to_install_macros.html" title="How to install macros">How to install macros</a></li>
<li><b>Embedding:</b> <a href="Embedding_FreeCAD.html" title="Embedding FreeCAD">Embedding FreeCAD</a>, <a href="Embedding_FreeCADGui.html" title="Embedding FreeCADGui">Embedding FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Other:</b> <a href="Expressions.html" title="Expressions">Expressions</a>, <a href="Code_snippets.html" title="Code snippets">Code snippets</a>, <a href="Line_drawing_function.html" title="Line drawing function">Line drawing function</a>, <a href="FreeCAD_vector_math_library.html" title="FreeCAD vector math library">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr>
<ul><li><b>Hubs:</b> <a href="User_hub.html" title="User hub">User hub</a>, <a href="Power_users_hub.html" title="Power users hub">Power users hub</a>, <a href="Developer_hub.html" title="Developer hub">Developer hub</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20250123010404
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc, no&#8208;toc&#8208;conversion]
CPU time usage: 0.188 seconds
Real time usage: 2.180 seconds
Preprocessor visited node count: 488/1000000
Post&#8208;expand include size: 13914/2097152 bytes
Template argument size: 9620/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 16/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 41997/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 2022.586      1 -total
 99.41% 2010.704     16 Template:Code
  0.16%    3.189      1 Template:CAM_Tools_navi
  0.12%    2.492      2 Template:Navigation_menu_2
  0.11%    2.131      2 Template:Docnav
  0.08%    1.668      1 Template:Powerdocnavi
  0.04%    0.770      1 Template:TOCright
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:61210-0!canonical and timestamp 20250123010402 and revision id 1535823. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="site.js"></script>