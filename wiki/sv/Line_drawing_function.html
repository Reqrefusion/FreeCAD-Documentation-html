<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Line drawing function/sv</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="sv" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Line+drawing+function&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../id/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--low" title="Line drawing function (3% translated)" lang="id" dir="ltr">Bahasa Indonesia</a></li>
<li><a href="../de/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--complete" title="Linienzeichnungsfunktion (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Line_drawing_function.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Line drawing function (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../tr/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--low" title="Line drawing function (3% translated)" lang="tr" dir="ltr">T&uuml;rk&ccedil;e</a></li>
<li><a href="../es/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--low" title="Line drawing function (12% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="../fr/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--complete" title="Fonction - tracer une ligne (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--med" title="Funzione per disegnare delle linee (38% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--complete" title="Funkcja rysowania linii (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ro/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--med" title="Func&#539;ia de Desenare a liniei (15% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" lang="sv" dir="ltr">svenska</span></li>
<li><a href="../cs/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--low" title="Line drawing function (3% translated)" lang="cs" dir="ltr">&#269;e&scaron;tina</a></li>
<li><a href="../ru/Line_drawing_function.html" class="mw-pt-progress mw-pt-progress--complete" title="&#1060;&#1091;&#1085;&#1082;&#1094;&#1080;&#1103; &#1088;&#1080;&#1089;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1083;&#1080;&#1085;&#1080;&#1080; (100% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><meta property="mw:PageProp/toc"></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
</div>
<div class="mw-translate-fuzzy">
<p>Denna sida visar hur l&auml;tt avancerad funktionalitet kan byggas i Python. I denna &ouml;vning, s&aring; kommer vi att bygga ett nytt verktyg som ritar en linje. Detta verktyg kan sedan l&auml;nkas till ett FreeCAD kommando, och det kommandot kan anropas av ett element i gr&auml;nssnittet, som en menypunkt eller en knapp i en verktygsl&aring;da.
</p>
</div>
<p><span id="The_main_script"></span>
</p>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Huvudskriptet">Huvudskriptet</span></h2>
<p>F&ouml;rst kommer vi att skriva ett skript som inneh&aring;ller all v&aring;r funktionalitet. Sedan kommer vi att spara detta i en fil, och importera den i FreeCAD, s&aring; att alla klasser och funktioner som vi skriver kommer att vara tillg&auml;ngliga f&ouml;r FreeCAD. S&aring;, starta din favorit textredigerare, , och skriv f&ouml;ljande rader:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>First we will write a script containing all our functionality. Then we will save this in a file and import it in FreeCAD to make all its classes and functions available. Launch your favorite code editor and type the following lines:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="kn">from</span> <span class="nn">pivy.coin</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">line</span><span class="p">:</span>

<span class="w">    </span><span class="sd">"""This class will create a line after the user clicked 2 points on the screen"""</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">ActiveView</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">addEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getpoint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_cb</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">event_cb</span><span class="o">.</span><span class="n">getEvent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getState</span><span class="p">()</span> <span class="o">==</span> <span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">DOWN</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">getPosition</span><span class="p">()</span>
            <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">getPoint</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
                <span class="n">Part</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">removeEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>
</pre></div>
<p><a href="#top">Top</a></p>
<p><span id="Detailed_explanation"></span>
</p>
<h2><span id="Detaljerad_f.C3.B6rklaring"></span><span class="mw-headline" id="Detaljerad_f&ouml;rklaring">Detaljerad f&ouml;rklaring</span></h2>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">Part</span><span class="o">,</span> <span class="nn">FreeCADGui</span>
<span class="kn">from</span> <span class="nn">pivy.coin</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>N&auml;r du vill anv&auml;nda funktioner fr&aring;n en annan modul I Python, s&aring; beh&ouml;ver du importera den. I v&aring;rt fall, s&aring; beh&ouml;ver vi funktioner fr&aring;n <a href="../sv/Part_Workbench.html" title="Part Workbench/sv">Del Modulen</a>, f&ouml;r att skapa linjen, och fr&aring;n gr&auml;nssnittsmodulen (FreeCADGui), f&ouml;r att komma &aring;t 3D vyn. Vi beh&ouml;ver &auml;ven inneh&aring;llet i coin biblioteket, s&aring; vi kan anv&auml;nda alla coin objekt som SoMouseButtonEvent, etc...
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">line</span><span class="p">:</span>
</pre></div>
<p>H&auml;r definierar vi v&aring;r huvudklass. Varf&ouml;r anv&auml;nder vi en klass och inte en funktion? Sk&auml;let &auml;r att v&aring;rt verktyg beh&ouml;ver "stanna vid liv" medan vi v&auml;ntar p&aring; att anv&auml;ndaren ska klicka p&aring; sk&auml;rmen. En funktion avslutas n&auml;r dess uppgift &auml;r klar, men ett objekt (en klass definierar ett objekt) stannar vid liv &auml;nda tills den f&ouml;rst&ouml;rs.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="sd">"""This class will create a line after the user clicked 2 points on the screen"""</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>I Python, s&aring; kan varje klass eller funktion ha en beskrivningsstr&auml;ng. Detta &auml;r speciellt anv&auml;ndbart i FreeCAD, d&auml;rf&ouml;r att n&auml;r du anropar den klassen i tolken, s&aring; visas beskrivningsstr&auml;ngen som ett verktygstips.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Python klasser kan alltid inneh&aring;lla en  __init__ funktion, vilken utf&ouml;rs n&auml;r klassen anropas f&ouml;r att skapa ett objekt. S&aring; h&auml;r l&auml;gger vi allt som vi vill ska h&auml;nda n&auml;r v&aring;rt linjeverktyg b&ouml;rjar.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">ActiveView</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>I en klass, s&aring; vill du vanligtvis l&auml;gga till  <i>self.</i> innan ett variabelnamn, s&aring; att den kan kommas &aring;t l&auml;tt f&ouml;r alla funktioner inuti och utanf&ouml;r den klassen. H&auml;r kommer vi att anv&auml;nda self.view f&ouml;r att komma &aring;t och manipulera den aktiva 3D vyn.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>H&auml;r skapar vi en tom lista som kommer att inneh&aring;lla 3D punkterna som s&auml;nds av getpoint funktionen.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">addEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getpoint</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Detta &auml;r den viktiga delen: Eftersom det egentligen &auml;r en <a rel="nofollow" class="external text" href="http://www.coin3d.org/">coin3D</a> scen, s&aring; anv&auml;nder FreeCAD coin's &aring;teranropsmekanism, som till&aring;ter en funktion att anropas varje g&aring;ng en viss scenh&auml;ndelse intr&auml;ffar. I v&aring;rt fall, s&aring; skapar vi ett &aring;teranrop f&ouml;r <a rel="nofollow" class="external text" href="http://doc.coin3d.org/Coin/group__events.html">SoMouseButtonEvent</a> h&auml;ndelser, och vi binder den till getpoint funktionen. Nu, varje g&aring;ng som en musknapp trycks ned eller sl&auml;pps, s&aring; kommer getpoint funktionen att utf&ouml;ras.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Notera att det finns ett alternativ till addEventCallbackPivy() kallat addEventCallback() vilket dispenserar bruket av pivy. Men eftersom pivy &auml;r en mycket effektiv och naturlig v&auml;g att komma &aring;t en del av coin scenen, s&aring; &auml;r det mycket b&auml;ttre att anv&auml;nda den s&aring; mycket du kan!
</p>
</div>
<p><a href="#top">Top</a></p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">getpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_cb</span><span class="p">):</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Nu definierar vi getpoint funktionen, som kommer utf&ouml;ras n&auml;r en musknapp trycks ned i en 3D vy. Denna funktion kommer att ta emot ett argument, som vi kommer kalla event_cb. Fr&aring;n denna h&auml;ndelses &aring;teranrop kan vi komma &aring;t h&auml;ndelseobjektet, vilket inneh&aring;ller flera informationsbitar (l&auml;ge info <a href="../Code_snippets.html#Observing_mouse_events_in_the_3D_viewer_via_Python/sv" title="Code snippets">h&auml;r</a>).
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getState</span><span class="p">()</span> <span class="o">==</span> <span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">DOWN</span><span class="p">:</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Getpoint funktionen kommer att anropas n&auml;r en musknapp trycks ned eller sl&auml;pps. Men vi vill bara v&auml;lja en 3D punkt n&auml;r den trycks ned (annars skulle vi f&aring; tv&aring; 3D punkter mycket n&auml;ra varann). S&aring; vi m&aring;ste kontrollera det h&auml;r.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">getPosition</span><span class="p">()</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>H&auml;r f&aring;r vi musmark&ouml;rens sk&auml;rmkoordinater
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">getPoint</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Denna funktion ger oss en FreeCAD vektor (x,y,z) som inneh&aring;ller den 3D punkt som ligger p&aring; fokalplanet, precis under v&aring;r musmark&ouml;r. om du &auml;r i kameravy, t&auml;nk dig en str&aring;le som kommer fr&aring;n kameran, och passerar genom musmark&ouml;ren, och tr&auml;ffar fokalplanet. D&auml;r &auml;r v&aring;r 3D punkt. On vi &auml;r i ortogonal vy, s&aring; &auml;r str&aring;len parallell med vyriktningen.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Vi l&auml;gger till v&aring;r nya punkt till stacken
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</pre></div>
<p>Har vi tillr&auml;ckligt med punkter? Om ja, l&aring;t oss d&aring; rita linjen!
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>H&auml;r anv&auml;nder vi funktionen Line() fr&aring;n <a href="../sv/Part_Workbench.html" title="Part Workbench/sv">Del Modulen</a> som skapar en linje fr&aring;n tv&aring; FreeCAD vektorer. Allt som vi skapar och &auml;ndrar inuti Del modulen, stannar i Del modulen. S&aring;, tills nu, s&aring; har vi skapat en Linje Del. Den &auml;r inte bunden till n&aring;got objekt i v&aring;rt aktiva dokument, s&aring; inget syns p&aring; sk&auml;rmen.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">shape</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>FreeCAD dokumentet kan bara acceptera former fr&aring;n Del modulen. Former &auml;r Del modulens mest allm&auml;na typ. S&aring; vi beh&ouml;ver konvertera v&aring;r linje till en form innan vi l&auml;gger till den till dokumentet.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Part</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Del modulen har en mycket smidig show() funktion som skapar ett nytt objekt i dokumentet och binder en form till den. Vi skulle ocks&aring; kunna ha skapat ett nytt objekt i dokumentet f&ouml;rst, och sedan ha bundit formen till den manuellt.
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">removeEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Eftersom vi &auml;r klara med v&aring;r linje, l&aring;t oss ta bort v&aring;r &aring;teranropsmekanism, som anv&auml;nder v&auml;rdefulla CPU cykler.
</p>
</div>
<p><a href="#top">Top</a></p>
<p><span id="Testing_the_script"></span>
</p>
<div class="mw-translate-fuzzy">
<h2><span id="Testa_.26_anv.C3.A4nda_skriptet"></span><span class="mw-headline" id="Testa_&amp;_anv&auml;nda_skriptet">Testa &amp; anv&auml;nda skriptet</span></h2>
<p>L&aring;t oss nu spara v&aring;rt skript p&aring; n&aring;gon plats d&auml;r FreeCAD's python tolk kommer att hitta den. N&auml;r moduler importerass, s&aring; kommer tolken att leta p&aring; f&ouml;ljande platser: python's installationss&ouml;kv&auml;g, FreeCAD bin katalogen, och alla FreeCAD modulkataloger. S&aring;, den b&auml;sta l&ouml;sningen &auml;r att skapa en ny katalog i en av FreeCAD's <a href="../sv/Installing_more_workbenches.html" title="Installing more workbenches/sv">Mod kataloger</a>, och spara v&aring;rt skript i den. L&aring;t oss till exempel skapa en "MinaSkript" katalog, och spara v&aring;rt skript som  "ovning.py".
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Now let's save our script in a folder where the FreeCAD Python interpreter can find it. When importing modules, the interpreter will look in the following places: the Python installation paths, the FreeCAD <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">bin</span> folder, and all FreeCAD <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">Mod</span> (module) folders. So the best solution is to create a new folder in one of the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">Mod</span> folders. Let's create a <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">MyScripts</span> folder there and save our script in it as <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">exercise.py</span>.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Nu &auml;r allt klart, l&aring;t oss starta FreeCAD, skapa ett nytt dokument, och i pythontolken skriva:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">exercise</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Om inga felmeddelanden kommer fram, s&aring; inneb&auml;r det att v&aring;rt &ouml;vningsskript har laddats. Vi kan nu kontrollera dess inneh&aring;ll med&nbsp;:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">exercise</span><span class="p">)</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Kommandot dir() &auml;r ett inbyggt python kommando som listar modulens inneh&aring;ll. Vi kan se att v&aring;r line() klass &auml;r d&auml;r, som v&auml;ntar p&aring; oss. L&aring;t oss nu testa den:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="s1">'line'</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">exercise</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Now let's test it:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">exercise</span><span class="o">.</span><span class="n">line</span><span class="p">()</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Klicka sedan p&aring; tv&aring; olika st&auml;llen i 3D vyn, och bingo, d&auml;r &auml;r v&aring;r linje! F&ouml;r att g&ouml;ra det igen, skriv bara ovning.line() igen, och igen, och igen... K&auml;nns det bra?
</p>
</div>
<p><a href="#top">Top</a></p>
<p><span id="Registering_the_script"></span>
</p>
<div class="mw-translate-fuzzy">
<h2><span id="Registrera_skriptet_i_FreeCAD.27s_gr.C3.A4nssnitt"></span><span class="mw-headline" id="Registrera_skriptet_i_FreeCAD's_gr&auml;nssnitt">Registrera skriptet i FreeCAD's gr&auml;nssnitt</span></h2>
<p>F&ouml;r att v&aring;rt nya linjeverktyg ska bli &auml;nnu h&auml;ftigare, s&aring; borde det ha en knapp i gr&auml;nssnittet, s&aring; vi inte beh&ouml;ver skriva allt det varje g&aring;ng. Den l&auml;ttaste v&auml;gen &auml;r att omvandla v&aring;r nya MinaSkript katalog till en full FreeCAD arbetsb&auml;nk. Det &auml;r l&auml;tt, allt som beh&ouml;vs &auml;r att l&auml;gga in en fil som kallas <b>InitGui.py</b> inuti din MinaSkript katalog. InitGui.py kommer att inneh&aring;lla instruktioner f&ouml;r att skapa en ny arbetsb&auml;nk, och addera v&aring;rt nya verktyg till den. F&ouml;rutom det s&aring; beh&ouml;ver vi &auml;ndra v&aring;r &ouml;vningskod lite, s&aring; att line() verktyget igenk&auml;nns som ett officiellt FreeCAD kommando. L&aring;t oss starta genom att g&ouml;ra en InitGui.py fil, och skriva f&ouml;ljande kod i den:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>For our new line tool to be really useful, and to avoid having to type all that stuff, it should have a button in the interface. One way to do this is to transform our new <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">MyScripts</span> folder into a full FreeCAD workbench. This is easy, all that is needed is to put a file called <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">InitGui.py</span> inside the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">MyScripts</span> folder. <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">InitGui.py</span> will contain the instructions to create a new workbench, and add our new tool to it. Besides that we will also need to change our exercise code a bit, so the <code>line()</code> tool is recognized as an official FreeCAD command. Let's start by creating an <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">InitGui.py</span> file, and writing the following code in it:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">MyWorkbench</span> <span class="p">(</span><span class="n">Workbench</span><span class="p">):</span>

    <span class="n">MenuText</span> <span class="o">=</span> <span class="s2">"MyScripts"</span>

    <span class="k">def</span> <span class="nf">Initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">exercise</span>
        <span class="n">commandslist</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"line"</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">appendToolbar</span><span class="p">(</span><span class="s2">"My Scripts"</span><span class="p">,</span> <span class="n">commandslist</span><span class="p">)</span>

<span class="n">Gui</span><span class="o">.</span><span class="n">addWorkbench</span><span class="p">(</span><span class="n">MyWorkbench</span><span class="p">())</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Jag tror att du redan nu f&ouml;rst&aring;r det ovanst&aring;ende skriptet: Vi skapar en ny klass som vi kallar MinArbetsb&auml;nk, vi ger den en titel (MenuText), och vi definierar en Initialize() funktion som kommer att utf&ouml;ras n&auml;r arbetsb&auml;nken laddas till FreeCAD. I den funktionen s&aring; laddar vi inneh&aring;llet i v&aring;r &ouml;vningsfil, och l&auml;gger till de FreeCAD kommandon som hittas i det i en kommandolista. Sedan g&ouml;r vi en verktygsl&aring;da som kallas "Mina Skript" och vi tilldelar v&aring;r kommandolista till den. F&ouml;r n&auml;rvarande har vi f&ouml;rst&aring;s endast ett verktyg, s&aring; v&aring;r kommandolista inneh&aring;ller endast ett element. Sedan, n&auml;r v&aring;r arbetsb&auml;nk &auml;r klar, s&aring; l&auml;gger vi till den till huvudgr&auml;nssnittet.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Men det kommer fortfarande inte att fungera, d&auml;rf&ouml;r att ett FreeCAD kommando m&aring;ste formatteras p&aring; ett visst s&auml;tt f&ouml;r att fungera. s&aring; vi beh&ouml;ver &auml;ndra v&aring;rt line() verktyg lite. V&aring;r nya ovning.py skript kommer nu att se ut s&aring; h&auml;r:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="kn">from</span> <span class="nn">pivy.coin</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">line</span><span class="p">:</span>

<span class="w">    </span><span class="sd">"""This class will create a line after the user clicked 2 points on the screen"""</span>

    <span class="k">def</span> <span class="nf">Activated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">ActiveView</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">addEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getpoint</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_cb</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">event_cb</span><span class="o">.</span><span class="n">getEvent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">getState</span><span class="p">()</span> <span class="o">==</span> <span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">DOWN</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">getPosition</span><span class="p">()</span>
            <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">getPoint</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">LineSegment</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">toShape</span><span class="p">()</span>
                <span class="n">Part</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">removeEventCallbackPivy</span><span class="p">(</span><span class="n">SoMouseButtonEvent</span><span class="o">.</span><span class="n">getClassTypeId</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">GetResources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">'Pixmap'</span><span class="p">:</span> <span class="s1">'path_to_an_icon/line_icon.png'</span><span class="p">,</span> <span class="s1">'MenuText'</span><span class="p">:</span> <span class="s1">'Line'</span><span class="p">,</span> <span class="s1">'ToolTip'</span><span class="p">:</span> <span class="s1">'Creates a line by clicking 2 points on the screen'</span><span class="p">}</span>

<span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span><span class="s1">'line'</span><span class="p">,</span> <span class="n">line</span><span class="p">())</span>
</pre></div>
<div class="mw-translate-fuzzy">
<p>Vad vi gjorde h&auml;r var att omvandla v&aring;r __init__() funktion till en Activated() funktion, d&auml;rf&ouml;r att n&auml;r FreeCAD kommandon k&ouml;rs, s&aring; utf&ouml;r de automatiskt Activated() funktionen. Vi lade ocks&aring; till en GetResources() funktion, som informerar FreeCAD var den kan hitta en ikon f&ouml;r verktyget, och namnet och verktygstipset f&ouml;r v&aring;rt verktyg. en jpg, png eller svg bild kommer att fungera som en ikon, den kan vara av valfri storlek, men det &auml;r b&auml;st att anv&auml;nda en storlek osm &auml;r n&auml;ra den slutliga, som 16x16, 24x24 eller 32x32.
</p><p>Sedan l&auml;gger vi till line() klassen som ett officiellt FreeCAD kommando med addCommand() metoden.
</p>
</div>
<div class="mw-translate-fuzzy">
<p>Klart, nu beh&ouml;ver vi bara starta om FreeCAD och vi kommer att ha en ny snygg arbetsb&auml;nk med v&aring;rt splitternya verktyg!
</p>
</div>
<p><a href="#top">Top</a></p>
<p><span id="So_you_want_more?"></span>
</p>
<h2><span id="S.C3.A5_du_vill_ha_mer.3F"></span><span class="mw-headline" id="S&aring;_du_vill_ha_mer?">S&aring; du vill ha mer?</span></h2>
<p>Om du gillade denna &ouml;vningen, varf&ouml;r inte f&ouml;rs&ouml;ka f&ouml;rb&auml;ttra detta lilla verktyg? Det finns m&aring;nga saker som kan g&ouml;ras, som till exempel:
</p>
<ul><li>L&auml;gga till feedback f&ouml;r anv&auml;ndaren: nu &auml;r det ett mycket 'naket' verktyg, s&aring; anv&auml;ndaren kan bli lite os&auml;ker n&auml;r det anv&auml;nds. S&aring; vi skulle kunna l&auml;gga till lite feedback, tala om vad som ska g&ouml;ras. Du skulle till exempel kunna mata ur meddelanden till FreeCAD konsolen. Ta en titt i FreeCAD.Console modulen</li>
<li>L&auml;gga till en m&ouml;jlighet att skriva in 3D punkterna manuellt. Titta p&aring; python input() funktionen, till exempel</li>
<li>L&auml;gga till m&ouml;jligheten att l&auml;gga till mer &auml;n 2 punkter</li>
<li>L&auml;gga till h&auml;ndelser f&ouml;r andra saker: Nu kontrollerar vi endast musknappsh&auml;ndelser, men om vi ocks&aring; kunde g&ouml;ra n&aring;got n&auml;r musen f&ouml;rflyttas, som att visa koordinater?</li>
<li>Ge ett namn till det skapade objektet</li></ul>
<p>Tveka inte att skriva dina fr&aring;gor eller ideer p&aring; <a rel="nofollow" class="external text" href="http://forum.freecad.org/">forum</a>!
</p>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Don't hesitate to ask questions or share ideas on the <a rel="nofollow" class="external text" href="https://forum.freecad.org">forum</a>!
</p>
</div>
<p><a href="#top">Top</a></p>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: var(--background-color-neutral-subtle, #fefefe);"><span typeof="mw:File"><a href="../index.php?title=Power_user_hub.png&amp;filetimestamp=20200511213015&amp;.html" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="128" data-file-height="128"></a></span> <a href="../sv/Power_users_hub.html" title="Power users hub/sv">Power user documentation</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid var(--border-color-base, #aaaaaa); text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: var(--background-color-neutral-subtle, #fefefe);">
<ul><li><b>FreeCAD scripting:</b> <a href="../index.php?title=Python/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Python/sv (page does not exist)">Python</a>, <a href="../sv/Introduction_to_Python.html" title="Introduction to Python/sv">Introduction to Python</a>, <a href="../index.php?title=Python_scripting_tutorial/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Python scripting tutorial/sv (page does not exist)">Python scripting tutorial</a>, <a href="../sv/FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/sv">FreeCAD Scripting Basics</a></li></ul>
<hr>
<ul><li><b>Modules:</b> <a href="../index.php?title=Builtin_modules/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Builtin modules/sv (page does not exist)">Builtin modules</a>, <a href="../sv/Units.html" title="Units/sv">Units</a>, <a href="../index.php?title=Quantity/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Quantity/sv (page does not exist)">Quantity</a></li>
<li><b>Workbenches:</b> <a href="../index.php?title=Workbench_creation/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Workbench creation/sv (page does not exist)">Workbench creation</a>, <a href="../sv/Gui_Command.html" title="Gui Command/sv">Gui Commands</a>, <a href="../index.php?title=Command/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Command/sv (page does not exist)">Commands</a>, <a href="../sv/Installing_more_workbenches.html" title="Installing more workbenches/sv">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="../sv/Mesh_Scripting.html" title="Mesh Scripting/sv">Mesh Scripting</a>, <a href="../sv/Topological_data_scripting.html" title="Topological data scripting/sv">Topological data scripting</a>, <a href="../sv/Mesh_to_Part.html" title="Mesh to Part/sv">Mesh to Part</a>, <a href="../sv/PythonOCC.html" title="PythonOCC/sv">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Parametric objects:</b> <a href="../sv/Scripted_objects.html" title="Scripted objects/sv">Scripted objects</a>, <a href="../index.php?title=Viewprovider/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Viewprovider/sv (page does not exist)">Viewproviders</a> <small>(<a href="../index.php?title=Custom_icon_in_tree_view/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Custom icon in tree view/sv (page does not exist)">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="../sv/Scenegraph.html" title="Scenegraph/sv">Coin (Inventor) scenegraph</a>, <a href="../sv/Pivy.html" title="Pivy/sv">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="../index.php?title=Interface_creation/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Interface creation/sv (page does not exist)">Interface creation</a>, <a href="../sv/Dialog_creation.html" title="Dialog creation/sv">Interface creation completely in Python</a> <small>(<a href="../index.php?title=Dialog_creation_with_various_widgets/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation with various widgets/sv (page does not exist)">1</a>, <a href="../index.php?title=Dialog_creation_reading_and_writing_files/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation reading and writing files/sv (page does not exist)">2</a>, <a href="../index.php?title=Dialog_creation_setting_colors/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation setting colors/sv (page does not exist)">3</a>, <a href="../index.php?title=Dialog_creation_image_and_animated_GIF/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation image and animated GIF/sv (page does not exist)">4</a>, <a href="../index.php?title=PySide_usage_snippets/sv&amp;action=edit&amp;redlink=1.html" class="new" title="PySide usage snippets/sv (page does not exist)">5</a>)</small>, <a href="../sv/PySide.html" title="PySide/sv">PySide</a>, PySide examples <a href="../index.php?title=PySide_Beginner_Examples/sv&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Beginner Examples/sv (page does not exist)">beginner</a>, <a href="../index.php?title=PySide_Intermediate_Examples/sv&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Intermediate Examples/sv (page does not exist)">intermediate</a>, <a href="../index.php?title=PySide_Advanced_Examples/sv&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Advanced Examples/sv (page does not exist)">advanced</a></li>
<li><b>Macros:</b> <a href="../sv/Macros.html" title="Macros/sv">Macros</a>, <a href="../sv/How_to_install_macros.html" title="How to install macros/sv">How to install macros</a></li>
<li><b>Embedding:</b> <a href="../sv/Embedding_FreeCAD.html" title="Embedding FreeCAD/sv">Embedding FreeCAD</a>, <a href="../sv/Embedding_FreeCADGui.html" title="Embedding FreeCADGui/sv">Embedding FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Other:</b> <a href="../index.php?title=Expressions/sv&amp;action=edit&amp;redlink=1.html" class="new" title="Expressions/sv (page does not exist)">Expressions</a>, <a href="../sv/Code_snippets.html" title="Code snippets/sv">Code snippets</a>, <a class="mw-selflink selflink">Line drawing function</a>, <a href="../sv/FreeCAD_vector_math_library.html" title="FreeCAD vector math library/sv">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr>
<ul><li><b>Hubs:</b> <a href="../sv/User_hub.html" title="User hub/sv">User hub</a>, <a href="../sv/Power_users_hub.html" title="Power users hub/sv">Power users hub</a>, <a href="../sv/Developer_hub.html" title="Developer hub/sv">Developer hub</a></li></ul></div>
    </div></div>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20251009170830
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.121 seconds
Real time usage: 0.717 seconds
Preprocessor visited node count: 559/1000000
Post&#8208;expand include size: 9510/2097152 bytes
Template argument size: 5209/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 24/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 21889/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  598.728      1 -total
 96.00%  574.805     24 Template:Code
  1.74%   10.409      1 Template:Powerdocnavi/sv
  0.57%    3.384      6 Template:Top
  0.50%    2.988      1 Template:Navigation_menu_2
  0.33%    1.992      1 Template:Incode
  0.33%    1.970     10 Template:FileName
  0.23%    1.372      1 Template:Clear
  0.22%    1.298      1 Template:TOCright
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:15846-0!canonical and timestamp 20251009170830 and revision id 1659379. Rendering was triggered because: api-parse
 -->
</div>
</div><script src="../site.js"></script>