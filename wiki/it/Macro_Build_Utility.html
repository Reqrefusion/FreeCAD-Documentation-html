<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Macro Build Utility/it</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="it" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Macro+Build+Utility&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Macro_Build_Utility.html" class="mw-pt-progress mw-pt-progress--med" title="Macro Dienstprogramm Zusammenbau (21% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Macro_Build_Utility.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Macro Build Utility (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../fr/Macro_Build_Utility.html" class="mw-pt-progress mw-pt-progress--med" title="Macro Build Utility (55% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" lang="it" dir="ltr">italiano</span></li>
<li><a href="../pl/Macro_Build_Utility.html" class="mw-pt-progress mw-pt-progress--low" title="Makrodefinicja: Narz&#281;dzie do budowania (3% translated)" lang="pl" dir="ltr">polski</a></li></ul></div>
<table class="fcinfobox wikitable ct" width="100%" style="float: right; width: 230px; margin-left: 10px;">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a href="../index.php?title=Macro_Build_Utility.png&amp;filetimestamp=20240210201103&amp;.html" class="mw-file-description"><img src="../File/Macro_Build_Utility.png" decoding="async" width="32" height="32" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span><span> </span>
Build Utility
</p>
</td></tr>
<tr>
<th class="ctOdd">Descrizione
</th></tr>
<tr>
<td class="ctEven left macro-description">Questa macro fornisce delle utilit&agrave; di costruzione per assemblare pi&ugrave; file di progetto in un unico file.<br><br>Versione macro: 1.0<br>Ultima modifica: 2015-01-21<br>Versione FreeCAD: All<br>Download: <a rel="nofollow" class="external text" href="https://wiki.freecad.org/images/8/87/Macro_Build_Utility.png">ToolBar Icon</a><br>Autore: Piffpoof<br>
</td></tr>
<tr>
<th class="ctOdd">Autore
</th></tr>
<tr>
<td class="ctEven macro-author"><a href="../User;Piffpoof.html" title="User:Piffpoof">Piffpoof</a>
</td></tr>
<tr>
<th class="ctOdd">Download
</th></tr>
<tr>
<td class="ctEven macro-download"><a rel="nofollow" class="external text" href="https://wiki.freecad.org/images/8/87/Macro_Build_Utility.png">ToolBar Icon</a>
</td></tr>
<tr>
<th class="ctOdd">Link
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="../it/Macros_recipes.html" title="Macros recipes/it">Raccolta di macro</a><br><a href="../it/How_to_install_macros.html" title="How to install macros/it">Come installare le macro</a><br><a href="../it/Customize_Toolbars.html" title="Customize Toolbars/it">Personalizzare la  toolbar</a>
</td></tr>
<tr>
<th class="ctOdd">Versione macro
</th></tr>
<tr>
<td class="ctEven macro-version">1.0
</td></tr>
<tr>
<th class="ctOdd">Data ultima modifica
</th></tr>
<tr>
<td class="ctEven macro-date">2015-01-21
</td></tr>
<tr>
<th class="ctOdd">Versioni di FreeCAD
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">All
</td></tr>
<tr>
<th class="ctOdd">Scorciatoia
</th></tr>
<tr>
<td class="ctEven"><i>Nessuna</i>
</td></tr>
<tr>
<th class="ctOdd">Vedere anche
</th></tr>
<tr>
<td class="ctEven"><i>Nessuno</i>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr>
</tbody></table>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Description">Description</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Descrizione">Descrizione</span></h2>
<p>Questa macro &egrave; destinata ad essere utilizzata su grandi progetti, quelli che coinvolgono centinaia di oggetti. &Egrave; inutile e superfluo utilizzarla su un piccolo progetto con un unico file. Su un grande progetto con molti oggetti e molti file da unire in quello finale, fa risparmiare tempo, evita le azioni ripetitive ed elimina gli errori umani.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Installazione">Installazione</span></h2>
<p>Tutto il codice di buildUtility.FCMacro &egrave; contenuto in una macro, quindi per installarla basta copiare il suo codice nella appropriata directory delle Macro. Dopo, si pu&ograve; invocare Build Utility dal menu Macro, dalla console Python o da un pulsante della barra degli strumenti (il metodo preferito).
</p>
<ul><li>per informazioni su come installare il codice delle macro vedere la pagina <a href="../it/How_to_install_macros.html" title="How to install macros/it">Come installare le macro</a></li>
<li>per informazioni su come installarla abbinata a un pulsante in una barra degli strumenti vedere la pagina <a href="../it/Customize_Toolbars.html" title="Customize Toolbars/it">Personalizzare la barra degli strumenti</a></li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Uso">Uso</span></h2>
<p>Build Utility lavora sugli stessi principi dei file di costruzione che vengono utilizzati per assemblare i grandi sistemi software (come FreeCAD). Si utilizza un editor di testo per creare un file di testo che aderisce ai formati richiesti da Build Utility, poi Build Utility legge semplicemente ogni riga del file di testo ed esegue le azioni specificate.
</p>
</div>
<p>La macro chiede all'utente un "build file", poi lo analizza, ci sono 3 tipi di righe lecite:
</p>
<ul><li>le righe che iniziano con il carattere di commento "#" che sono ignorate in quanto sono commenti o osservazioni</li>
<li>le righe che iniziano con il carattere sub-file "@" che sono ignorate<br><b>Nota</b>: il carattere "@" &egrave; per una futura espansione, quando verranno trattati i sub-file</li>
<li>tutte le altre righe che possono essere di un file di progetto o di una sotto-directory</li></ul>
<p>L'estensione per il file Utility Build &egrave; ".FCBld". Questo serve ad evitare che il file sia usato impropriamente da altre applicazioni.
</p><p>Si presume che il file specificato nel file build abbia l'estensione ".FCStd". Se la riga inizia con una directory il file di progetto viene letto da quella sottocartella, in caso contrario, si presume la linea specifichi un file di progetto. Le directory all'interno di directory sono supportate come nidificazione di profondit&agrave; arbitraria. Il formato di specificazione del file &egrave; lo stile "Unix" con diversi livelli separati dal carattere barra "/".
</p><p>Qualsiasi file mancante viene stampato nella Vista Report. Ogni directory mancante &egrave; stampata nella Vista Report.
</p><p>Viene creato un nuovo documento e ogni progetto &egrave; un "Project Merged" posto in tale nuovo documento vuoto. Alla fine il documento non viene salvato, deve farlo l'utente, se lo desidera. Quando il file non esiste, il suo nome viene stampato nella vista report
</p>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="User_Interface">User Interface</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Interfaccia_utente">Interfaccia utente</span></h2>
<p>Per questa macro non c'&egrave; nessun tipo di GUI. La macro legge un file di testo che &egrave; stato preparato con un editor di testo e produce un modello in un documento di output. Basta fare clic sul pulsante nella barra degli strumenti per avviare il processo, non vi &egrave; alcuna interazione da parte dell'utente.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Options">Options</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Opzioni">Opzioni</span></h2>
<p>Non vi &egrave; alcuna interfaccia grafica quindi non ci sono opzioni. Esiste solo l'alternativa di utilizzare uno dei 3 tipi di righe nel file di testo come descritto sopra.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Remarks">Remarks</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Osservazioni">Osservazioni</span></h2>
<p>Per ribadire quanto affermato all'inizio, su un singolo file di un piccolo modello questa macro non &egrave; di alcuna utilit&agrave;. Ma &egrave; molto utile per chi modella aerei, locomotive, navi, edifici, impianti o circuiti complessi. Si &egrave; scelto l'estensione ".FCBld" sperando che all'interno di FreeCAD possa essere impostato questo standard per i file di compilazione . Si spera che il carattere "@" riservato per il prefisso nella definizione dei file di comando possa essere accettato in futuro e (se necessario) nello sviluppo.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Links">Links</span></h2>
</div>
<div class="mw-translate-fuzzy">
<h2><span class="mw-headline" id="Link">Link</span></h2>
<p>nessuno (fino ad ora)
</p>
</div>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>ToolBar Icon <span class="mw-default-size" typeof="mw:File"><a href="../index.php?title=Macro_Build_Utility.png&amp;filetimestamp=20240210201103&amp;.html" class="mw-file-description"><img src="../File/Macro_Build_Utility.png" decoding="async" width="64" height="64" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span>
</p>
</div>
<p><b>Macro_Build_Utility.FCMacro</b>
</p>
<pre>#
#						Build Utility
#                       v 0.0 - build from files and files in sub-folders
#
#***********************************************************************************
# routine to read in a build file and merge all specified projects
"""
This function asks the user for a "build file". It then parses that build file, there
are 3 legal line types:
- lines starting with the comment character "#" which are ignored
- lines starting with the subfile character "@" which are ignored
	Note:	the "@" character is for future enhancement when sub-build files 
			will be handled
- all other lines which may be a project file or a subfolder (sub-directory)
If the line is a subfolder then the project file is read from that subfolder.
Otherwise it is assumed the line specifies a project file.
A new document is created and each project is "Project Merged" into that new and empty document.
The document is not saved at the end, this is left for the user if desired.
If the file does not exist then the file name is Printed to the Report view
"""
"""
Example file:
#this is a sample build file
#==============================
@sub-build-files - not presently inplemented
# first the top-level file
metal
# now some misc files
./black/black
./blue/blue
# file does not exist
zebra 
# folder does not exist
/bear/bear
# multiple files in one sub-folder
./engineering/green
./engineering/grey
#multiple files in hierarchical folders
./externalModules/white
./externalModules/red/red
#./externalModules/red/stackerAssembly - commented out as not currently loading
./externalModules/red/orange
./externalModules/red/level3/yellow
"""
# import statements
import FreeCAD
import os.path
from PySide import QtGui

# UI Class definitions

# Class definitions

# Function definitionss

# Constant definitions
buildTargetDocument = "build_target"
commentTag = "#"
subfileTag = "@"
lineFeed = "\n"
subfolder = "./"
carriageReturn = "\r"
fileSeparator = "/"
fcFileExtension      = ".FCStd"
fcFileExtensionUC  = ".FCSTD"
fcFileExtensionLen = -6

# code ***********************************************************************************
buildFilePathName=QtGui.QFileDialog.getOpenFileName()[0]
if len(buildFilePathName) &gt; 0:
	# set up a new empty "build_target" document
	FreeCAD.newDocument(buildTargetDocument)
	FreeCAD.setActiveDocument(buildTargetDocument)
	FreeCAD.ActiveDocument=FreeCAD.getDocument(buildTargetDocument)
	guiDoc=FreeCADGui.ActiveDocument
	#
	lastFileSeparator = buildFilePathName.rindex(fileSeparator)
	buildFilePath = buildFilePathName[: lastFileSeparator]
	buildFileName = buildFilePathName[lastFileSeparator +1:]
	#
	buildFileContents = open(buildFilePathName,"r")
	buildFileLines = buildFileContents.readlines()
	buildFileContents.close()
	#
	for line in buildFileLines:
		if line[0] == commentTag:
			# line of internal comment
			pass
		elif line[0] == subfileTag:
			# line of sub-build-file (not presently implemented)
			pass
		else:
			# a line which should specify a FreeCAD project file
			# - may be preceded by a sub-directory e.g. "./subdir309/"
			# - project file may be missing file extension
			#
			# if line break at end of file spec then remove
			if line[-1:] == lineFeed:
				line = line[:-1]
			if line[-1:] == carriageReturn:
				line = line[:-1]
			# if no FreeCAD project file extension supplied then append one
			# make an uppercase comparison in case of mixed case
			tempLine = fcFileExtension + line.upper()
			if fcFileExtensionUC&nbsp;!= tempLine[fcFileExtensionLen:]:
				line = line + fcFileExtension
			# if there is a leading subdirectory then remove "./" from beginning
			if subfolder[0:2] == line[0:2]:
				line = line[2:]
			projectFileSpec = str(buildFilePath) + str("/") + str(line)
			if os.path.exists(projectFileSpec):
				guiDoc.mergeProject(projectFileSpec)
			else:
				FreeCAD.Console.PrintMessage('project file "' + projectFileSpec + '" not found' + "\n")

	# set view back to "build_target", it is up to user to save it (if they want)
	FreeCAD.setActiveDocument(buildTargetDocument)
	FreeCAD.ActiveDocument=FreeCAD.getDocument(buildTargetDocument)
	FreeCADGui.ActiveDocument=FreeCADGui.getDocument(buildTargetDocument)
	FreeCADGui.SendMsgToActiveView("ViewFit")
	FreeCADGui.activeDocument().activeView().viewAxometric()
#
#OS: Mac OS X
#Word size: 64-bit
#Version: 0.14.3703 (Git)
#Branch: releases/FreeCAD-0-14
#Hash: c6edd47334a3e6f209e493773093db2b9b4f0e40
#Python version: 2.7.5
#Qt version: 4.8.6
#Coin version: 3.1.3
#SoQt version: 1.5.0
#OCC version: 6.7.0
#
#thus ends the macro...</pre>
<p><br>
</p>
<h2><span class="mw-headline" id="Esempio">Esempio</span></h2>
<p>State lavorando con alcuni altri reparti della vostra azienda per usare FreeCAD per generare un grande modello CAD per un cliente esterno. Per preparare la presentazione imminente &egrave; necessario integrare i modelli rappresentati nei sottosistemi 'black' e 'blue', il dipartimento di ingegneria &egrave; responsabile dei sottosistemi 'green' e 'grey' e voi avete il sottosistema 'metal' nel vostro computer. Anche il cliente utilizza FreeCAD e la progettazione deve integrarsi con i suoi sottosistemi "red', e 'yellow'. Il cliente esterno vi ha detto che lo Stacker Assembly non &egrave; pronto per l'uso e quindi dovete generare il modello in un vostro file build.
</p><p>Ci sono un sacco di percorsi di directory da digitare perci&ograve; inserite i comandi nel file di testo in Build Utility e dopo potete eseguirli con un semplice clic su un pulsante della barra degli strumenti.
</p><p><span typeof="mw:File"><a href="../index.php?title=MacroBuildUtilityTreeDiagram.jpg&amp;filetimestamp=20150123081801&amp;.html" class="mw-file-description"><img src="../File/MacroBuildUtilityTreeDiagram.jpg" decoding="async" width="500" height="371" class="mw-file-element" data-file-width="1622" data-file-height="1205"></a></span>
</p><p>Il contenuto del seguente file di build "buildFile.FCBld" mostra la struttura del file per il progetto descritto sopra.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">#this is the build file for the complete assembly</span>
<span class="c1">#==============================</span>
<span class="nd">@sub</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">files</span> <span class="o">-</span> <span class="ow">not</span> <span class="n">presently</span> <span class="n">implemented</span>
<span class="c1"># first the top-level file</span>
<span class="n">metal</span>
<span class="c1"># now some misc files</span>
<span class="o">./</span><span class="n">black</span><span class="o">/</span><span class="n">black</span>
<span class="o">./</span><span class="n">blue</span><span class="o">/</span><span class="n">blue</span>
<span class="c1"># file does not exist</span>
<span class="n">zebra</span> 
<span class="c1"># folder does not exist</span>
<span class="o">/</span><span class="n">bear</span><span class="o">/</span><span class="n">bear</span>
<span class="c1"># multiple files in one sub-folder</span>
<span class="o">./</span><span class="n">engineering</span><span class="o">/</span><span class="n">green</span>
<span class="o">./</span><span class="n">engineering</span><span class="o">/</span><span class="n">grey</span>
<span class="c1">#multiple files in hierarchical folders</span>
<span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">white</span>
<span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">red</span><span class="o">/</span><span class="n">red</span>
<span class="c1">#./externalModules/red/stackerAssembly - commented out as not currently loading</span>
<span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">red</span><span class="o">/</span><span class="n">orange</span>
<span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">red</span><span class="o">/</span><span class="n">level3</span><span class="o">/</span><span class="n">yellow</span>
</pre></div>
<p>Una sintesi del file e del modo in cui viene elaborato &egrave;:
</p>
<ul><li>le prime due righe vengono trattate come commenti e tutto quello che segue il segno hash come carattere iniziale viene ignorato</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">#this is the build file for the complete assembly</span>
<span class="c1">#==============================</span>
</pre></div>
<ul><li>anche la terza riga &egrave; ignorata perch&eacute; il primo carattere &egrave; la "e commerciale" che &egrave; riservata per un uso futuro in cui i file di comando potranno richiamare altri file di comando</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nd">@sub</span><span class="o">-</span><span class="n">build</span><span class="o">-</span><span class="n">files</span> <span class="o">-</span> <span class="ow">not</span> <span class="n">presently</span> <span class="n">implemented</span>
</pre></div>
<ul><li>la quinta linea &egrave; la prima specificazione di un file, il file si trova nella stessa directory del file di build, non in una sottodirectory</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">metal</span>
</pre></div>
<ul><li>la settima e l'ottava riga sono due specificazioni di file in cui il file &egrave; in una sotto-directory, notare che la sub-directory &egrave; del tipo "./black/" dove "black" &egrave; il nome della directory, quindi un file chiamato "sheetFold.FCstd" nella directory "outsourcing" appare "./outsourcing/sheetFold"</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">./</span><span class="n">black</span><span class="o">/</span><span class="n">black</span>
<span class="o">./</span><span class="n">blue</span><span class="o">/</span><span class="n">blue</span>
</pre></div>
<ul><li>la diciannovesima riga mostra una specificazione di un file che esiste ma che non viene incluso in questa operazione di costruzione</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">#./externalModules/red/stackerAssembly - commented out as not currently loading</span>
</pre></div>
<ul><li>le ultime due righe mostrano la specificazione di file che si trova oltre un livello di sub-directory</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">red</span><span class="o">/</span><span class="n">orange</span>
<span class="o">./</span><span class="n">externalModules</span><span class="o">/</span><span class="n">red</span><span class="o">/</span><span class="n">level3</span><span class="o">/</span><span class="n">yellow</span>
</pre></div>
<p><br>
</p>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20251021160054
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.060 seconds
Real time usage: 0.069 seconds
Preprocessor visited node count: 229/1000000
Post&#8208;expand include size: 2730/2097152 bytes
Template argument size: 5926/2097152 bytes
Highest expansion depth: 7/100
Expensive parser function count: 9/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 10029/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   11.283      1 -total
 55.42%    6.253      1 Template:Macro/it
 21.97%    2.479      7 Template:Code
  9.67%    1.091      1 Template:MacroCode
  7.21%    0.814      1 Template:Clear
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:55779-0!canonical and timestamp 20251021160054 and revision id 1670135. Rendering was triggered because: api-parse
 -->
</div>
</div><script src="../site.js"></script>