<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Extend FEM Module/de</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="de" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Extend+FEM+Module&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--med" lang="de" dir="ltr">Deutsch</span></li>
<li><a href="../Extend_FEM_Module.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Extend FEM Module (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../es/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--med" title="Extend FEM Module (17% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="../fr/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--complete" title="FEM Module d'extension (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--med" title="Estendere il modulo FEM (54% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--complete" title="Rozszerzenie modu&#322;u MES (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ro/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--med" title="FEM: Modul Suplimentar MEF (33% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="../ru/Extend_FEM_Module.html" class="mw-pt-progress mw-pt-progress--med" title="&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1077; &#1088;&#1072;&#1073;&#1086;&#1095;&#1077;&#1081; &#1089;&#1088;&#1077;&#1076;&#1099; &#1074;&#1077;&#1088;&#1089;&#1090;&#1072;&#1082;&#1072; &#1052;&#1050;&#1069; (25% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="width: 230px; float: right; margin-left: 1em">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;"><span typeof="mw:File"><span><img src="../File/Freecad.svg" decoding="async" width="32" height="32" class="mw-file-element" data-file-width="48" data-file-height="48"></span></span> Anleitung
</td></tr>
<tr>
<th class="ctOdd">Thema
</th></tr>
<tr>
<td class="ctEven">FEM
</td></tr>
<tr>
<th class="ctOdd">Niveau
</th></tr>
<tr>
<td class="ctEven">fortgeschrittener Anf&auml;nger
</td></tr>
<tr>
<th class="ctOdd">Bearbeitungszeit
</th></tr>
<tr>
<td class="ctEven">1 Stunde
</td></tr>
<tr>
<th class="ctOdd">Autoren
</th></tr>
<tr>
<td class="ctEven"><a href="../index.php?title=User;M42kus&amp;action=edit&amp;redlink=1.html" class="new" title="User:M42kus (page does not exist)">M42kus</a>
</td></tr>
<tr>
<th class="ctOdd">FreeCAD-Version
</th></tr>
<tr>
<td class="ctEven">0.17
</td></tr>
<tr>
<th class="ctOdd">Beispieldateien
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">Siehe auch
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr></tbody></table>
<p>Der Arbeitsbereich FEM unterst&uuml;tzt schon viele unterschiedliche Randbedingungen und mehrere Berechnungsprogramme (L&ouml;ser). Trotzdem brauchen Anwender oft Randbedingungen, die noch nicht von FreeCAD unterst&uuml;tzt werden. Diese Seite ist Startpunkt f&uuml;r eine Reihe von Anleitungen und anderen Quellen, die beschreiben, wie der Arbeitsbereich FEM mit dem vorhandenen Framework (&lt;-?) erweitert werden kann. W&auml;hrend diese Reihe auch f&uuml;r Software-Entwickler hilfreich sein kann, ist die Idee dahinter, dass FEM-Anwender mit etwas Interesse f&uuml;r Python-Programmierung erm&ouml;glicht wird, selbst hinzuzuf&uuml;gen, was sie brauchen.
</p><p>Neue Randbedingungen, Gleichungen oder L&ouml;ser hinzuzuf&uuml;gen ist haupts&auml;chlich Routinearbeit. Aber beim ersten Mal ist es wahrscheinlich nicht so einfach, wie es aussieht. Ein Verst&auml;ndnis f&uuml;r die folgenden Themen wird hilfreich sein:
</p>
<ul><li>Python scripting in FreeCAD.
<ul><li><a href="../Python_scripting_tutorial.html" title="Python scripting tutorial">FreeCAD Scripting Tutorial</a></li>
<li><a href="../FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics">FreeCAD Scripting Basics</a></li></ul></li>
<li>Extending FreeCAD with Python.
<ul><li><a href="../Scripted_objects.html" title="Scripted objects">Scripted Objects</a></li></ul></li>
<li>A solid understanding of the solver for which new objects shall be added (e.g. CalculiX or Elmer) is important.</li>
<li>A little knowledge about build systems, especially cmake (build system used by FreeCAD).</li></ul>
<p><span id="Build_System_(cmake)"></span>
</p>
<h2><span id="Build-System_.28cmake.29"></span><span class="mw-headline" id="Build-System_(cmake)">Build-System (cmake)</span></h2>
<p>The build system must be modified regardless of which objects shall be added o the FEM workbench. Every python module (file) must be registered. The FEM workbench requires every new python module to be registered in <code>Mod/Fem/CMakeLists.txt</code>. This is true regardless of the type of the python module (GUI or non-GUI). Where exactly the module must be inserted depends on the role of the module. Solver, equations and constraints all use different lists. Searching for similar files and inserting the new file in the same list works most of the time.
</p><p>As an <b>example</b> lets add a new constraint called <code>pressure</code> which is related to the <b>flow equation</b>. So, <b>FlowPressure</b> will widely used as &lt;name&gt; for this constraint. A new constraint requires at least the following new modules: 
</p>
<ul><li><code>constraint_&lt;name&gt;.py</code></li>
<li><code>view_constraint_&lt;name&gt;.py</code></li>
<li><code>CommandFemConstraint&lt;name&gt;.py</code> (may be unnecessary)</li></ul>
<p>These three files must be added to <code>Mod/Fem/CMakeLists.txt</code> as well as <code>Mod/Fem/App/CMakeLists.txt</code>. All inserted lines of code are indicated by a starting <b>+</b>.
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">Mod/Fem/CMakeLists.txt</span>
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">SET</span><span class="p">(</span><span class="n">FemObjects_SRCS</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">base_fempythonobject</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_bodyheatsource</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_electrostaticpotential</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_flowvelocity</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_initialflowvelocity</span><span class="o">.</span><span class="n">py</span>
<span class="o">+</span>   <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_initialflowpressure</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">constraint_selfweight</span><span class="o">.</span><span class="n">py</span>
<span class="o">...</span>
    <span class="n">femobjects</span><span class="o">/</span><span class="n">solver_ccxtools</span><span class="o">.</span><span class="n">py</span>
<span class="p">)</span>
<span class="o">...</span>
<span class="n">SET</span><span class="p">(</span><span class="n">FemGuiViewProvider_SRCS</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_base_femconstraint</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_base_femobject</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_bodyheatsource</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_electrostaticpotential</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_flowvelocity</span><span class="o">.</span><span class="n">py</span>
<span class="o">+</span>   <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_flowpressure</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_initialflowvelocity</span><span class="o">.</span><span class="n">py</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_constraint_selfweight</span><span class="o">.</span><span class="n">py</span>
<span class="o">...</span>
    <span class="n">femviewprovider</span><span class="o">/</span><span class="n">view_solver_ccxtools</span><span class="o">.</span><span class="n">py</span>
<span class="p">)</span>
</pre></div>
<p><span id="Source_Organization"></span>
</p>
<h2><span class="mw-headline" id="Quellorganisation">Quellorganisation</span></h2>
<p>For organizing the python code the FEM module uses the following approach. The module is split into the following packages: 
</p>
<ul><li><code>femobjects</code>, which contains all non-GUI like python proxies for document objects and</li>
<li><code>femviewproviders</code> containing everything GUI related like python proxies for view provider</li>
<li>C++ based task panels are stored in '<code>Gui</code>',</li>
<li>icons can be found in '<code>Gui/Resources/icons/</code>',</li>
<li>.ui files are stored in '<code>Gui/Resources/ui/</code>' commands.</li></ul>
<p>One package doesn't follow this pattern: <code>femsolver</code>. It has its place on the same level as <code>femobjects</code> and <code>femguiobjects</code> (<code>src/Mod/Fem/femsolver</code>). The package contains solver and equation related packages and modules and it is organized the following way:
</p>
<pre>.femsolver
.femsolver.elmer
.femsolver.elmer.equations
.femsolver.calculix
.femsolver.calculix.equations
.femsolver.z88
.femsolver.z88.equations
</pre>
<p><span id="Solver"></span>
</p>
<h2><span id="L.C3.B6ser"></span><span class="mw-headline" id="L&ouml;ser">L&ouml;ser</span></h2>
<p>In FreeCAD a solver can be split into two parts: 
</p>
<ul><li>One is the document object used by the user to interact with the solver. Through it, solver parameters can be set and it is also used to control the solving process.</li>
<li>The other one are the so called tasks of a solver. The solving process is split into those tasks, namely: <i>check, prepare, solve and results</i>. Those do the actual work of exporting the analysis into a format understood by the solver executable, starting the executable and loading the results back into FreeCAD.</li></ul>
<p>Most files related to a solver reside in a sub-package of the <code>femsolver</code> package (e.g. for Elmer its in <code>femsolver/elmer</code>). The following list enumerates all files related to the implementation of a solver. Those are the files that need to be copied and modified to add support for a new solver to FreeCAD. The given example is taken from the solver implementation of Elmer. 
</p>
<ul><li><b>femsolver/elmer/solver.py:</b> Document object visible in the tree-view. Implemented in python via a document proxy and view proxy.</li>
<li><b>femsolver/elmer/tasks.py:</b> Module containing one task class per task required for a solver implementation. Those tasks divide the process of solving a analysis into the following steps: check, prepare, solve, results.</li>
<li><b>femcommands/commands.py:</b> Adds the solver document object to the active document. Required to access the solver object from the GUI.</li></ul>
<p><span id="Equations"></span>
</p>
<h2><span class="mw-headline" id="Gleichungen">Gleichungen</span></h2>
<p>An equation represents a particular physics that shall be considered when solving the analysis (e.g. Flow, Heat). Not all solver in FreeCAD support (all) equations. Equations are represented by child objects of the corresponding solver object. In the tree-view this looks like this:
</p>
<ul><li>elmer-solver
<ul><li>elasticity</li>
<li>heat</li>
<li>flow</li>
<li>electrostatics</li></ul></li></ul>
<p>Most solver specific options (e.g. max. iterations, method of solving, etc) are set via the equation objects. One consequence of this is that each solver must have it's own implementation of "the same" equation. CalculiX would have a different Heat-object that Elmer. To avoid having multiple buttons for the same physics in the GUI each solver object adds it's equations itself.
</p><p>The actual implementation can be split into the generic and the solver specific part. The generic part can be found in the <code>femsolver.equationbase</code> module. The solver specific part resides inside individual Equations sub-packages of the solver packages (e.g. <code>femsolver/elmer/equations</code>).
</p><p>Adding a new equations to Elmer should be very easy. For newcomers there exists a tutorial which shows how to add a new equation to Elmer by adding the existing elasticity solver to FreeCAD: <a href="../Add_FEM_Equation_Tutorial.html" title="Add FEM Equation Tutorial">Add FEM Equation Tutorial</a>.
</p><p><span id="Constraints"></span>
</p>
<h2><span class="mw-headline" id="Randbedingungen">Randbedingungen</span></h2>
<p>Beschr&auml;nkungen definieren Randbedingungen f&uuml;r das zu l&ouml;sende Problem. In FreeCAD sind Beschr&auml;nkungen nicht spezifisch f&uuml;r einen bestimmten L&ouml;ser. Eine Problemkonfiguration kann von allen L&ouml;sern gel&ouml;st werden, die alle Bedingungen in der Analyse unterst&uuml;tzen.
</p><p>Das Hinzuf&uuml;gen neuer Einschr&auml;nkungen ist recht einfach. F&uuml;r Neulinge gibt es ein Tutorium.: <a href="../de/Add_FEM_Constraint_Tutorial.html" title="Add FEM Constraint Tutorial/de">Tutorium FEM-Beschr&auml;nkung hinzuf&uuml;gen</a>.
</p>
<!-- 
NewPP limit report
Cached time: 20251119201240
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.047 seconds
Real time usage: 0.251 seconds
Preprocessor visited node count: 198/1000000
Post&#8208;expand include size: 1570/2097152 bytes
Template argument size: 1362/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 1/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 5470/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  191.318      1 -total
 96.11%  183.872      1 Template:Code
  1.38%    2.643     20 Template:Incode
  1.04%    1.998      1 Template:TutorialInfo/de
  0.69%    1.323      1 Template:FileName
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:212385-0!canonical and timestamp 20251119201240 and revision id 1695928. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>