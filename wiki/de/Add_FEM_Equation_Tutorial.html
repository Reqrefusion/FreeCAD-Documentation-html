<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Add FEM Equation Tutorial/de</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="de" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Add+FEM+Equation+Tutorial&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="de" dir="ltr">Deutsch</span></li>
<li><a href="../Add_FEM_Equation_Tutorial.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Add FEM Equation Tutorial (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../fr/Add_FEM_Equation_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="FEM Tutoriel pour ajouter des &eacute;quations FEM (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Add_FEM_Equation_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="Tutorial Aggiungere equazione FEM (100% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Add_FEM_Equation_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="Poradnik: Dodawanie r&oacute;wna&#324; w &#347;rodowisku MES (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../ro/Add_FEM_Equation_Tutorial.html" class="mw-pt-progress mw-pt-progress--med" title="Adaug&#259; Ecua&#539;ia Analiza Elementului Finit Tutorial (51% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="../ru/Add_FEM_Equation_Tutorial.html" class="mw-pt-progress mw-pt-progress--low" title="&#1056;&#1091;&#1082;&#1086;&#1074;&#1086;&#1076;&#1089;&#1090;&#1074;&#1086; &#1087;&#1086; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1102; &#1091;&#1088;&#1072;&#1074;&#1085;&#1077;&#1085;&#1080;&#1081; &#1074; &#1074;&#1077;&#1088;&#1089;&#1090;&#1072;&#1082; FEM (3% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<table class="fcinfobox wikitable ct" style="width: 230px; float: right; margin-left: 1em">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;"><span typeof="mw:File"><span><img src="../File/Freecad.svg" decoding="async" width="32" height="32" class="mw-file-element" data-file-width="48" data-file-height="48"></span></span> Anleitung
</td></tr>
<tr>
<th class="ctOdd">Thema
</th></tr>
<tr>
<td class="ctEven">FEM Gleichung hinzuf&uuml;gen
</td></tr>
<tr>
<th class="ctOdd">Niveau
</th></tr>
<tr>
<td class="ctEven">Fortgeschritten
</td></tr>
<tr>
<th class="ctOdd">Bearbeitungszeit
</th></tr>
<tr>
<td class="ctEven">1 Tag
</td></tr>
<tr>
<th class="ctOdd">Autoren
</th></tr>
<tr>
<td class="ctEven"><a href="../index.php?title=User;JohnWang&amp;action=edit&amp;redlink=1.html" class="new" title="User:JohnWang (page does not exist)">JohnWang</a>
</td></tr>
<tr>
<th class="ctOdd">FreeCAD-Version
</th></tr>
<tr>
<td class="ctEven">0.19
</td></tr>
<tr>
<th class="ctOdd">Beispieldateien
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<th class="ctOdd">Siehe auch
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr></tbody></table>
<p><span id="Introduction"></span>
</p>
<h2><span class="mw-headline" id="Einleitung">Einleitung</span></h2>
<p>In diesem Tutorial werden wir FreeCAD die Gleichung <b>Str&ouml;mung</b> (Flow) hinzuf&uuml;gen und die Unterst&uuml;tzung f&uuml;r den L&ouml;ser Elmer implementieren. Bitte stelle sicher, dass du <a href="../de/Extend_FEM_Module.html" title="Extend FEM Module/de">FEM-Modul erweitern</a> gelesen und verstanden hast, bevor du diese Anleitung liest.
</p><p>Die Aufgabe kann in f&uuml;nf Teile aufgeteilt werden.
</p>
<ul><li><b>Neuer Gleichungstyp</b>. Dieser Schritt muss nur durchgef&uuml;hrt werden, wenn die Gleichung in FreeCAD bisher nicht existiert (im Gegensatz zu einer Gleichung, die bereits in FreeCAD existiert, aber vom Ziell&ouml;ser nicht unterst&uuml;tzt wird).</li>
<li><b>Neues Gleichungsobjekt</b>. Hinzuf&uuml;gen eines konkreten Dokumentobjekts, das die Elmer-spezifische Gleichung repr&auml;sentiert.</li>
<li><b>L&ouml;serobjekt erweitern</b>. Dem Elmer-L&ouml;serobjekt Unterst&uuml;tzung f&uuml;r die neue Gleichung hinzuf&uuml;gen.</li>
<li><b>Writer-Objekt erweitern</b>. Erweitern des Elmer-Analyseexports zur Unterst&uuml;tzung des neuen Gleichungstyps.</li>
<li><b>GUI-Werkzeug zum Erstellen einer Gleichung</b>. Zugriff auf die neue Gleichungsfunktion &uuml;ber den GUI-Arbeitsbereich.</li></ul>
<p><span id="New_equation_type"></span>
</p>
<h2><span class="mw-headline" id="Neuer_Gleichungstyp">Neuer Gleichungstyp</span></h2>
<p>In diesem Schritt werden wir die folgende Datei modifizieren:
</p>
<ul><li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/femsolver/equationbase.py</span></li></ul>
<p>Der Gleichungstyp wird von allen Gleichungsobjekten der verschiedenen L&ouml;ser gemeinsam verwendet. Jeder Typ hat einen Zeichenfolgenspezifizierer (z.B. "Heat") und einen zugeordneten Befehl, der die Gleichung dem ausgew&auml;hlten Gleichungsl&ouml;ser hinzuf&uuml;gt. Dies erm&ouml;glicht eine einfachere GUI, bei der wir nur eine Schaltfl&auml;che f&uuml;r die W&auml;rmegleichung haben, die f&uuml;r alle unterst&uuml;tzten L&ouml;ser verwendet wird.
</p><p>F&uuml;ge zuerst die neue Gleichung zum <code>equationbase.py</code>-Modul hinzu. Jede Gleichung erfordert zwei Klassen, ein Dokument-Proxy und ein Ansicht-Proxy. Diese zwei Klassen werden sp&auml;ter als Basisklassen f&uuml;r die Elmer-spezifischen Gleichungsklassen benutzt. Kopiere sie einfach von einem existierenden Gleichungstyp und passe den Icon-Pfad in <code>getIcon(self)</code> des Ansicht-Proxy an.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">FlowProxy</span><span class="p">(</span><span class="n">BaseProxy</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">FlowViewProxy</span><span class="p">(</span><span class="n">BaseViewProxy</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">":/icons/FEM_EquationFlow.svg"</span>
</pre></div>
<p><span id="New_Elmer's_equation_object"></span>
</p>
<h2><span class="mw-headline" id="Neues_Elmers_Gleichungs_Objekt">Neues Elmers Gleichungs Objekt</span></h2>
<p>In diesem Schritt werden wir das Dokumentobjekt implementieren. Wir m&uuml;ssen eine neue Datei <code>flow.py</code> hinzuf&uuml;gen unter:
</p>
<ul><li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/femsolver/elmer/equations/flow.py</span></li></ul>
<p>und die folgenden Dateien &auml;ndern:
</p>
<ul><li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/ObjectsFem.py</span></li>
<li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/CMakeLists.txt</span></li></ul>
<p>Beginnen wir dem Hinzuf&uuml;gen der neuen Datei <code>flow.py</code>. Diese Datei kann aus einer bestehenden Gleichung kopiert werden.
</p><p><span id="Keywords"></span>
</p>
<h3><span id="Schl.C3.BCsselw.C3.B6rter"></span><span class="mw-headline" id="Schl&uuml;sselw&ouml;rter">Schl&uuml;sselw&ouml;rter</span></h3>
<ul><li>Falls die neue Gleichung nur Schl&uuml;sselworte f&uuml;r <b>lineare</b> Systeme unterst&uuml;tzt, kopiere das <code>femsolver/elmer/equations/elasticity.py</code>-Modul.</li>
<li>Falls die neue Gleichung Schl&uuml;sselworte f&uuml;r <b>lineare</b> und <b>nicht-lineare</b> Systeme unterst&uuml;tzt, kopiere das <code>femsolver/elmer/equations/heat.py</code>-Modul.</li></ul>
<p>Die Str&ouml;mungsgleichung ist eine potenziell nicht-lineare Gleichung. Das bedeutet, dass unsere Arbeit auf <code>heat.py</code> basieren wird.
</p><p><span id="Editing_files"></span>
</p>
<h3><span class="mw-headline" id="Dateien_bearbeiten">Dateien bearbeiten</span></h3>
<p>Nach dem Kopieren von <code>heat.py</code> nach <code>flow.py</code> passe letztere Datei an folgenden Stellen an:
</p>
<ul><li>das Namensargument der <code>create</code>-Modulfunktion,</li>
<li>die Basisklassen der <code>Proxy</code>-Klasse,</li>
<li>das <code>Type</code>-Attribut der <code>Proxy</code>-Klasse,</li>
<li>die <code>ViewProxy</code>-Klassen.</li></ul>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"'''Flow'''"</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">femutils</span><span class="o">.</span><span class="n">createObject</span><span class="p">(</span>
        <span class="n">doc</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">Proxy</span><span class="p">,</span> <span class="n">ViewProxy</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Proxy</span><span class="p">(</span><span class="n">nonlinear</span><span class="o">.</span><span class="n">Proxy</span><span class="p">,</span> <span class="n">equationbase</span><span class="o">.</span><span class="s1">'''Flow'''</span><span class="n">Proxy</span><span class="p">):</span>

    <span class="n">Type</span> <span class="o">=</span> <span class="s2">"Fem::EquationElmer'''Flow'''"</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Proxy</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Priority</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">class</span> <span class="nc">ViewProxy</span><span class="p">(</span><span class="n">nonlinear</span><span class="o">.</span><span class="n">ViewProxy</span><span class="p">,</span> <span class="n">equationbase</span><span class="o">.</span><span class="s1">'''Flow'''</span><span class="n">ViewProxy</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
<p>Dann musst du die &uuml;ber die <code>obj.addProperty(..)</code>-Funktion hinzugef&uuml;gten Eigenschaften auf die von der Gleichung ben&ouml;tigten anpassen.
</p><p>Zum Zeitpunkt des Schreibens dieses Tutoriums hat die Elmer-Str&ouml;mungsgleichung keine besonderen Eigenschaften. Siehe Elmer-Elastizit&auml;tsgleichung f&uuml;r ein Beispiel mit Eigenschaften.
</p><p>Schlie&szlig;lich muss man eine <b>makeEquationFlow</b>-Definition in <code>src/Mod/Fem/ObjectsFem.py</code> durch Duplizieren eines verf&uuml;gbaren Eintrags registrieren.
</p><p>FreeCAD benutzt <b>make</b> zur Erstellung des Programms. Deshalb m&uuml;ssen wir die neue Moduldatei (<code>flow.py</code>) in <code>src/Mod/Fem/CMakeLists.txt</code> registrieren, wie in <a href="../de/Extend_FEM_Module.html" title="Extend FEM Module/de">FEM-Modul erweitern</a> beschriebenen. Die passenden Listen lassen sich leicht finden, indem man nach vorhandenen Gleichungsmoduldateien von Elmer sucht.
</p><p><span id="Extend_Solver_Object"></span>
</p>
<h2><span id="L.C3.B6ser_Objekt_erweitern"></span><span class="mw-headline" id="L&ouml;ser_Objekt_erweitern">L&ouml;ser Objekt erweitern</span></h2>
<p>In diesem Schritt werden wir die folgenden Dateien modifizieren:
</p>
<ul><li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/femsolver/elmer/solver.py</span></li></ul>
<p>Gerade jetzt haben wir FreeCAD darauf aufmerksam gemacht, dass es einen neuen Gleichungstyp gibt, und sogar einen Befehl hinzugef&uuml;gt, der diese Gleichung dem ausgew&auml;hlten L&ouml;serobjekt hinzuf&uuml;gt. Wir haben auch ein konkretes Gleichungsobjekt f&uuml;r Elmer implementiert. Was jetzt noch zu tun bleibt, ist die Verbindung zwischen Elmer und der Str&ouml;mungsgleichung herzustellen. Dies muss direkt im Elmer-L&ouml;sungsobjekt erfolgen.
</p><p>Registriere das Modul, in dem wir gerade unser neues Gleichungsobjekt (<code>flow.py</code>) implementiert haben, mit dem Gleichungsspezifizierer aus Schritt 1 ("Flow") in der  <code>_EQUATIONS</code> Liste in <code>elmer/solver.py</code>.
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">.equations</span> <span class="kn">import</span> <span class="n">electrostatic</span>
<span class="o">+</span><span class="kn">from</span> <span class="nn">.equations</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="o">...</span>

<span class="n">_EQUATIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Heat"</span><span class="p">:</span> <span class="n">heat</span><span class="p">,</span>
    <span class="s2">"Elasticity"</span><span class="p">:</span> <span class="n">elasticity</span><span class="p">,</span>
<span class="o">+</span>    <span class="s2">"Flow"</span><span class="p">:</span> <span class="n">flow</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
<p><span id="Extend_writer_object"></span>
</p>
<h2><span class="mw-headline" id="Schreiber_Objekt_erweitern">Schreiber Objekt erweitern</span></h2>
<p>In diesem Schritt werden wir die folgende Datei modifizieren:
</p>
<ul><li><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">src/Mod/Fem/femsolver/elmer/writer.py</span></li></ul>
<p>Diese Datei enth&auml;lt die Klasse <code>Writer</code>, die die Analyse in das Elmer-SIF Format exportiert.
</p><p>F&uuml;r jede unterst&uuml;tzte Gleichung gibt es zwei Methoden f&uuml;r den Export der jeweiligen Gleichung. Kopiere einfach alle von einer bestehenden Gleichung und passe sie an deine Bed&uuml;rfnisse an.
</p>
<ul><li><code>_getFlowSolver</code></li>
<li><code>_handleFlow</code></li></ul>
<p>Du musst die <code>_handleFlow</code>-Methode in der <code>Writer</code>-Klasse registrieren:
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Writer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="o">...</span>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="o">...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handleFlow</span><span class="p">()</span>

<span class="o">...</span>
</pre></div>
<p><code>_handleFlow</code> kann eine Reihe weiterer detaillierter Methoden kontrollieren. Unsere Flie&szlig;-Gleichung benutzt die folgenden detaillierten Methoden:
</p>
<ul><li><code>_handleFlowConstants</code></li>
<li><code>_handleFlowMaterial</code></li>
<li><code>_handleFlowInitialVelocity</code></li>
<li><code>_handleFlowBndConditions</code></li>
<li><code>_handleFlowEquation</code></li></ul>
<p>Nun haben wir den Funktionsteil der neuen Gleichung beendet. Nun werden wir die neue Gleichung an die GUI anbinden.
</p><p><span id="Gui_tool_to_create_an_equation"></span>
</p>
<h2><span class="mw-headline" id="GUI_Werkzeug_zum_Erstellen_einer_Gleichung">GUI Werkzeug zum Erstellen einer Gleichung</span></h2>
<p>Wir haben gerade eine neue Gleichungsklasse erstellt. Um sie &uuml;ber die FEM-GUI anzusprechen, m&uuml;ssen wir eine Schaltfl&auml;che erstellen und sie mit der neuen Gleichungsklasse verbinden. Hier ist ein Tutorium:
<a href="../de/Add_Button_to_FEM_Toolbar_Tutorial.html" title="Add Button to FEM Toolbar Tutorial/de">Tutorium Schaltfl&auml;che zur FEM Werkzeugleiste hinzuf&uuml;gen</a>.
</p>
<!-- 
NewPP limit report
Cached time: 20251120204347
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.046 seconds
Real time usage: 0.084 seconds
Preprocessor visited node count: 348/1000000
Post&#8208;expand include size: 2759/2097152 bytes
Template argument size: 1490/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 4/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 6426/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   22.340      1 -total
 22.11%    4.939     32 Template:Incode
 21.42%    4.785      4 Template:Code
 21.08%    4.710      1 Template:TutorialInfo/de
 20.40%    4.558      6 Template:FileName
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:193870-0!canonical and timestamp 20251120204347 and revision id 1697640. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>