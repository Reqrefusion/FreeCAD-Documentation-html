<link href="site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">B-Splines</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="index.php?title=Special;Translate&amp;group=page-B-Splines&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="de/B-Splines.html" class="mw-pt-progress mw-pt-progress--high" title="B-Splines (79% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="en" dir="ltr">English</span></li>
<li><a href="es/B-Splines.html" class="mw-pt-progress mw-pt-progress--med" title="B-Splines (63% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="fr/B-Splines.html" class="mw-pt-progress mw-pt-progress--high" title="B-splines (99% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="it/B-Splines.html" class="mw-pt-progress mw-pt-progress--high" title="B-Splines (99% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="pl/B-Splines.html" class="mw-pt-progress mw-pt-progress--high" title="Krzywe z&#322;o&#380;one (99% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="ru/B-Splines.html" class="mw-pt-progress mw-pt-progress--low" title="B-Splines/ru (2% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><meta property="mw:PageProp/toc"></div>
<p>This page describes how to use B-splines in FreeCAD. It gives also background information what B-splines are and for what applications they are useful.
</p>
<h2><span class="mw-headline" id="Motivation">Motivation</span></h2>
<p>If you know already about B-splines and their application, you can directly continue with section <a href="#B-splines_in_FreeCAD">B-splines in FreeCAD</a>.
</p><p>Let's assume you want to design a part that should be produced with a 3D printer. The part must have an edge this way:
</p><p><span typeof="mw:File"><a href="index.php?title=B-splines_Motivation-start.png&amp;filetimestamp=20201112031157&amp;.html" class="mw-file-description"><img src="File/B-splines_Motivation-start.png" decoding="async" width="450" height="291" class="mw-file-element" data-file-width="574" data-file-height="371"></a></span>
</p><p>You have to print the part in direction of the sketch's bottom to the top. Outer support structures might not be an option. Therefore you need to add a support directly to your part. What options do you have?
</p>
<ul><li>Option 1: you could add a line from point (20, 0) to point (80, 40):</li></ul>
<p><span typeof="mw:File"><a href="index.php?title=B-splines_Motivation-line.png&amp;filetimestamp=20201112032023&amp;.html" class="mw-file-description"><img src="File/B-splines_Motivation-line.png" decoding="async" width="450" height="294" class="mw-file-element" data-file-width="574" data-file-height="375"></a></span>
</p><p>However this solution needs a lot of volume, thus weight and material.
</p>
<ul><li>Option 2: you can connect the two points with an arc of a circle. To save volume, the arc should end tangentially in point (80,40). Then your solution looks like this:</li></ul>
<p><span typeof="mw:File"><a href="index.php?title=B-splines_Motivation-circle.png&amp;filetimestamp=20201112032215&amp;.html" class="mw-file-description"><img src="File/B-splines_Motivation-circle.png" decoding="async" width="450" height="295" class="mw-file-element" data-file-width="637" data-file-height="418"></a></span>
</p><p>OK. But at the bottom you don't need immediate support.
</p>
<ul><li>Option 3: you could save some more volume if the connection between the 2 points is a curve that begins tangentially at (0, 20) and ends tangentially at (80, 40):</li></ul>
<p><span typeof="mw:File"><a href="index.php?title=B-splines_Motivation-bezier.png&amp;filetimestamp=20210116032113&amp;.html" class="mw-file-description"><img src="File/B-splines_Motivation-bezier.png" decoding="async" width="450" height="290" class="mw-file-element" data-file-width="729" data-file-height="470"></a></span>
</p><p>So a curve with which you can connect two points tangentially to a reference point can be very useful for constructions. B&eacute;zier curves provide this feature.
</p>
<h2><span id="B.C3.A9zier_curves"></span><span class="mw-headline" id="B&eacute;zier_curves">B&eacute;zier curves</span></h2>
<h3><span class="mw-headline" id="Derivation">Derivation</span></h3>
<p>B&eacute;zier curves are polynomials to describe the connection between 2 points. The simplest polynomial connecting 2 points is a line (<math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>A</mi><mo stretchy="false">*</mo><msup><mi>x</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msup><mo stretchy="false">+</mo><mi>B</mi></mstyle></mrow></math>) thus linear B&eacute;zier curves are also line segments:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="File/Bezier_linear_anim.gif" class="mw-file-description"><img src="https://upload.wikimedia.org/wikipedia/commons/8/8c/Bezier_linear_anim.gif" decoding="async" width="70" height="120" class="mw-file-element" data-file-width="70" data-file-height="120"></a></span>
</p>
<p style="text-align:left; font-style:italic; max-width:800px; box-sizing:border-box; margin-block:1em; margin-inline:clamp(1em, 6vw, 2em); padding-inline:clamp(0.75em, 4vw, 2em); word-break:normal; overflow-wrap:break-word;">Animation 1: Linear B&eacute;zier curve.</p>
<p>However a polynomial becomes useful when we can control it. So there should be a point between the 2 endpoints that allows us to define how the endpoints are connected. Like in the above example option 3 the curve is helpful when it starts and ends tangentially to lines crossing the endpoints. And this is a main feature of B&eacute;zier curves. So let's add a control point between the 2 endpoints. The curve will start tangentially towards this control point, meaning it is tangential to the line that we can draw between the startpoint and the control point. Going backwards from the endpoint the curve will also be tangential to the line we can draw between the control point and the end point. Animation 2 shows how such a curve looks.
</p><p><span class="mw-default-size" typeof="mw:File"><a href="File/Bezier_quadratic_anim.gif" class="mw-file-description"><img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Bezier_quadratic_anim.gif" decoding="async" width="190" height="120" class="mw-file-element" data-file-width="190" data-file-height="120"></a></span>
</p>
<p style="text-align:left; font-style:italic; max-width:800px; box-sizing:border-box; margin-block:1em; margin-inline:clamp(1em, 6vw, 2em); padding-inline:clamp(0.75em, 4vw, 2em); word-break:normal; overflow-wrap:break-word;">Animation 2: Quadratic B&eacute;zier curve. P1 is hereby the control point.</p>
<p>The animation makes clear what the curve basically is - a transition from P0 to P2 by rotating the line P0-P1 to become the line P1-P2. Therefore we get the nice tangential start/end feature.
</p><p>Such a curve can only be described by a quadratic polynomial. (The number of left-hand/right-hand turns + 1 is the necessary polynomial order. A quadratic polynomial is a single turn, a cubic polynomial has two turn, and so on.) Therefore a B&eacute;zier curve with one control point is a quadratic (second order) B&eacute;zier curve.
</p><p>Having only one control point is often not sufficient. Take the above motivation example. There in option 3 we end the curve tangentially in x-direction. But how can you connect the points (20, 0) and (80, 40) so that the curve ends tangentially in y-direction? To achieve this you need first a right-hand and then a left-hand turn, so a cubic (third order) polynomial. And that means for a B&eacute;zier curve that we need (or you can say we gain) a second control point. Animation 3 shows a cubic B&eacute;zier curve.
</p><p><span class="mw-default-size" typeof="mw:File"><a href="File/Bezier_cubic_anim.gif" class="mw-file-description"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a3/Bezier_cubic_anim.gif" decoding="async" width="290" height="120" class="mw-file-element" data-file-width="290" data-file-height="120"></a></span>
</p>
<p style="text-align:left; font-style:italic; max-width:800px; box-sizing:border-box; margin-block:1em; margin-inline:clamp(1em, 6vw, 2em); padding-inline:clamp(0.75em, 4vw, 2em); word-break:normal; overflow-wrap:break-word;">Animation 3: Cubic B&eacute;zier curve.</p>
<p>To answer the question, the solution with the tangential y-direction ending for the example is this one:
</p><p><span typeof="mw:File"><a href="index.php?title=B-splines_Motivation-cubic-bezier.png&amp;filetimestamp=20210116042247&amp;.html" class="mw-file-description"><img src="File/B-splines_Motivation-cubic-bezier.png" decoding="async" width="450" height="289" class="mw-file-element" data-file-width="607" data-file-height="390"></a></span>
</p>
<h3><span class="mw-headline" id="Rules">Rules</span></h3>
<p>In the derivation you might already noticed some "rules" for B&eacute;zier curves:
</p>
<ul><li>The polynomial degree is also the degree of the curves.</li>
<li>If you need <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>n</mi></mstyle></mrow></math> turns, you need at least a <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>n</mi><mo stretchy="false">+</mo><mn>1</mn></mstyle></mrow></math> degree B&eacute;zier curve.</li>
<li>A B&eacute;zier curve always begins tangentially to the line between the startpoint and the first control point (and ends tangentially to the line between the last control point and the endpoint).</li></ul>
<h3><span class="mw-headline" id="Math">Math</span></h3>
<p>If you are interested to understand the background math, here are the basics.
</p><p>A B&eacute;zier curve is calculated using this formula:
</p><p><math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mspace width="1em"></mspace><mrow data-mjx-texclass="ORD"><mtext><mrow data-mjx-texclass="ORD">Bezier</mrow></mtext></mrow><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">=</mo><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><munder><mrow data-mjx-texclass="OP"><munder><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="OPEN"><mo minsize="2.047em">(</mo></mrow><mfrac linethickness="0"><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></mfrac><mrow data-mjx-texclass="CLOSE"><mo minsize="2.047em">)</mo></mrow></mrow></mstyle></mrow><mo>&#9183;</mo></munder></mrow><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mtext>polynomial term</mtext></mrow></mrow></munder><munder><mrow data-mjx-texclass="OP"><munder><mrow data-mjx-texclass="ORD"><msup><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mn>1</mn><mo stretchy="false">&minus;</mo><mi>t</mi><mo data-mjx-texclass="CLOSE">)</mo></mrow><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>n</mi><mo stretchy="false">&minus;</mo><mi>i</mi></mrow></mrow></msup><msup><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msup></mrow><mo>&#9183;</mo></munder></mrow><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mtext>polynomial term</mtext></mrow></mrow></munder><mspace width="0.278em"></mspace><munder><mrow data-mjx-texclass="OP"><munder><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub><mo>&#9183;</mo></munder></mrow><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mtext>point coordinate</mtext></mrow></mrow></munder></mstyle></mrow></math>
</p><p><i>n</i> is hereby the degree of the curve. So a B&eacute;zier curve of degree <i>n</i> is a polygon with order <i>n</i>. The factors <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mstyle></mrow></math> are hereby in fact the coordinates of the B&eacute;zier curves' control points. For a visualization see <a rel="nofollow" class="external text" href="https://pomax.github.io/bezierinfo/#control">Controlling B&eacute;zier curvatures</a>.
</p><p>If you are further interested, have a look at <a rel="nofollow" class="external text" href="https://pomax.github.io/bezierinfo/#explanation">The mathematics of B&eacute;zier curves</a> with a nicely animated derivation of the math of B&eacute;zier curves.
</p>
<h2><span class="mw-headline" id="B-Splines">B-Splines</span></h2>
<h3><span class="mw-headline" id="Basics">Basics</span></h3>
<p><a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=bE1MrrqBAl8">This video</a> lists at the beginning the practical problems with B&eacute;zier curves. For example that adding or changing a control point changes the whole curve. These problems can be resolved by joining several B&eacute;zier curves. The result is a so-called spline, in particular a B-spline (basis spline). The video also explains that a union of quadratic B&eacute;zier curves forms a uniform quadratic B-spline and that a union of cubic B&eacute;zier curves forms a uniform cubic B-spline.
</p><p>From the videos we can collect useful "rules" for B-splines:
</p>
<ul><li>The first and last control point is the end/start point of the spline.</li>
<li>Like for B&eacute;zier curves, splines always begin tangentially to the line between the startpoint and the first control point (and end tangentially to the line between the last control point and the endpoint).</li>
<li>A union of <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>S</mi></mstyle></mrow></math> B&eacute;zier curves with the degree <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>D</mi></mstyle></mrow></math> has <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>S</mi><mo stretchy="false">+</mo><mi>D</mi></mstyle></mrow></math> control points.
<ul><li>Since one is in most cases working with cubic B-splines we can then state that <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>N</mi></mstyle></mrow></math> control points lead to <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>N</mi><mo stretchy="false">&minus;</mo><mn>3</mn></mstyle></mrow></math> B&eacute;zier segments and in turn <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>N</mi><mo stretchy="false">&minus;</mo><mn>4</mn></mstyle></mrow></math> segment junction points.</li></ul></li>
<li>A B-spline with the degree <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>D</mi></mstyle></mrow></math> offers at every point a continuous <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>D</mi><mo stretchy="false">&minus;</mo><mn>1</mn></mstyle></mrow></math> order derivative.
<ul><li>For a cubic B-spline this means that the curvature (second order derivative) does not change when traveling from one segment to the next one. This is a very useful feature as we will later see.</li></ul></li></ul>
<p>If you are interested in more details about B-Spline properties, have a look at <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=xXJylM2S72s">this video</a>.
</p>
<h4><span class="mw-headline" id="Basis">Basis</span></h4>
<p>Since we will only introduce the basics of B-spline, we don't go here into the details.
</p><p>The basis constructs the spline. Looking at the definition of B&eacute;zier curves in section <a href="#Math">Math</a> we remember that a B&eacute;zier curve is a linear combination of polynomials with the x/y coordinate of each of the control points as a factor. These polynomials are called Bernstein polynomials.
</p><p>As several B&eacute;zier curves are combined to form a spline, we get a set of  Bernstein polynomials forming the spline (they are the basis). As we want to overcome the mentioned limitations of B&eacute;zier curves, we don't geometrically combine the different Bernstein polynomials of the B&eacute;zier curves, but define Bernstein polynomials over the whole geometrical range of the spline. So we <b>don't combine</b> the B&eacute;zier curves with its Bernstein polynomials, which would be 
</p>
<dl><dd><math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mrow data-mjx-texclass="ORD"><mtext><mrow data-mjx-texclass="ORD">Bezier<mo stretchy="false">&minus;</mo>combination</mrow></mtext></mrow><mo stretchy="false">=</mo><mrow data-mjx-texclass="ORD"><mo data-mjx-texclass="OPEN">{</mo><mtable columnspacing="1em" rowspacing="4pt" columnalign="left left"><mtr><mtd><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub><mo stretchy="false">&sdot;</mo><msub><mi>B</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>,</mo></mtd><mtd><mn>0</mn><mo stretchy="false">&le;</mo><mi>t</mi><mo stretchy="false">&le;</mo><mn>1</mn></mtd></mtr><mtr><mtd><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">+</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">&sdot;</mo><msub><mi>B</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">&minus;</mo><mn>1</mn><mo stretchy="false">)</mo><mo>,</mo></mtd><mtd><mn>1</mn><mo stretchy="false">&le;</mo><mi>t</mi><mo stretchy="false">&le;</mo><mn>2</mn></mtd></mtr><mtr><mtd><mo stretchy="false">&#8943;</mo></mtd></mtr></mtable></mrow></mstyle></mrow></math></dd></dl>
<p>whereas <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>B</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mstyle></mrow></math> is the i-th Bernstein polynomial with order <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>n</mi></mstyle></mrow></math> and the coefficients <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mstyle></mrow></math> are the point coordinates of the B&eacute;zier curve control points. But we use a <b>different set of functions</b> that are defined over the whole spline range:
</p>
<dl><dd><math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mrow data-mjx-texclass="ORD"><mtext><mrow data-mjx-texclass="ORD">B<mo stretchy="false">&minus;</mo>spline</mrow></mtext></mrow><mo stretchy="false">=</mo><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><msub><mi>p</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub><mo stretchy="false">&sdot;</mo><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mstyle></mrow></math>.</dd></dl>
<p>Note that in general <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">&ne;</mo><msub><mi>B</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mstyle></mrow></math>, and the Bezier control points <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mo fence="false" stretchy="false">{</mo><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>P</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msub><mo>,</mo><mo>&hellip;</mo><mo fence="false" stretchy="false">}</mo></mstyle></mrow></math> are different from B-spline control points <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mo fence="false" stretchy="false">{</mo><msub><mi>p</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>p</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msub><mo>,</mo><mo>&hellip;</mo><mo fence="false" stretchy="false">}</mo></mstyle></mrow></math>.
</p><p>The different  <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mstyle></mrow></math> are defined piecewise where the interval of every piece is the interval of the B&eacute;zier piece.
</p><p>When the lengths of all <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub></mstyle></mrow></math> pieces is equal, we speak of a uniform spline. (In literature this is often denoted as equal travel time <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>t</mi></mstyle></mrow></math> per piece.)
</p><p>To understand how the <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>p</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mstyle></mrow></math> are the coordinates of the B-spline control points, see the first minute of <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=dPPTCy4L4rY&amp;list=PL8bSwVy8_IcMvtI70tZoYesCS0hGVO5qd">this video</a>.
</p>
<h4><span class="mw-headline" id="Knot_vector">Knot vector</span></h4>
<p>As derived above, B-splines are created out of <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub></mstyle></mrow></math> piecewise polynomials with continuity up to a certain derivative between the pieces. The endpoints of the piece's definition interval are called knots. For a spline defined over <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>k</mi></mstyle></mrow></math> pieces, there are <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>k</mi><mo stretchy="false">+</mo><mn>1</mn></mstyle></mrow></math> knots given by the so-called <i>knot vector</i>:<br><math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mo fence="false" stretchy="false">{</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>0</mn></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msub><mo>,</mo><mo>&hellip;</mo><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>k</mi></mrow></msub><mo fence="false" stretchy="false">}</mo></mstyle></mrow></math> whereas <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>0</mn></mrow></msub><mo>&lt;</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msub><mo>&lt;</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msub><mo>&lt;</mo><mo>&hellip;</mo><mo>&lt;</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>k</mi></mrow></msub></mstyle></mrow></math>
</p><p>The knot vector comprises the knots of the <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub></mstyle></mrow></math> basis functions that define the B-spline, see <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=ni5NNPCVvDY">this video</a>. The basis functions of a B-spline can be calculated using the knot vector and a creation algorithm, see <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=hrsO45AHtbs">this video</a>.
</p><p>The derivative until which continuity exists is given by the multiplicity <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>m</mi></mstyle></mrow></math>. Therefore we can specify a vector with the multiplicity for every knot: <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mo fence="false" stretchy="false">{</mo><msub><mi>m</mi><mrow data-mjx-texclass="ORD"><mn>0</mn></mrow></msub><mo>,</mo><msub><mi>m</mi><mrow data-mjx-texclass="ORD"><mn>1</mn></mrow></msub><mo>,</mo><mo>&hellip;</mo><mo>,</mo><msub><mi>m</mi><mrow data-mjx-texclass="ORD"><mi>k</mi></mrow></msub><mo fence="false" stretchy="false">}</mo></mstyle></mrow></math>. A knot on a spline with degree <i>d</i> and the multiplicity <i>m</i> tells that the curve left and right to the knot has at least an equal <i>n</i> order derivative (called <i>C</i><sup><i>n</i></sup> continuity) whereas <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>n</mi><mo stretchy="false">=</mo><mi>d</mi><mo stretchy="false">&minus;</mo><mi>m</mi></mstyle></mrow></math>.
</p>
<h3><span class="mw-headline" id="Non-uniform_B-splines">Non-uniform B-splines</span></h3>
<p>The derivation of B-splines from B&eacute;zier curves have the mathematical consequence that in B-splines every polynomial piece has the same length. Such B-splines are called <i>uniform</i>. The more general case is that they can but don't have to have the same length. Such <i>non-uniform</i> splines have the advantage that one can control how close the splines cross its control point.
</p><p>Mathematically this is achieved by defining the different <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub></mstyle></mrow></math> pieces at different intervals. If for example a B-spline is defined for the interval [0, 1], it is uniform if all its e.g. 5 pieces are also defined in this interval. If now <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mn>1</mn><mo>,</mo><mn>4</mn></mrow></mrow></msub></mstyle></mrow></math> is only defined in the interval [0, 0.6] (outside the interval it is set to zero), it is shorter and thus the spline becomes non-uniform.
</p><p>As described above the parameters of the knots are described by the knot vector. So the knot vector stores the definition intervals. When now one piece gets another interval, also the knot vector changes, see <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=w-l5R70y6u0">this video</a> for a visualization.
</p>
<h3><span class="mw-headline" id="Rational_B-splines">Rational B-splines</span></h3>
<p>A further generalization can be made for B-splines by introducing weights for the control points. This way it can be controlled "how important" a control point is.
</p><p>The equation for such a spline is
</p>
<dl><dd><math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><mi>c</mi><mo stretchy="false">(</mo><mi>n</mi><mo>,</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">=</mo><mrow data-mjx-texclass="ORD"><mfrac><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mpadded depth="3pt" height="8.6pt" width="0"></mpadded></mrow><mstyle displaystyle="false" scriptlevel="0"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><msub><mi>d</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">&sdot;</mo><msub><mi>w</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mrow></mrow></mstyle></mrow><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mpadded depth="3pt" height="8.6pt" width="0"></mpadded></mrow><mstyle displaystyle="false" scriptlevel="0"><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><munderover><mo stretchy="false">&sum;</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo stretchy="false">=</mo><mn>0</mn></mrow></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi></mrow></munderover></mstyle><msub><mi>N</mi><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>,</mo><mi>n</mi></mrow></mrow></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">&sdot;</mo><msub><mi>w</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mrow></mrow></mstyle></mrow></mfrac></mrow></mstyle></mrow></math></dd></dl>
<p>Notice that the function is no longer a polynomial, but a rational function, and these splines are called rational B-splines. Observe that when all <math class="mwe-math-element" xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mstyle displaystyle="true" scriptlevel="0"><msub><mi>w</mi><mrow data-mjx-texclass="ORD"><mi>i</mi></mrow></msub></mstyle></mrow></math> are equal, the equation reduces to a regular non-rational B-spline. So non-rational B-splines are a subset of rational B-splines.
</p><p>Non-uniform and rational B-splines are often called <b><a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Non-uniform_rational_B-spline">NURBS</a></b> and are widely used in geometric modeling.
</p>
<h2><span class="mw-headline" id="B-splines_in_FreeCAD">B-splines in FreeCAD</span></h2>
<p>FreeCAD offers to create uniform or non-uniform B-splines of any degree in 2D via the <a href="Sketcher_Workbench.html" title="Sketcher Workbench">Sketcher workbench</a>.
</p>
<h3><span class="mw-headline" id="Creation">Creation</span></h3>
<p>To create B-splines, go into a sketch and use the toolbar button <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_CreateBSpline.svg&amp;filetimestamp=20240101085839&amp;.html" class="mw-file-description"><img src="File/Sketcher_CreateBSpline.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_CreateBSpline.html" title="Sketcher CreateBSpline">Create B-spline</a></span>. Then left-click to set a control point, move the mouse left-click to set the next control point and so on. Finally right-click to finish the definition and create the B-spline.
</p><p>By default uniform cubic splines are created, except there are not enough control points to do this. So when you create a B-spline with only 2 control points, you get of course a spline that is single linear B&eacute;zier curve, for 3 control points you get a quadratic B&eacute;zier curve, first with 5 control points you get a cubic B-spline consisting of 2 B&eacute;zier segments. <span style="font-size:small;"><a href="Release_notes_0.20.html" title="Release notes 0.20">introduced in 0.20</a></span> You can also use press D while making creating a B-spline to set it's degree (it will still fall to a lower degree if less points are provided).
</p><p>To create periodic B-splines (B-splines that form a closed curve), use the toolbar button <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_CreatePeriodicBSpline.svg&amp;filetimestamp=20240101170403&amp;.html" class="mw-file-description"><img src="File/Sketcher_CreatePeriodicBSpline.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_CreatePeriodicBSpline.html" title="Sketcher CreatePeriodicBSpline">Periodic B-spline</a></span>. It is not necessary to set the last control point onto the first one because the B-spline will automatically be closed:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="index.php?title=Sketcher_Periodic-B-spline-creation.gif&amp;filetimestamp=20210308020433&amp;.html" class="mw-file-description"><img src="File/Sketcher_Periodic-B-spline-creation.gif" decoding="async" width="368" height="367" class="mw-file-element" data-file-width="368" data-file-height="367"></a></span>
</p><p>B-splines can also be generated out of existing sketch segments. To do this, select the elements and press the the toolbar button <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineConvertToNURBS.svg&amp;filetimestamp=20240331101832&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineConvertToNURBS.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineConvertToNURBS.html" title="Sketcher BSplineConvertToNURBS">Convert Geometry to B-spline</a></span>.
</p><p>While creating a B-spline, its degree can be specified by pressing the <span class="key" style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px; color:#202122;">D</span> key. With this, the default to create a cubic B-spline if possible, can be overridden. <span style="font-size:small;"><a href="Release_notes_0.20.html" title="Release notes 0.20">introduced in 0.20</a></span>
</p>
<h3><span class="mw-headline" id="Changing_the_Degree">Changing the Degree</span></h3>
<p>To change the degree, select the B-spline and use either the toolbar button <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineIncreaseDegree.svg&amp;filetimestamp=20240101115116&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineIncreaseDegree.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineIncreaseDegree.html" title="Sketcher BSplineIncreaseDegree">Increase B-spline degree</a></span> or <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineDecreaseDegree.svg&amp;filetimestamp=20240101115056&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineDecreaseDegree.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineDecreaseDegree.html" title="Sketcher BSplineDecreaseDegree">Decrease B-spline degree</a></span>.
</p><p><b>Note:</b> Decreasing the degree cannot revert a prior increase of the degree, see the Wiki page <a href="Sketcher_BSplineDecreaseDegree.html" title="Sketcher BSplineDecreaseDegree">Decrease B-spline degree</a> for an explanation.
</p>
<h3><span class="mw-headline" id="Changing_the_Knot_Multiplicity">Changing the Knot Multiplicity</span></h3>
<p>The points where two B&eacute;zier curves are connected to form the B-spline are called knots. The knot multiplicity determines how the B&eacute;zier parts are connected, see the Wiki page <a href="Sketcher_BSplineIncreaseKnotMultiplicity.html" title="Sketcher BSplineIncreaseKnotMultiplicity">Increase knot multiplicity</a> for details.
</p><p>To change the knot multiplicity, use the toolbar buttons <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineIncreaseKnotMultiplicity.svg&amp;filetimestamp=20240101115126&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineIncreaseKnotMultiplicity.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineIncreaseKnotMultiplicity.html" title="Sketcher BSplineIncreaseKnotMultiplicity">B-spline increase knot multiplicity</a></span> or <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineDecreaseKnotMultiplicity.svg&amp;filetimestamp=20240101115106&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineDecreaseKnotMultiplicity.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineDecreaseKnotMultiplicity.html" title="Sketcher BSplineDecreaseKnotMultiplicity">B-spline decrease knot multiplicity</a></span>.
</p><p><b>Note:</b> Creating two B-Splines that are connected to each other will not unite to a single new B-spline. So their connection point is not a knot. The only way to get a new knot in an existing B-spline is to decrease the degree. However, you may get many new knots. Thus the better choice is to redraw the B-spline with more control points.
</p>
<h3><span class="mw-headline" id="Changing_the_Weight">Changing the Weight</span></h3>
<p>Around every control point you see a dark yellow circle. Its radius sets the weight for the corresponding control point. By default all circles have the radius <i>1</i>. This is indicated with a radius constraint for the first control point circle.
</p><p>To create a rational B-spline the weights have to be made independent. To achieve that you can delete the constraint that all circles are equal and then set different radius constraints for the circles.
</p><p>If no radius constraint is set, you can also change the radius by dragging:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="index.php?title=Sketcher_Changing-control-point-weigth-dragging.gif&amp;filetimestamp=20210307233624&amp;.html" class="mw-file-description"><img src="File/Sketcher_Changing-control-point-weigth-dragging.gif" decoding="async" width="565" height="430" class="mw-file-element" data-file-width="565" data-file-height="430"></a></span>
</p><p>In the dragging example you see that a high weight attracts the curve to the control point while a very low weight changes the curve so as if the control point does almost not exist.
</p><p>When you look at the <a href="#Rational_B-splines">creation function</a> for non-uniform rational B-splines you see that a weight of zero would lead to a division by zero. Negative weights are theoretically possible but they are not supported. Therefore you can only specify weights greater than zero.
</p><p><b>Note:</b> When dragging points, knots or widths, the circle diameters denoting the weight will change. This is because the diameter depends on the overall B-spline length for visualization reasons. The actual weight is not changed.
</p>
<h3><span class="mw-headline" id="Editing_Knots">Editing Knots</span></h3>
<p>New knots can be added using the <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineInsertKnot.svg&amp;filetimestamp=20240513165934&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineInsertKnot.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineInsertKnot.html" title="Sketcher BSplineInsertKnot">B-spline insert knot</a></span> button. <span style="font-size:small;"><a href="Release_notes_0.20.html" title="Release notes 0.20">introduced in 0.20</a></span>
</p><p>A knot is deleted by decreasing it's degree to 0 (i.e applying <span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineDecreaseKnotMultiplicity.svg&amp;filetimestamp=20240101115106&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineDecreaseKnotMultiplicity.svg" decoding="async" width="24" height="24" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineDecreaseKnotMultiplicity.html" title="Sketcher BSplineDecreaseKnotMultiplicity">B-spline decrease knot multiplicity</a></span> when it's degree is 1).
</p><p>Changing the parameter value of a knot is not yet supported.
</p>
<h3><span class="mw-headline" id="Display_Information">Display Information</span></h3>
<p>Since the form of a B-spline does not tell much about its properties, FreeCAD offers <a href="Sketcher_Workbench.html#Sketcher_B-spline_tools" title="Sketcher Workbench">different tools</a> to display the properties:
</p>
<table class="wikitable float-right">
<tbody><tr>
<td>Property
</td>
<td>Toolbar button
</td></tr>
<tr>
<td><b>Degree</b>
</td>
<td><span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineDegree.svg&amp;filetimestamp=20240101112910&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineDegree.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineDegree.html" title="Sketcher BSplineDegree">Show/Hide B-spline degree</a></span>
</td></tr>
<tr>
<td><b>Control polygon</b>
</td>
<td><span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplinePolygon.svg&amp;filetimestamp=20240101113010&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplinePolygon.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplinePolygon.html" title="Sketcher BSplinePolygon">Show/hide B-spline control polygon</a></span>
</td></tr>
<tr>
<td><b>Curvature comb</b>
</td>
<td><span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineComb.svg&amp;filetimestamp=20240101112854&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineComb.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineComb.html" title="Sketcher BSplineComb">Show/hide B-spline curvature comb</a></span>
</td></tr>
<tr>
<td><b>Knot multiplicity</b>
</td>
<td><span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplineKnotMultiplicity.svg&amp;filetimestamp=20240101112934&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplineKnotMultiplicity.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplineKnotMultiplicity.html" title="Sketcher BSplineKnotMultiplicity">Show/hide B-spline knot multiplicity</a></span>
</td></tr>
<tr>
<td><b>Weights</b>
</td>
<td><span class="ButtonTemplate" style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.3em; padding: 0px 8px 1px 8px; font-weight:normal;color: #202122;"><span typeof="mw:File"><a href="index.php?title=Sketcher_BSplinePoleWeight.svg&amp;filetimestamp=20240101112951&amp;.html" class="mw-file-description"><img src="File/Sketcher_BSplinePoleWeight.svg" decoding="async" width="16" height="16" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span> <a href="Sketcher_BSplinePoleWeight.html" title="Sketcher BSplinePoleWeight">Show/hide B-spline control point weight</a></span>
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Limitations">Limitations</span></h3>
<p>At the moment (FreeCAD 0.20) there are some limitations when using splines you should know:
</p>
<ol><li>You cannot set tangential constraints.<br>In this example<br> <span typeof="mw:File"><a href="index.php?title=Sketcher_spline-limit-tangential.png&amp;filetimestamp=20210330081716&amp;.html" class="mw-file-description"><img src="File/Sketcher_spline-limit-tangential.png" decoding="async" width="450" height="183" class="mw-file-element" data-file-width="752" data-file-height="305"></a></span><br> you want to assure that the spline touches the blue curve 2 times tangentially. This would be useful because the blue line could for example be the spatial border for your design.</li>
<li>You cannot create an offset curve for a B-spline using the tool <a href="Draft_Offset.html" title="Draft Offset">Draft Offset</a>.</li></ol>
<h2><span class="mw-headline" id="Typical_Use_Cases">Typical Use Cases</span></h2>
<p>According to the properties of B-splines, there are 3 main use cases:
</p>
<ol><li>Curves that start/end tangentially to a certain direction. An example for this is the motivation example <a href="#Motivation">above</a>.</li>
<li>Curves describing larger designs and providing the freedom of local changes. See <a href="#Designing">this example</a> below.</li>
<li>Curves providing a certain continuity (derivative). See <a href="#Continuity_at_Geometric_Transitions">this example</a> below.</li></ol>
<h3><span class="mw-headline" id="Designing">Designing</span></h3>
<p>Take for example the case that you design a housing of a kitchen mixer. Its desired shape should look like this one:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="index.php?title=Sketcher_spline-exmple-mixer-shell.png&amp;filetimestamp=20210330083829&amp;.html" class="mw-file-description"><img src="File/Sketcher_spline-exmple-mixer-shell.png" decoding="async" width="399" height="445" class="mw-file-element" data-file-width="399" data-file-height="445"></a></span>
</p><p>To define the outer form it is advantageous to use a B-spline because when you change a control point to change the curvature at the bottom, the curvature at the side and top will not be changed:
</p><p><span class="mw-default-size" typeof="mw:File"><a href="index.php?title=Sketcher_spline-exmple-mixer-sketch.gif&amp;filetimestamp=20210330084135&amp;.html" class="mw-file-description"><img src="File/Sketcher_spline-exmple-mixer-sketch.gif" decoding="async" width="276" height="619" class="mw-file-element" data-file-width="276" data-file-height="619"></a></span>
</p>
<h3><span class="mw-headline" id="Continuity_at_Geometric_Transitions">Continuity at Geometric Transitions</span></h3>
<p>There are several cases where it is physically necessary to have a certain surface continuity at geometric transitions. Take for example the inner walls of a fluid channel. When you have a change in the diameter of the channel, you don't want to have an edge because edges would introduce turbulences. Therefore, like in  the motivation example <a href="#Motivation">above</a>, one uses splines for this purpose.
</p><p>The development of the B&eacute;zier curves was initially triggered by the French car industry. Besides the saving of material and the reduction of the air flow drag, the look of the cars should also be improved. And when you look at the fancy design of French cars from the 60's and 70's you see that the B&eacute;zier curves gave car design a boost.
</p><p>Let's take for example this task in the design of cars: The car fender should "look nice". Here is a basic sketch of our task:
</p><p><span typeof="mw:File"><a href="index.php?title=Spline-Fender-sketch1.svg&amp;filetimestamp=20210605153548&amp;.html" class="mw-file-description"><img src="File/Spline-Fender-sketch1.svg" decoding="async" width="250" height="304" class="mw-file-element" data-file-width="437" data-file-height="532"></a></span>
</p><p>"Looking nice" means that the (potential) customer looks at the fender and does not see unexpected light reflections and also no sudden changes in the reflection from the automotive paint at all. So what do you need to avoid changes in the reflections? Looking closely to the fender:
</p><p><span typeof="mw:File"><a href="index.php?title=Spline-Fender-sketch2.svg&amp;filetimestamp=20210605153626&amp;.html" class="mw-file-description"><img src="File/Spline-Fender-sketch2.svg" decoding="async" width="300" height="244" class="mw-file-element" data-file-width="426" data-file-height="347"></a></span>
</p>
<p style="text-align:left; font-style:italic; max-width:800px; box-sizing:border-box; margin-block:1em; margin-inline:clamp(1em, 6vw, 2em); padding-inline:clamp(0.75em, 4vw, 2em); word-break:normal; overflow-wrap:break-word;">At the spatial area above the edge the intensity of reflected light is low (denoted by the red ellipse) because no light is directly reflected in the direction from the edge to the eye.</p>
<p>you see when there is an edge, there is a spatial area where the reflected light has less intensity and this is what you will notice when looking at the fender. To avoid this you need a continuous change in the slope of your surface elements. The slope is the first order derivative and as explained in section <a href="#Basics">Basics</a>, a second degree (quadratic) B-spline offers at every point a continuous first order derivative.
</p><p>But is this really sufficient? At the point of geometric transition we have now at both sides the same slope, but the slope might change differently at both sides. Then we have this situation:
</p><p><span typeof="mw:File"><a href="index.php?title=Spline-Fender-sketch3.svg&amp;filetimestamp=20210605153651&amp;.html" class="mw-file-description"><img src="File/Spline-Fender-sketch3.svg" decoding="async" width="300" height="244" class="mw-file-element" data-file-width="426" data-file-height="347"></a></span>
</p><p>So we have also spatial areas in which the intensity of reflected light is different. To avoid this, we need at the geometrical point of transition also a continuity of the second order derivative and thus a cubic B-spline.
</p>
<!-- 
NewPP limit report
Cached time: 20251013160112
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.167 seconds
Real time usage: 0.212 seconds
Preprocessor visited node count: 597/1000000
Post&#8208;expand include size: 9926/2097152 bytes
Template argument size: 1904/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 18411/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   40.211      1 -total
 14.73%    5.922     14 Template:Button
  4.36%    1.755      4 Template:Caption
  3.88%    1.560      3 Template:Version
  3.50%    1.406      1 Template:KEY
  2.81%    1.130      1 Template:TOCright
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:222642-0!canonical and timestamp 20251013160112 and revision id 1660155. Rendering was triggered because: api-parse
 -->
</div>
</div><script src="site.js"></script>