<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Macro Colorize/pl</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="pl" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Macro+Colorize&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../Macro_Colorize.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Macro Colorize (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../fr/Macro_Colorize.html" class="mw-pt-progress mw-pt-progress--complete" title="Macro Colorize (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="pl" dir="ltr">polski</span></li></ul></div>
<table class="fcinfobox wikitable ct" width="100%" style="float: right; width: 230px; margin-left: 10px;">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a href="../index.php?title=Workbench_Image.svg&amp;filetimestamp=20200404172907&amp;.html" class="mw-file-description"><img src="../File/Workbench_Image.svg" decoding="async" width="32" height="32" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span><span> </span>
Macro Colorize
</p>
</td></tr>
<tr>
<th class="ctOdd">Opis
</th></tr>
<tr>
<td class="ctEven left macro-description">Szybko i &#322;atwo ustaw kolor oraz przezroczysto&#347;&#263; pojedynczych &#347;cian, kraw&#281;dzi i wierzcho&#322;k&oacute;w.<br><br>Macro version: 1.03<br>Last modified: 2023-10-07<br>FreeCAD version: kompilacje Python3<br>Download: <a rel="nofollow" class="external text" href="https://wiki.freecad.org/images/d/de/Workbench_Image.svg">Ikona paska narz&#281;dzi</a><br>Autor: TheMarkster<br>
</td></tr>
<tr>
<th class="ctOdd">Autor
</th></tr>
<tr>
<td class="ctEven macro-author"><a href="../index.php?title=User;TheMarkster&amp;action=edit&amp;redlink=1.html" class="new" title="User:TheMarkster (page does not exist)">TheMarkster</a>
</td></tr>
<tr>
<th class="ctOdd">Do pobrania
</th></tr>
<tr>
<td class="ctEven macro-download"><a rel="nofollow" class="external text" href="https://wiki.freecad.org/images/d/de/Workbench_Image.svg">Ikona paska narz&#281;dzi</a>
</td></tr>
<tr>
<th class="ctOdd">Odno&#347;niki
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="../pl/Macros_recipes.html" title="Macros recipes/pl">Przepisy na makropolecenia</a><br><a href="../pl/How_to_install_macros.html" title="How to install macros/pl">Jak zainstalowa&#263; makrodefinicje</a><br><a href="../pl/Customize_Toolbars.html" title="Customize Toolbars/pl">Dostosowanie pask&oacute;w narz&#281;dzi</a>
</td></tr>
<tr>
<th class="ctOdd">Wersja Makrodefinicji
</th></tr>
<tr>
<td class="ctEven macro-version">1.03
</td></tr>
<tr>
<th class="ctOdd">Data zmian
</th></tr>
<tr>
<td class="ctEven macro-date">2023-10-07
</td></tr>
<tr>
<th class="ctOdd">Wersja FreeCAD
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">kompilacje Python3
</td></tr>
<tr>
<th class="ctOdd">Domy&#347;lny skr&oacute;t
</th></tr>
<tr>
<td class="ctEven"><i>Brak</i>
</td></tr>
<tr>
<th class="ctOdd">Zobacz r&oacute;wnie&#380;
</th></tr>
<tr>
<td class="ctEven"><i>-</i>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr>
</tbody></table>
<p><span id="Description"></span>
</p>
<h2><span class="mw-headline" id="Opis">Opis</span></h2>
<p>To makro umo&#380;liwia szybkie i &#322;atwe ustawienie koloru oraz przezroczysto&#347;ci pojedynczych &#347;cian, kraw&#281;dzi i wierzcho&#322;k&oacute;w.
</p><p><span id="Usage"></span>
</p>
<h2><span id="U.C5.BCycie"></span><span class="mw-headline" id="U&#380;ycie">U&#380;ycie</span></h2>
<ol><li>Wybierz jeden lub wi&#281;cej podobiekt&oacute;w.</li>
<li>Uruchom makro.</li>
<li>Otworzy si&#281; standardowe okno dialogowe wyboru koloru Qt.</li>
<li>Wybierz kolor.</li>
<li>Ustaw przezroczysto&#347;&#263;, zmieniaj&#261;c kana&#322; alfa (0 = ca&#322;kowicie nieprzezroczysty, 255 = ca&#322;kowicie przezroczysty).</li>
<li>Wykonaj jedn&#261; z nast&#281;puj&#261;cych czynno&#347;ci:
<ul><li>Naci&#347;nij przycisk <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;">OK</span>, aby zamkn&#261;&#263; okno dialogowe i zastosowa&#263; kolor oraz przezroczysto&#347;&#263;.</li>
<li>Naci&#347;nij przycisk <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;">Anuluj</span>, aby anulowa&#263; makro.</li></ul></li>
<li>Je&#347;li nacisn&#261;&#322;e&#347; <span style="background: #f5f5f5; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 2px solid #989898; border-radius: 0.4em; padding: 0px 10px 1px 10px; font-weight:normal;">OK</span> i podobiektu nale&#380;&#261; do wi&#281;cej ni&#380; jednego obiektu, okno wyboru koloru otworzy si&#281; ponownie dla kolejnego obiektu.</li></ol>
<p><span id="Notes"></span>
</p>
<h2><span class="mw-headline" id="Uwagi">Uwagi</span></h2>
<ul><li>Bie&#380;&#261;cy kolor pierwszego wybranego podobiektu w danym obiekcie b&#281;dzie kolorem domy&#347;lnym w oknie dialogowym. Pierwsze 2 kolory niestandardowe to domy&#347;lny szary dla &#347;cian oraz domy&#347;lny czarny dla kraw&#281;dzi i punkt&oacute;w. Domy&#347;lna warto&#347;&#263; kana&#322;u alfa to 0 (brak przezroczysto&#347;ci).</li>
<li>Mo&#380;esz u&#380;y&#263; dowolnego koloru, ale warto unika&#263; kolor&oacute;w u&#380;ywanych do zaznaczania (domy&#347;lnie zielony) i wst&#281;pnego zaznaczenia (domy&#347;lnie &#380;&oacute;&#322;ty).</li>
<li>Opcja przezroczysto&#347;ci nie dzia&#322;a dla kraw&#281;dzi i punkt&oacute;w, tylko dla &#347;cian.</li>
<li>Przezroczysta &#347;ciana nadal jest mo&#380;liwa do zaznaczenia w widoku 3D.</li>
<li>Je&#347;li wn&#281;trze &#347;cian wydaje si&#281; czarne, a chcia&#322;by&#347; widzie&#263; kolory &#347;cian, zmie&#324; w&#322;a&#347;ciwo&#347;&#263; O&#347;wietlenie obiektu z Jednostronne na Dwustronne na karcie Widok.</li>
<li>W&#322;a&#347;ciwo&#347;ci Kolor i Przezroczysto&#347;&#263; obiektu s&#261; w&#322;a&#347;ciwo&#347;ciami globalnymi. Ich zmiana nadpisze ustawienia poszczeg&oacute;lnych podobiekt&oacute;w.</li></ul>
<p><span id="Script"></span>
</p>
<h2><span class="mw-headline" id="Skrypt">Skrypt</span></h2>
<p>Ikona paska narz&#281;dzi <span class="mw-default-size" typeof="mw:File"><a href="../index.php?title=Workbench_Image.svg&amp;filetimestamp=20200404172907&amp;.html" class="mw-file-description"><img src="../File/Workbench_Image.svg" decoding="async" width="64" height="64" class="mw-file-element" data-file-width="64" data-file-height="64"></a></span>
</p><p><b>Macro_Colorize.FCMacro</b>
</p>
<pre># -*- coding: utf-8 -*-
#Colorize macro, 2021, by &lt;TheMarkster&gt; LGPL2.1 or later
#Usage: Select subobjects, run macro
#A color picker dialog will appear
#Select the color for the selected subobjects.
#The alpha channel corresponds to the transparency
# 0 = no transparency, 255 = full transparency
# first 2 custom colors are the default gray and black
# used for faces and edges/points
__icon__ = "https://wiki.freecad.org/images/d/de/Workbench_Image.svg"
__version__ = "1.03"
from PySide import QtGui,QtCore
import warnings
warnings.filterwarnings("ignore", category=DeprecationWarning)

class ColorDlg (QtGui.QColorDialog):
    def __init__(self,title,flags):
        QtGui.QColorDialog.__init__(self)
        self.title = title
        self.flags = flags

    def getClr(self, currentColor):
        current = QtGui.QColor(currentColor[0]*255,currentColor[1]*255,currentColor[2]*255,currentColor[3]*255)
        self.setCustomColor(0,QtGui.QColor.fromRgb(204,204,204,0)) # gray, default face color
        self.setCustomColor(2,QtGui.QColor.fromRgb(0,0,0,0)) #black, default line and point color
        clr = self.getColor(current,None,self.title, self.flags)
        return clr

def getIdx(sen):
    '''get subelement index from sub element name, e.g. from "Face6"  we get 5'''
    if 'Face' in sen or 'Edge' in sen or 'Wire' in sen:
        val = int(sen[4:])
    elif 'Vertex' in sen:
        val = int(sen[6:])
    return val-1

def buildDefaultColorArray(color, count):
    clr = (color[0],color[1],color[2],0.0)
    return[clr] * count

def getCurrentColor(obj,subName):
    idx = getIdx(subName)
    if "Face" in subName:
        ary = obj.ViewObject.DiffuseColor
    elif "Edge" in subName:
        ary = obj.ViewObject.LineColorArray
    elif "Vertex" in subName:
        ary = obj.ViewObject.PointColorArray
    if len(ary) &gt;= idx:
        return ary[idx]
    else:
        return ary[0]


def setColors():
    selx = Gui.Selection.getSelectionEx()
    for sel in selx:
        if sel.HasSubObjects:
            defaultColor = QtCore.Qt.gray if "Face" in sel.SubElementNames[0] else QtCore.Qt.black
            currentColor = getCurrentColor(sel.Object,sel.SubElementNames[0])
            subs = sel.SubElementNames
            faces = [name for name in subs if "Face" in name]
            edges = [name for name in subs if "Edge" in name]
            vertices = [name for name in subs if "Vertex" in name]
            objname = sel.Object.Name
            if sel.Object.Name&nbsp;!= sel.Object.Label:
                objname += " ("+sel.Object.Label+")"
            dlg = ColorDlg('Colorize v'+__version__+' object: '+objname,QtGui.QColorDialog.ShowAlphaChannel.__or__(QtGui.QColorDialog.DontUseNativeDialog))
            col = dlg.getClr(currentColor)
            if not col.isValid(): #user canceled
                return
            col = col.getRgbF()

            if faces:
                dc = sel.Object.ViewObject.DiffuseColor
                if len(dc) == 1:
                    dc = buildDefaultColorArray(dc[0], len(sel.Object.Shape.Faces))
                indices = [getIdx(name) for name in faces]
                for idx in indices:
                    dc[idx] = col
                sel.Object.ViewObject.DiffuseColor = dc
            if edges:
                lca = sel.Object.ViewObject.LineColorArray
                if len(lca) == 1:
                    lca = buildDefaultColorArray(lca[0], len(sel.Object.Shape.Edges))
                indices = [getIdx(name) for name in edges]
                for idx in indices:
                    lca[idx] = col
                sel.Object.ViewObject.LineColorArray = lca

            if vertices:
                pca = sel.Object.ViewObject.PointColorArray
                if len(pca) == 1:
                    pca = buildDefaultColorArray(pca[0], len(sel.Object.Shape.Vertexes))
                indices = [getIdx(name) for name in vertices]
                for idx in indices:
                    pca[idx] = col
                sel.Object.ViewObject.PointColorArray = pca

        else:
            FreeCAD.Console.PrintError("No subobjects selected\n")

setColors()</pre>
<div style="clear:both"></div>
<!-- 
NewPP limit report
Cached time: 20250728170027
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.041 seconds
Real time usage: 0.050 seconds
Preprocessor visited node count: 116/1000000
Post&#8208;expand include size: 2981/2097152 bytes
Template argument size: 4676/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 4987/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.265      1 -total
 40.91%    1.745      1 Template:Macro/pl
 20.54%    0.876      1 Template:MacroCode
 17.84%    0.761      3 Template:Button
 14.54%    0.620      1 Template:Clear
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:290403-0!canonical and timestamp 20250728170027 and revision id 1620934. Rendering was triggered because: api-parse
 -->
</div>
</div><script src="../site.js"></script>