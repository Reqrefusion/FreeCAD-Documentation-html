<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Add Button to FEM Toolbar Tutorial/ru</span></h1><?xml encoding="UTF-8"><div class="mw-content-ltr mw-parser-output" lang="ru" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../index.php?title=Special;Translate&amp;group=page-Add+Button+to+FEM+Toolbar+Tutorial&amp;language=&amp;task=view.html" class="new" title="Start translation for this language" lang="" dir="ltr"></a></li>
<li><a href="../de/Add_Button_to_FEM_Toolbar_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="Anleitung Schaltfl&auml;che zur FEM-Symbolleiste hinzuf&uuml;gen (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Add_Button_to_FEM_Toolbar_Tutorial.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Add Button to FEM Toolbar Tutorial (100% translated)" lang="en" dir="ltr">English</a></li>
<li><a href="../fr/Add_Button_to_FEM_Toolbar_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="FEM Tutoriel pour ajouter un bouton dans la barre d'outils FEM (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Add_Button_to_FEM_Toolbar_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="Tutorial su come aggiungere un pulsante alla barra strumenti di FEM (100% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Add_Button_to_FEM_Toolbar_Tutorial.html" class="mw-pt-progress mw-pt-progress--complete" title="Poradnik: Dodaj przycisk do paska narz&#281;dzi MES (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--low" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</span></li></ul></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<table class="fcinfobox wikitable ct" style="width: 230px; float: right; margin-left: 1em">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;"><span typeof="mw:File"><span><img src="../File/Freecad.svg" decoding="async" width="32" height="32" class="mw-file-element" data-file-width="48" data-file-height="48"></span></span> Tutorial
</td></tr>
<tr>
<th class="ctOdd">Topic
</th></tr>
<tr>
<td class="ctEven">FEM
</td></tr>
<tr>
<th class="ctOdd">Level
</th></tr>
<tr>
<td class="ctEven">Advanced
</td></tr>
<tr>
<th class="ctOdd">Time to complete
</th></tr>
<tr>
<td class="ctEven">60 min
</td></tr>
<tr>
<th class="ctOdd">Authors
</th></tr>
<tr>
<td class="ctEven"><a href="../index.php?title=User;JohnWang&amp;action=edit&amp;redlink=1.html" class="new" title="User:JohnWang (page does not exist)">JohnWang</a>
</td></tr>
<tr>
<th class="ctOdd">FreeCAD version
</th></tr>
<tr>
<td class="ctEven">0.19
</td></tr>
<tr>
<th class="ctOdd">Example files
</th></tr>
<tr>
<td class="ctEven">
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><i>None</i>
</td></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr></tbody></table>
</div>
<p><span id="Introduction"></span>
</p>
<h2><span id=".D0.92.D0.B2.D0.B5.D0.B4.D0.B5.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="&#1042;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077;">&#1042;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077;</span></h2>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The FEM workbench has toolbars and menus. This tutorial shows how to add a test button to a toolbar. It also shows how to add a menu item to a menu.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The task can be split into four parts:
</p>
<ul><li><b>Create a new icon file</b>.</li>
<li><b>Register the new icon file</b>. Modification needed to <code>src/Mod/Fem/Gui/Resources/Fem.qrc</code></li>
<li><b>Create a new command class</b>. Modification needed to <code>src/Mod/Fem/femcommands/commands.py</code></li>
<li><b>Add new command to workbench</b>. Modification needed to <code>src/Mod/Fem/Gui/Workbench.cpp</code></li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Create_a_new_icon_file">Create a new icon file</span></h2>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>For the button, we need an icon file. You can use any of your favorite tools to create it, but it must be in the SVG format. Here we will use the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">FEM_testButton.svg</span> file as an example.
</p>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>It must be placed in: <code>src/Mod/Fem/Gui/Resources/icons/</code>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Register_the_new_icon_file">Register the new icon file</span></h2>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The new SVG icon file has to be registered for the GUI button by inserting it in <code>src/Mod/Fem/Gui/Resources/Fem.qrc</code>:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span><span class="n">icons</span><span class="o">/</span><span class="n">FEM_testButton</span><span class="o">.</span><span class="n">svg</span><span class="o">&lt;/</span><span class="n">file</span><span class="o">&gt;</span>
</pre></div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Create_a_new_command_class">Create a new command class</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>A new command class has to be added to the <code>src/Mod/Fem/femcommands/commands.py</code> module.
</p>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Just copy/paste an existing command, then adjust the icon, menu text and tool-tip in <code>__init__(self)</code>:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">_testButton</span><span class="p">(</span><span class="n">CommandManager</span><span class="p">):</span>
    <span class="s2">"The FEM_testButton command definition"</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_testButton</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menuetext</span> <span class="o">=</span> <span class="s2">"test Button"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tooltip</span> <span class="o">=</span> <span class="s2">"This is a test button"</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_active</span> <span class="o">=</span> <span class="s2">"always"</span>
        <span class="c1">#self.do_activated = "add_obj_on_gui_selobj_noset_edit"</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Don't forget to register the command at the bottom of the module file with the <code>addCommand(...)</code> method:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCADGui</span><span class="o">.</span><span class="n">addCommand</span><span class="p">(</span>
    <span class="s2">"FEM_testButton"</span><span class="p">,</span>
    <span class="n">_testButton</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><b>Note</b>: Please see this <a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=46693&amp;start=10#p402004">discussion thread</a> in the forum if icons are involved.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Add_new_command_to_workbench">Add new command to workbench</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>We will add the new command to both the <b>solve</b> toolbar and the <b>solve</b> menu.
</p>
</div> 
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Search for the following code snippet in <code>/Gui/Workbench.cpp</code> and add the new command:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Gui</span><span class="p">::</span><span class="n">ToolBarItem</span><span class="o">*</span> <span class="n">solve</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gui</span><span class="p">::</span><span class="n">ToolBarItem</span><span class="p">(</span><span class="n">root</span><span class="p">);</span>
     <span class="n">solve</span><span class="o">-&gt;</span><span class="n">setCommand</span><span class="p">(</span><span class="s2">"Solve"</span><span class="p">);</span>
     <span class="o">*</span><span class="n">solve</span> <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculixCxxtools"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculiX"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverElmer"</span>
<span class="o">+</span>           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_testButton"</span>
            <span class="o">&lt;&lt;</span> <span class="s2">"Separator"</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>To add the command to the <b>solve</b> menu of the FEM workbench, search for the following code snippet in <code>Workbench.cpp</code>:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">Gui</span><span class="p">::</span><span class="n">MenuItem</span><span class="o">*</span> <span class="n">solve</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Gui</span><span class="p">::</span><span class="n">MenuItem</span><span class="p">;</span>
    <span class="n">root</span><span class="o">-&gt;</span><span class="n">insertItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">solve</span><span class="p">);</span>
    <span class="n">solve</span><span class="o">-&gt;</span><span class="n">setCommand</span><span class="p">(</span><span class="s2">"&amp;Solve"</span><span class="p">);</span>
    <span class="o">*</span><span class="n">solve</span> <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculixCxxtools"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverCalculiX"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverElmer"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"FEM_SolverZ88"</span>
<span class="o">+</span>          <span class="o">&lt;&lt;</span> <span class="s2">"FEM_testButton"</span>
           <span class="o">&lt;&lt;</span> <span class="s2">"Separator"</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><b>Result</b>: You should have just successfully added a test button to a FEM workbench toolbar and menu. Now, you can <a href="../Compiling.html" title="Compiling">compile FreeCAD</a> and test your new button.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Related">Related</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li><a href="../Extend_FEM_Module.html" title="Extend FEM Module">Extend FEM Module</a></li>
<li><a href="../Onboarding_FEM_Devs.html" title="Onboarding FEM Devs">Onboarding FEM Devs</a></li></ul>
</div>
<!-- 
NewPP limit report
Cached time: 20250808115416
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc]
CPU time usage: 0.046 seconds
Real time usage: 0.058 seconds
Preprocessor visited node count: 202/1000000
Post&#8208;expand include size: 1675/2097152 bytes
Template argument size: 1318/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 5/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 6657/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   11.447      1 -total
 35.86%    4.105      5 Template:Code
 20.13%    2.304     10 Template:Incode
 19.38%    2.219      1 Template:TutorialInfo
 13.40%    1.534      1 Template:FileName
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:388291-0!canonical and timestamp 20250808115416 and revision id 1625300. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>