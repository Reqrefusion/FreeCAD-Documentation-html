<link href="../site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Scripted objects/tr</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="../id/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripted objects (1% translated)" lang="id" dir="ltr">Bahasa Indonesia</a></li>
<li><a href="../de/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--complete" title="Skriptgenerierte Objekte (85% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><a href="../Scripted_objects.html" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Scripted objects (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--stub" lang="tr" dir="ltr">T&uuml;rk&ccedil;e</span></li>
<li><a href="../es/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripted objects (5% translated)" lang="es" dir="ltr">espa&ntilde;ol</a></li>
<li><a href="../fr/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--complete" title="Objets cr&eacute;&eacute;s par script (99% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="../it/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--complete" title="Oggetti creati da script (97% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="../pl/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--complete" title="Obiekty tworzone skryptami (99% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="../pt/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripted objects (1% translated)" lang="pt" dir="ltr">portugu&ecirc;s</a></li>
<li><a href="../pt-br/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Objetos com Script (3% translated)" lang="pt-BR" dir="ltr">portugu&ecirc;s do Brasil</a></li>
<li><a href="../ro/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Obiecte create prin script-programare (8% translated)" lang="ro" dir="ltr">rom&acirc;n&#259;</a></li>
<li><a href="../fi/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripted objects (1% translated)" lang="fi" dir="ltr">suomi</a></li>
<li><a href="../sv/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Scripted objects (5% translated)" lang="sv" dir="ltr">svenska</a></li>
<li><a href="../cs/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="Skriptovan&eacute; objekty (5% translated)" lang="cs" dir="ltr">&#269;e&scaron;tina</a></li>
<li><a href="../ru/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--med" title="&#1055;&#1088;&#1086;&#1075;&#1088;&#1072;&#1084;&#1084;&#1080;&#1088;&#1091;&#1077;&#1084;&#1099;&#1077; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1099; (41% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li>
<li><a href="../zh-cn/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="&#33050;&#26412;&#21270;&#29289;&#20307; (4% translated)" lang="zh-Hans-CN" dir="ltr">&#20013;&#25991;&#65288;&#20013;&#22269;&#22823;&#38470;&#65289;</a></li>
<li><a href="../ja/Scripted_objects.html" class="mw-pt-progress mw-pt-progress--stub" title="&#12473;&#12463;&#12522;&#12503;&#12488;&#12395;&#12424;&#12427;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#29983;&#25104; (1% translated)" lang="ja" dir="ltr">&#26085;&#26412;&#35486;</a></li></ul></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="../Topological_data_scripting.html" title="Topological data scripting">Topological data scripting</a></div>
    <div style="margin: 4px 0; float: right;"><a href="../Scenegraph.html" title="Scenegraph">Scenegraph</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="../tr/Online_Help_Toc.html" title="Online Help Toc/tr">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Online_Help_Toc.svg" decoding="async" width="24" height="24"></span></span></div>
</div>
</div>
<div style="clear:right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none;"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Basic_example"><span class="tocnumber">2</span> <span class="toctext">Basic example</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Things_to_note"><span class="tocnumber">2.1</span> <span class="toctext">Things to note</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Other_more_complex_example"><span class="tocnumber">3</span> <span class="toctext">Other more complex example</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Making_objects_selectable"><span class="tocnumber">4</span> <span class="toctext">Making objects selectable</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Working_with_simple_shapes"><span class="tocnumber">5</span> <span class="toctext">Working with simple shapes</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Scenegraph_Structure"><span class="tocnumber">6</span> <span class="toctext">Scenegraph Structure</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Part_Design_scripted_objects"><span class="tocnumber">7</span> <span class="toctext">Part Design scripted objects</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Available_object_types"><span class="tocnumber">8</span> <span class="toctext">Available object types</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Available_methods"><span class="tocnumber">9</span> <span class="toctext">Available methods</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Available_properties"><span class="tocnumber">10</span> <span class="toctext">Available properties</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Property_attributes"><span class="tocnumber">10.1</span> <span class="toctext">Property attributes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Available_extensions"><span class="tocnumber">11</span> <span class="toctext">Available extensions</span></a></li>
</ul>
</div>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Besides the standard object types such as annotations, meshes and parts objects, FreeCAD also offers the amazing possibility to build 100% Python-scripted parametric objects, called <a href="../App_FeaturePython.html" title="App FeaturePython">Python Features</a>. Those objects will behave exactly as any other FreeCAD object, and are saved and restored automatically on file save/load.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>One particularity must be understood: For security reasons, FreeCAD files never carry any embedded code. The Python code that you write to create parametric objects is never saved inside a file. This means that if you open a file containing such an object on another machine, if that Python code is not available on that machine, the object won't be fully recreated. If you distribute such objects to others, you will need to distribute your Python script too, for example as a <a href="../Macros.html" title="Macros">Macro</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><b>Note</b>: It is possible to pack Python code inside a FreeCAD file using json serializing with an App::PropertyPythonObject, but that code can never directly be run, and therefore has little use for our purpose here.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><a href="../App_FeaturePython.html" title="App FeaturePython">Python Features</a> follow the same rule as all FreeCAD features: they are separated into App and GUI parts. The app part, the Document Object, defines the geometry of our object, while its GUI part, the View Provider Object, defines how the object will be drawn on screen. The View Provider Object, as any other FreeCAD feature, is only available when you run FreeCAD in its own GUI. There are several properties and methods available to build your object. Properties must be of any of the predefined properties types that FreeCAD offers, and will appear in the property view window, so they can be edited by the user. This way, FeaturePython objects are truly and totally parametric. You can define properties for the Object and its ViewObject separately.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Basic_example">Basic example</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The following sample can be found in the <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py">src/Mod/TemplatePyMod/FeaturePython.py</a> file, together with several other examples:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="sd">'''Examples for a feature class and its view provider.'''</span>

<span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Box</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Add some custom properties to our box feature'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Width"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Width of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Width</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Height"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Height of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Do something when a property has changed'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''Do something when doing a recomputation, this method is mandatory'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Recompute Python Box feature</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderBox</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Set this object to the proxy object of the actual view provider'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyColor"</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Color of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Color</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Setup the scene sub-graph of the view provider, this method is mandatory'''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoScale</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoBaseColor</span><span class="p">()</span>

        <span class="n">data</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoCube</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="p">,</span> <span class="s2">"Shaded"</span><span class="p">);</span>
        <span class="n">style</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
        <span class="n">style</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="p">,</span> <span class="s2">"Wireframe"</span><span class="p">);</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onChanged</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''If a property of the handled feature has changed we have the chance to handle this here'''</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="n">l</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Length"</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Width"</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Height"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">scaleFactor</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">h</span><span class="p">))</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Return a list of display modes.'''</span>
        <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modes</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the name of the default display mode. It must be defined in getDisplayModes.'''</span>
        <span class="k">return</span> <span class="s2">"Shaded"</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">'''Map the display mode defined in attach with those defined in getDisplayModes.\</span>
<span class="sd">                Since they have the same names nothing needs to be done. This method is optional'''</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Here we can do something when a single property got changed'''</span>
        <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Color"</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Color"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">rgb</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the icon in XPM format which will appear in the tree view. This method is\</span>
<span class="sd">                optional and if not defined a default icon is shown.'''</span>
        <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">            /* XPM */</span>
<span class="s2">            static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">            "16 16 6 1",</span>
<span class="s2">            "   c None",</span>
<span class="s2">            ".  c #141010",</span>
<span class="s2">            "+  c #615BD2",</span>
<span class="s2">            "@  c #C39D55",</span>
<span class="s2">            "#  c #000000",</span>
<span class="s2">            "$  c #57C355",</span>
<span class="s2">            "        ........",</span>
<span class="s2">            "   ......++..+..",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@  .++++++.",</span>
<span class="s2">            "  ..@@  .++..++.",</span>
<span class="s2">            "###@@@@ .++..++.",</span>
<span class="s2">            "##$.@@$#.++++++.",</span>
<span class="s2">            "#$#$.$$$........",</span>
<span class="s2">            "#$$#######      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            " #$#$$$$$#      ",</span>
<span class="s2">            "  ##$$$$$#      ",</span>
<span class="s2">            "   #######      "};</span>
<span class="s2">            """</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''When saving the document this object gets stored using Python's json module.\</span>
<span class="sd">                Since we have some un-serializable parts here -- the Coin stuff -- we must define this method\</span>
<span class="sd">                to return a tuple of all serializable objects or None.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="sd">'''When restoring the serialized object from document we have the chance to set some internals here.\</span>
<span class="sd">                Since no data were serialized nothing needs to be done here.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeBox</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">)</span>
    <span class="n">Box</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">ViewProviderBox</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>

<span class="n">makeBox</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h3><span class="mw-headline" id="Things_to_note">Things to note</span></h3>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>If your object relies on being recomputed as soon as it is created, you must do this manually in the <code>__init__</code> function as it is not called automatically. This example does not require it because the <code>onChanged</code> method of the <code>Box</code> class has the same effect as the <code>execute</code> function, but the examples below rely on being recomputed before anything is displayed in the 3D view. In the examples, this is done manually with <code>ActiveDocument.recompute()</code> but in more complex scenarios you need to decide where to recompute either the whole document or the FeaturePython object.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>This example produces a number of exception stack traces in the report view window. This is because the <code>onChanged</code> method of the <code>Box</code> class is called each time a property is added in <code>__init__</code>. When the first one is added, the Width and Height properties don't exist yet and so the attempt to access them fails.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>An explanation of <code>__getstate__</code> and <code>__setstate__</code> which have been replaced by <code>dumps</code> and <code>loads</code> is in the forum thread <a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=44009&amp;start=10#p377892">obj.Proxy.Type is a dict, not a string</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><code>obj.addProperty(...)</code> returns <code>obj</code>, so that the value of the property can be set on the same line:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Which is equivalent to:
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span> <span class="s2">"Length"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">,</span> <span class="s2">"Length of the box"</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">Length</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Other_more_complex_example">Other more complex example</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>This example makes use of the Part module to create an octahedron, then creates its <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Coin3D">Coin</a> representation with <a href="../Pivy.html" title="Pivy">Pivy</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>First is the Document object itself:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="kn">import</span> <span class="nn">pivy</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Octahedron</span><span class="p">:</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Add some custom properties to our box feature"</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Length"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Length of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Length</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Width"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Width of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Width</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Height"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span> <span class="s2">"Height of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span><span class="o">=</span><span class="mf">1.0</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"Part::PropertyPartShape"</span><span class="p">,</span><span class="s2">"Shape"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span> <span class="s2">"Shape of the octahedron"</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
     <span class="c1"># Define six vetices for the shape</span>
     <span class="n">v1</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v2</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v3</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v4</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">v5</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
     <span class="n">v6</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">Width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

     <span class="c1"># Make the wires/faces</span>
     <span class="n">f1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v5</span><span class="p">)</span>
     <span class="n">f5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v4</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f7</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">f8</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_face</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v6</span><span class="p">)</span>
     <span class="n">shell</span><span class="o">=</span><span class="n">Part</span><span class="o">.</span><span class="n">makeShell</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">,</span><span class="n">f3</span><span class="p">,</span><span class="n">f4</span><span class="p">,</span><span class="n">f5</span><span class="p">,</span><span class="n">f6</span><span class="p">,</span><span class="n">f7</span><span class="p">,</span><span class="n">f8</span><span class="p">])</span>
     <span class="n">solid</span><span class="o">=</span><span class="n">Part</span><span class="o">.</span><span class="n">makeSolid</span><span class="p">(</span><span class="n">shell</span><span class="p">)</span>
     <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">solid</span>

  <span class="c1"># helper mehod to create the faces</span>
  <span class="k">def</span> <span class="nf">make_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">):</span>
     <span class="n">wire</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makePolygon</span><span class="p">([</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">,</span><span class="n">v1</span><span class="p">])</span>
     <span class="n">face</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">Face</span><span class="p">(</span><span class="n">wire</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">face</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Then, we have the View Provider object, responsible for showing the object in the 3D scene:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">ViewProviderOctahedron</span><span class="p">:</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Set this object to the proxy object of the actual view provider"</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyColor"</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">,</span><span class="s2">"Color of the octahedron"</span><span class="p">)</span><span class="o">.</span><span class="n">Color</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

  <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Setup the scene sub-graph of the view provider, this method is mandatory"</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoScale</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoBaseColor</span><span class="p">()</span>

     <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoCoordinate3</span><span class="p">()</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoIndexedFaceSet</span><span class="p">()</span>

     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shaded</span><span class="p">,</span><span class="s2">"Shaded"</span><span class="p">);</span>
     <span class="n">style</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
     <span class="n">style</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">style</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="p">)</span>
     <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span><span class="p">,</span><span class="s2">"Wireframe"</span><span class="p">);</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">onChanged</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="s2">"Color"</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
     <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
     <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
     <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Shape"</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Shape"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">setNum</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">Vertexes</span><span class="p">:</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="n">cnt</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span><span class="n">i</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>
           <span class="n">cnt</span><span class="o">=</span><span class="n">cnt</span><span class="o">+</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">face</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
     <span class="s2">"Return a list of display modes."</span>
     <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
     <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
     <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
     <span class="k">return</span> <span class="n">modes</span>

  <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="s2">"Return the name of the default display mode. It must be defined in getDisplayModes."</span>
     <span class="k">return</span> <span class="s2">"Shaded"</span>

  <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
     <span class="k">return</span> <span class="n">mode</span>

  <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
     <span class="s2">"Here we can do something when a single property got changed"</span>
     <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintMessage</span><span class="p">(</span><span class="s2">"Change property: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
     <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"Color"</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"Color"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="o">.</span><span class="n">rgb</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

  <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">        /* XPM */</span>
<span class="s2">        static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">        "16 16 6 1",</span>
<span class="s2">        "    c None",</span>
<span class="s2">        ".   c #141010",</span>
<span class="s2">        "+   c #615BD2",</span>
<span class="s2">        "@   c #C39D55",</span>
<span class="s2">        "#   c #000000",</span>
<span class="s2">        "$   c #57C355",</span>
<span class="s2">        "        ........",</span>
<span class="s2">        "   ......++..+..",</span>
<span class="s2">        "   .@@@@.++..++.",</span>
<span class="s2">        "   .@@@@.++..++.",</span>
<span class="s2">        "   .@@  .++++++.",</span>
<span class="s2">        "  ..@@  .++..++.",</span>
<span class="s2">        "###@@@@ .++..++.",</span>
<span class="s2">        "##$.@@$#.++++++.",</span>
<span class="s2">        "#$#$.$$$........",</span>
<span class="s2">        "#$$#######      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        "#$$#$$$$$#      ",</span>
<span class="s2">        " #$#$$$$$#      ",</span>
<span class="s2">        "  ##$$$$$#      ",</span>
<span class="s2">        "   #######      "};</span>
<span class="s2">        """</span>

  <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="k">return</span> <span class="kc">None</span>

  <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
     <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Finally, once our object and its viewobject are defined, we just need to call them (The Octahedron class and viewprovider class code could be copied in the FreeCAD Python console directly):
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span><span class="s2">"Octahedron"</span><span class="p">)</span>
<span class="n">Octahedron</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">ViewProviderOctahedron</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Making_objects_selectable">Making objects selectable</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>If you want to make your object selectable, or at least part of it, by clicking on it in the viewport, you must include its coin geometry inside a SoFCSelection node. If your object has complex representation, with widgets, annotations, etc, you might want to include only a part of it in a SoFCSelection. Everything that is a SoFCSelection is constantly scanned by FreeCAD to detect selection/preselection, so it makes sense try not to overload it with unneeded scanning.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Once the parts of the scenegraph that are to be selectable are inside SoFCSelection nodes, you then need to provide two methods to handle the selection path. The selection path can take the form of a string giving the names of each element in the path, or of an array of scenegraph objects. The two methods are <code>getDetailPath</code>, which converts from a string path to an array of scenegraph objects, and <code>getElementPicked</code>, which takes an element which has been clicked on in the scenegraph and returns its string name (note, not its string path).
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Here is the Molecule example above, adapted to make the elements of the Molecule selectable:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Molecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Add two point properties '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span> <span class="ow">or</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="sd">''' Print the name of the property that has changed '''</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">''' Print a short message when doing a recomputation, this method is mandatory '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderMolecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="n">sep1</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSeparator</span><span class="p">()</span>
        <span class="n">sel1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="c1"># sel1.policy.setValue(coin.SoSelection.SHIFT)</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">ref</span><span class="p">()</span>
        <span class="n">sep1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sel1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoTranslation</span><span class="p">()</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="p">)</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSphere</span><span class="p">())</span>
        <span class="n">sep2</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSeparator</span><span class="p">()</span>
        <span class="n">sel2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">ref</span><span class="p">()</span>
        <span class="n">sep2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sel2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="o">=</span><span class="n">coin</span><span class="o">.</span><span class="n">SoTranslation</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="p">)</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">coin</span><span class="o">.</span><span class="n">SoSphere</span><span class="p">())</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">RootNode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sep1</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">RootNode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">sep2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateData</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel1</span> <span class="o">=</span> <span class="n">sel1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel2</span> <span class="o">=</span> <span class="n">sel2</span>

    <span class="k">def</span> <span class="nf">getDetailPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subname</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">append</span><span class="p">):</span>
        <span class="n">vobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span>
        <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">RootNode</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="p">)</span>

            <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">whichChild</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">sub</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">splitSubname</span><span class="p">(</span><span class="n">subname</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom1'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom2'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">getElementPicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">getPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom1'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom2'</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p1"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trl1</span><span class="o">.</span><span class="n">translation</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p2"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trl2</span><span class="o">.</span><span class="n">translation</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeMolecule</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Molecule"</span><span class="p">)</span>
    <span class="n">Molecule</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">ViewProviderMolecule</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Working_with_simple_shapes">Working with simple shapes</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>If your parametric object simply outputs a shape, you don't need to use a View Provider object. The shape will be displayed using FreeCAD's standard shape representation:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">FreeCADGui</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="kn">import</span> <span class="nn">Part</span>
<span class="k">class</span> <span class="nc">Line</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''"App two point properties" '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''"Print a short message when doing a recomputation, this method is mandatory" '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">)</span>
<span class="n">Line</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="o">.</span><span class="n">Proxy</span><span class="o">=</span><span class="mi">0</span> <span class="c1"># just set it to something different from None (this assignment is needed to run an internal notification)</span>
<span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Same code with use <b>ViewProviderLine</b>
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">FreeCAD</span> <span class="k">as</span> <span class="nn">App</span>
<span class="kn">import</span> <span class="nn">FreeCADGui</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span>
<span class="kn">import</span> <span class="nn">Part</span>

<span class="k">class</span> <span class="nc">Line</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
         <span class="sd">'''"App two point properties" '''</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
         <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">'''"Print a short message when doing a recomputation, this method is mandatory" '''</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeLine</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span><span class="n">fp</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">ViewProviderLine</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
      <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
      <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

   <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">''' Return the name of the default display mode. It must be defined in getDisplayModes. '''</span>
      <span class="k">return</span> <span class="s2">"Flat Lines"</span>

<span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"Part::FeaturePython"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">)</span>
<span class="n">Line</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">ViewProviderLine</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
<span class="n">App</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Scenegraph_Structure">Scenegraph Structure</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>You may have noticed that the examples above construct their scenegraphs in slightly different ways. Some use <code>obj.addDisplayMode(node, "modename")</code> while others use <code>obj.SwitchNode.getChild(x).addChild(y)</code>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Each feature in a FreeCAD document is based the following scenegraph structure:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">RootNode</span>
 \<span class="o">-</span> <span class="n">SwitchNode</span>
     \<span class="o">-</span> <span class="n">Shaded</span>
      <span class="o">-</span> <span class="n">Wireframe</span>
      <span class="o">-</span> <span class="n">etc</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The <code>SwitchNode</code> displays only one of its children, depending on which display mode is selection in FreeCAD.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The examples which use <code>addDisplayMode</code> are constructing their scenegraphs solely out of coin3d scenegraph elements. Under the covers, <code>addDisplayMode</code> adds a new child to the <code>SwitchNode</code>; the name of that node will match the display mode it was passed.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The examples which use <code>SwitchNode.getChild(x).addChild</code> also construct part of their geometry using functions from the Part Workbench, such as <code>fp.Shape = Part.makeLine(fp.p1,fp.p2)</code>. This constructs the different display mode scenegraphs under the <code>SwitchNode</code>; when we later come to add coin3d elements to the scenegraph, we need to add them to the existing display mode scenegraphs using <code>addChild</code> rather than creating a new child of the <code>SwitchNode</code>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>When using <code>addDisplayMode()</code> to add geometry to the scenegraph, each display mode should have its own node which is passed to <code>addDisplayMode()</code>; don't reuse the same node for this. Doing so will confuse the selection mechanism. It's okay if each display mode's node has the same geometry nodes added below it, just the root of each display mode needs to be distinct.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Here is the above molecule example, adapted to be drawn only with Coin3D scenegraph objects instead of using objects from the Part Workbench:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">import</span> <span class="nn">Part</span>
<span class="kn">from</span> <span class="nn">pivy</span> <span class="kn">import</span> <span class="n">coin</span>

<span class="k">class</span> <span class="nc">Molecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Add two point properties '''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p1"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"Start point"</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyVector"</span><span class="p">,</span><span class="s2">"p2"</span><span class="p">,</span><span class="s2">"Line"</span><span class="p">,</span><span class="s2">"End point"</span><span class="p">)</span><span class="o">.</span><span class="n">p2</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="sd">''' Print a short message when doing a recomputation, this method is mandatory '''</span>
        <span class="k">pass</span>

<span class="k">class</span> <span class="nc">ViewProviderMolecule</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">''' Set this object to the proxy object of the actual view provider '''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span> <span class="o">=</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">material</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoMaterial</span><span class="p">()</span>
        <span class="n">material</span><span class="o">.</span><span class="n">diffuseColor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">emissiveColor</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">drawStyle</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="p">()</span>
        <span class="n">drawStyle</span><span class="o">.</span><span class="n">pointSize</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">drawStyle</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoDrawStyle</span><span class="o">.</span><span class="n">LINES</span>
        <span class="n">wireframe</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">shaded</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wireframe</span> <span class="o">=</span> <span class="n">wireframe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shaded</span> <span class="o">=</span> <span class="n">shaded</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">coords</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoCoordinate3</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">drawStyle</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">material</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coords</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">drawStyle</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">material</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel1</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedPointSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p1</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">sel1</span> <span class="o">+=</span> <span class="n">p1</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel1</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel2</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedPointSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p2</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sel2</span> <span class="o">+=</span> <span class="n">p2</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel2</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">g</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoGroup</span><span class="p">()</span>
        <span class="n">sel3</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoFCSelection'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">sel3</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="s1">'EMISSIVE_DIFFUSE'</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">coin</span><span class="o">.</span><span class="n">SoType</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">'SoIndexedLineSet'</span><span class="p">)</span><span class="o">.</span><span class="n">createInstance</span><span class="p">()</span>
        <span class="n">p3</span><span class="o">.</span><span class="n">coordIndex</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">sel3</span> <span class="o">+=</span> <span class="n">p3</span>
        <span class="n">g</span> <span class="o">+=</span> <span class="n">sel3</span>
        <span class="n">wireframe</span> <span class="o">+=</span> <span class="n">g</span>
        <span class="n">shaded</span> <span class="o">+=</span> <span class="n">g</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="n">wireframe</span><span class="p">,</span> <span class="s1">'Wireframe'</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addDisplayMode</span><span class="p">(</span><span class="n">shaded</span><span class="p">,</span> <span class="s1">'Shaded'</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sel1</span> <span class="o">=</span> <span class="n">sel1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel2</span> <span class="o">=</span> <span class="n">sel2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sel3</span> <span class="o">=</span> <span class="n">sel3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateData</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Object</span><span class="p">,</span> <span class="s1">'p2'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDetailPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subname</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">append</span><span class="p">):</span>
        <span class="n">vobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ViewObject</span>
        <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">RootNode</span><span class="p">)</span>
            <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="p">)</span>

            <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">whichChild</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span>
            <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintWarning</span><span class="p">(</span><span class="s2">"getDetailPath: mode </span><span class="si">{}</span><span class="s2"> is active</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">vobj</span><span class="o">.</span><span class="n">SwitchNode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
                <span class="n">sub</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">splitSubname</span><span class="p">(</span><span class="n">subname</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom1'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Atom2'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">sub</span> <span class="o">==</span> <span class="s1">'Line'</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel3</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mode</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">getElementPicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pp</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">getPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom1'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Atom2'</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">findNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sel3</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">'Line'</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="s2">"If a property of the handled feature has changed we have the chance to handle this here"</span>
        <span class="c1"># fp is the handled feature, prop is the name of the property that has changed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">constructed</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p1"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p1"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">prop</span> <span class="o">==</span> <span class="s2">"p2"</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">getPropertyByName</span><span class="p">(</span><span class="s2">"p2"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">set1Value</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">'Wireframe'</span><span class="p">,</span> <span class="s1">'Shaded'</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'Shaded'</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">makeMolecule</span><span class="p">():</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">newDocument</span><span class="p">()</span>
    <span class="n">a</span><span class="o">=</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span><span class="s2">"Molecule"</span><span class="p">)</span>
    <span class="n">Molecule</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">b</span><span class="o">=</span><span class="n">ViewProviderMolecule</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
    <span class="n">a</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">recompute</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>

<span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">makeMolecule</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Part_Design_scripted_objects">Part Design scripted objects</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>When making scripted objects in PartDesign the process is similar to the scripted objects discussed above, but with a few additional considerations. We must handle 2 shape properties, one for the shape we see in the 3D view and another for the shape used by the pattern tools, such as polar pattern features. The object shapes also needs to be fused to any existing material already in the Body (or cut from it in the case of Subtractive features). And we must account for the placement and attachment of our objects a little bit differently.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>PartDesign scripted solid object features should be based on either PartDesign::FeaturePython, PartDesign::FeatureAdditivePython, or PartDesign::FeatureSubtractivePython rather than Part::FeaturePython. Only the Additive and Subtractive variants can be used in pattern features, and if based on Part::FeaturePython when the user drops the object into a PartDesign Body it becomes a BaseFeature rather than being treated by the Body as a native PartDesign object. Note: all of these are expected to be solids, so if you are making a non-solid feature it should be based on Part::FeaturePython or else the next feature in the tree will attempt to fuse to as a solid and it will fail.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Here is a simple example of making a Tube primitive, similar to the Tube primitive in Part Workbench except this one will be a PartDesign solid feature object.  For this we will 2 separate files: pdtube.FCMacro and pdtube.py. The .FCMacro file will be executed by the user to create the object. The .py file will hold the class definitions, imported by the .FCMacro. The reason for doing it this way is to maintain the parametric nature of the object after restarting FreeCAD and opening a document containing one of our Tubes.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>First, the class definition file:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#classes should go in pdtube.py</span>
<span class="kn">import</span> <span class="nn">FreeCAD</span><span class="o">,</span> <span class="nn">FreeCADGui</span><span class="o">,</span> <span class="nn">Part</span>
<span class="k">class</span> <span class="nc">PDTube</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Radius1"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Radius1"</span><span class="p">)</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Radius2"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Radius2"</span><span class="p">)</span><span class="o">.</span><span class="n">Radius2</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyLength"</span><span class="p">,</span><span class="s2">"Height"</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">,</span><span class="s2">"Height of tube"</span><span class="p">)</span><span class="o">.</span><span class="n">Height</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">makeAttachable</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">makeAttachable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">FreeCAD</span><span class="o">.</span><span class="n">Version</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addExtension</span><span class="p">(</span><span class="s1">'Part::AttachExtensionPython'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">addExtension</span><span class="p">(</span><span class="s1">'Part::AttachExtensionPython'</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">setEditorMode</span><span class="p">(</span><span class="s1">'Placement'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#non-readonly non-hidden</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fp</span><span class="p">):</span>
        <span class="n">outer_cylinder</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeCylinder</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="p">)</span>
        <span class="n">inner_cylinder</span> <span class="o">=</span> <span class="n">Part</span><span class="o">.</span><span class="n">makeCylinder</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">Height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">==</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">:</span> <span class="c1">#just make cylinder</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">outer_cylinder</span>
        <span class="k">elif</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius1</span> <span class="o">&lt;</span> <span class="n">fp</span><span class="o">.</span><span class="n">Radius2</span><span class="p">:</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">outer_cylinder</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">inner_cylinder</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1">#invert rather than error out</span>
            <span class="n">tube_shape</span> <span class="o">=</span> <span class="n">inner_cylinder</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">outer_cylinder</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">"positionBySupport"</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">makeAttachable</span><span class="p">(</span><span class="n">fp</span><span class="p">)</span>
        <span class="n">fp</span><span class="o">.</span><span class="n">positionBySupport</span><span class="p">()</span>
        <span class="n">tube_shape</span><span class="o">.</span><span class="n">Placement</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">Placement</span>

        <span class="c1">#BaseFeature (shape property of type Part::PropertyPartShape) is provided for us</span>
        <span class="c1">#with the PartDesign::FeaturePython and related classes, but it might be empty</span>
        <span class="c1">#if our object is the first object in the tree.  it's a good idea to check</span>
        <span class="c1">#for its existence in case we want to make type Part::FeaturePython, which won't have it</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">"BaseFeature"</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">"Subtractive"</span> <span class="ow">in</span> <span class="n">fp</span><span class="o">.</span><span class="n">TypeId</span><span class="p">:</span>
                <span class="n">full_shape</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">tube_shape</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">full_shape</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">BaseFeature</span><span class="o">.</span><span class="n">Shape</span><span class="o">.</span><span class="n">fuse</span><span class="p">(</span><span class="n">tube_shape</span><span class="p">)</span>
            <span class="n">full_shape</span><span class="o">.</span><span class="n">transformShape</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span><span class="o">.</span><span class="n">toMatrix</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#borrowed from gears workbench</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">full_shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">Shape</span> <span class="o">=</span> <span class="n">tube_shape</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="s2">"AddSubShape"</span><span class="p">):</span> <span class="c1">#PartDesign::FeatureAdditivePython and</span>
                                      <span class="c1">#PartDesign::FeatureSubtractivePython have this</span>
                                      <span class="c1">#property but PartDesign::FeaturePython does not</span>
                                      <span class="c1">#It is the shape used for copying in pattern features</span>
                                      <span class="c1">#for example in making a polar pattern</span>
            <span class="n">tube_shape</span><span class="o">.</span><span class="n">transformShape</span><span class="p">(</span><span class="n">fp</span><span class="o">.</span><span class="n">Placement</span><span class="o">.</span><span class="n">inverse</span><span class="p">()</span><span class="o">.</span><span class="n">toMatrix</span><span class="p">(),</span> <span class="kc">True</span><span class="p">)</span>
            <span class="n">fp</span><span class="o">.</span><span class="n">AddSubShape</span> <span class="o">=</span> <span class="n">tube_shape</span>

<span class="k">class</span> <span class="nc">PDTubeVP</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Set this object to the proxy object of the actual view provider'''</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">Proxy</span> <span class="o">=</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">attach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vobj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vobj</span> <span class="o">=</span> <span class="n">vobj</span>

    <span class="k">def</span> <span class="nf">updateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''If a property of the handled feature has changed we have the chance to handle this here'''</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getDisplayModes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">'''Return a list of display modes.'''</span>
        <span class="n">modes</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Flat Lines"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Shaded"</span><span class="p">)</span>
        <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"Wireframe"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modes</span>

    <span class="k">def</span> <span class="nf">getDefaultDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the name of the default display mode. It must be defined in getDisplayModes.'''</span>
        <span class="k">return</span> <span class="s2">"Flat Lines"</span>

    <span class="k">def</span> <span class="nf">setDisplayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mode</span><span class="p">):</span>
        <span class="sd">'''Map the display mode defined in attach with those defined in getDisplayModes.\</span>
<span class="sd">                Since they have the same names nothing needs to be done. This method is optional'''</span>
        <span class="k">return</span> <span class="n">mode</span>

    <span class="k">def</span> <span class="nf">onChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">'''Here we can do something when a single property got changed'''</span>
        <span class="c1">#FreeCAD.Console.PrintMessage("Change property: " + str(prop) + "\n")</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">getIcon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''Return the icon in XPM format which will appear in the tree view. This method is\</span>
<span class="sd">                optional and if not defined a default icon is shown.'''</span>
        <span class="k">return</span> <span class="s2">"""</span>
<span class="s2">            /* XPM */</span>
<span class="s2">            static const char * ViewProviderBox_xpm[] = {</span>
<span class="s2">            "16 16 6 1",</span>
<span class="s2">            "   c None",</span>
<span class="s2">            ".  c #141010",</span>
<span class="s2">            "+  c #615BD2",</span>
<span class="s2">            "@  c #C39D55",</span>
<span class="s2">            "#  c #000000",</span>
<span class="s2">            "$  c #57C355",</span>
<span class="s2">            "        ........",</span>
<span class="s2">            "   ......++..+..",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@@@.++..++.",</span>
<span class="s2">            "   .@@  .++++++.",</span>
<span class="s2">            "  ..@@  .++..++.",</span>
<span class="s2">            "###@@@@ .++..++.",</span>
<span class="s2">            "##$.@@$#.++++++.",</span>
<span class="s2">            "#$#$.$$$........",</span>
<span class="s2">            "#$$#######      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            "#$$#$$$$$#      ",</span>
<span class="s2">            " #$#$$$$$#      ",</span>
<span class="s2">            "  ##$$$$$#      ",</span>
<span class="s2">            "   #######      "};</span>
<span class="s2">            """</span>

    <span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''When saving the document this object gets stored using Python's json module.\</span>
<span class="sd">                Since we have some un-serializable parts here -- the Coin stuff -- we must define this method\</span>
<span class="sd">                to return a tuple of all serializable objects or None.'''</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="sd">'''When restoring the serialized object from document we have the chance to set some internals here.\</span>
<span class="sd">                Since no data were serialized nothing needs to be done here.'''</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>And now the macro file to create the object:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1">#pdtube.FCMacro</span>
<span class="kn">import</span> <span class="nn">pdtube</span>
<span class="c1">#above line needed if the class definitions above are place in another file: PDTube.py</span>
<span class="c1">#this is needed if the tube object is to remain parametric after restarting FreeCAD and loading</span>
<span class="c1">#a document containing the object</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">ActiveView</span><span class="o">.</span><span class="n">getActiveObject</span><span class="p">(</span><span class="s2">"pdbody"</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">FreeCAD</span><span class="o">.</span><span class="n">Console</span><span class="o">.</span><span class="n">PrintError</span><span class="p">(</span><span class="s2">"No active body.</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">PySide</span> <span class="kn">import</span> <span class="n">QtGui</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">FreeCADGui</span><span class="o">.</span><span class="n">getMainWindow</span><span class="p">()</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Additive"</span><span class="p">,</span><span class="s2">"Subtractive"</span><span class="p">,</span><span class="s2">"Neither additive nor subtractive"</span><span class="p">]</span>
    <span class="n">item</span><span class="p">,</span><span class="n">ok</span> <span class="o">=</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QInputDialog</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="n">window</span><span class="p">,</span><span class="s2">"Select tube type"</span><span class="p">,</span><span class="s2">"Select whether you want additive, subtractive, or neither:"</span><span class="p">,</span><span class="n">items</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeatureAdditivePython"</span>
        <span class="k">elif</span> <span class="n">item</span> <span class="o">==</span> <span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeatureSubtractivePython"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">className</span> <span class="o">=</span> <span class="s2">"PartDesign::FeaturePython"</span> <span class="c1">#not usable in pattern features, such as polar pattern</span>

        <span class="n">tube</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="n">className</span><span class="p">,</span><span class="s2">"Tube"</span><span class="p">)</span>
        <span class="n">pdtube</span><span class="o">.</span><span class="n">PDTube</span><span class="p">(</span><span class="n">tube</span><span class="p">)</span>
        <span class="n">pdtube</span><span class="o">.</span><span class="n">PDTubeVP</span><span class="p">(</span><span class="n">tube</span><span class="o">.</span><span class="n">ViewObject</span><span class="p">)</span>
        <span class="n">body</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="n">tube</span><span class="p">)</span> <span class="c1">#optionally we can also use body.insertObject() for placing at particular place in tree</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Available_object_types">Available object types</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The object types you can create with <code>FreeCAD.ActiveDocument.addObject()</code> depend on the loaded modules. After loading all internal workbenches a complete list can be obtained with <code>FreeCAD.ActiveDocument.supportedTypes()</code>. Only object types with a name ending in <code>Python</code> can be used for scripted objects. These are listed here (for FreeCAD v1.0):
</p>
</div>
<ul><li><code>App::DocumentObjectGroupPython</code></li>
<li><code>App::FeaturePython</code></li>
<li><code>App::GeometryPython</code></li>
<li><code>App::LinkElementPython</code></li>
<li><code>App::LinkGroupPython</code></li>
<li><code>App::LinkPython</code></li>
<li><code>App::MaterialObjectPython</code></li>
<li><code>App::PlacementPython</code></li>
<li><code>Fem::ConstraintPython</code></li>
<li><code>Fem::FeaturePython</code></li>
<li><code>Fem::FemAnalysisPython</code></li>
<li><code>Fem::FemMeshObjectPython</code></li>
<li><code>Fem::FemResultObjectPython</code></li>
<li><code>Fem::FemSolverObjectPython</code></li>
<li><code>Measure::MeasurePython</code></li>
<li><code>Mesh::FeaturePython</code></li>
<li><code>Part::CustomFeaturePython</code></li>
<li><code>Part::FeaturePython</code></li>
<li><code>Part::Part2DObjectPython</code></li>
<li><code>PartDesign::FeatureAdditivePython</code></li>
<li><code>PartDesign::FeatureAddSubPython</code></li>
<li><code>PartDesign::FeaturePython</code></li>
<li><code>PartDesign::FeatureSubtractivePython</code></li>
<li><code>PartDesign::SubShapeBinderPython</code></li>
<li><code>Path::FeatureAreaPython</code></li>
<li><code>Path::FeatureAreaViewPython</code></li>
<li><code>Path::FeatureCompoundPython</code></li>
<li><code>Path::FeaturePython</code></li>
<li><code>Path::FeatureShapePython</code></li>
<li><code>Points::FeaturePython</code></li>
<li><code>Sketcher::SketchObjectPython</code></li>
<li><code>Spreadsheet::SheetPython</code></li>
<li><code>TechDraw::DrawBrokenViewPython</code></li>
<li><code>TechDraw::DrawComplexSectionPython</code></li>
<li><code>TechDraw::DrawLeaderLinePython</code></li>
<li><code>TechDraw::DrawPagePython</code></li>
<li><code>TechDraw::DrawRichAnnoPython</code></li>
<li><code>TechDraw::DrawTemplatePython</code></li>
<li><code>TechDraw::DrawTilePython</code></li>
<li><code>TechDraw::DrawTileWeldPython</code></li>
<li><code>TechDraw::DrawViewPartPython</code></li>
<li><code>TechDraw::DrawViewPython</code></li>
<li><code>TechDraw::DrawViewSectionPython</code></li>
<li><code>TechDraw::DrawViewSymbolPython</code></li>
<li><code>TechDraw::DrawWeldSymbolPython</code></li></ul>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Available_methods">Available methods</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>See <a href="../FeaturePython_methods.html" title="FeaturePython methods">FeaturePython methods</a> for the complete reference.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Available_properties">Available properties</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Properties are the true building blocks of FeaturePython objects. Through them, you will be able to interact and modify your object. After creating a new FeaturePython object in your document, you can get a list of the available properties:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">FreeCAD</span><span class="o">.</span><span class="n">ActiveDocument</span><span class="o">.</span><span class="n">addObject</span><span class="p">(</span><span class="s2">"App::FeaturePython"</span><span class="p">,</span> <span class="s2">"Box"</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">supportedProperties</span><span class="p">()</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>See <a href="../FeaturePython_Custom_Properties.html" title="FeaturePython Custom Properties">FeaturePython Custom Properties</a> for an overview.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>When adding properties to your custom objects, take care of this:
</p>
<ul><li>Do not use characters <code>&lt;</code> or <code>&gt;</code> in the properties descriptions (that would break the xml pieces in the .FCStd file).</li>
<li>Properties are stored alphabetically in a .FCStd file. If you have a shape in your properties, any property whose name comes after "Shape" in alphabetic order, will be loaded AFTER the shape, which can cause strange behaviors.</li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The properties are defined in the <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/App/PropertyStandard.h">PropertyStandard C++ header file</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h3><span class="mw-headline" id="Property_attributes">Property attributes</span></h3>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>By default properties can be changed by the user, but it is possible to make properties read-only, for instance if one wants to show the result of a method. It is also possible to hide a property. These attributes can be set using:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">setEditorMode</span><span class="p">(</span><span class="s2">"MyPropertyName"</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Where mode can have these values:
</p>
<pre> 0 -- default mode, read and write
 1 -- read-only
 2 -- hidden
 3 -- read-only and hidden
</pre>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The attributes can also be set using a list of strings, e.g. <code>obj.setEditorMode("Placement", ["ReadOnly", "Hidden"])</code>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Attributes set using <code>setEditorMode</code> can be removed by the user. See <a href="../Property_editor.html#Context_menu" title="Property editor">Property editor</a>. Note that read-only properties can still be changed from Python.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>You can also set these, and more, attributes directly with the <code>addProperty</code> function. Attributes set with that function cannot be changed by the user. An interesting possibility is to mark a property as an output property. This way FreeCAD won't mark the object as touched when changing it (so no need to recompute).
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Example of output property (see also <a rel="nofollow" class="external free" href="https://forum.freecad.org/viewtopic.php?t=24928">https://forum.freecad.org/viewtopic.php?t=24928</a>):
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The attributes that can be set with <code>addProperty</code> are listed below. Multiple attributes can be set by adding values.
</p>
<pre>  0 -- Prop_None, No special property attribute
  1 -- Prop_ReadOnly, Property is read-only in the editor
  2 -- Prop_Transient, Property won't be saved to file
  4 -- Prop_Hidden, Property won't appear in the editor
  8 -- Prop_Output, Modified property doesn't touch its parent container
 16 -- Prop_NoRecompute, Modified property doesn't touch its container for recompute
 32 -- Prop_NoPersist, Property won't be saved to file at all
</pre>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The property attributes are defined in the <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/App/PropertyContainer.h">PropertyContainer C++ header file</a>.
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>For <code>Prop_ReadOnly</code> and <code>Prop_Hidden</code> the <code>addProperty</code> function has boolean arguments as well:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Which is equivalent to:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="s2">"App::PropertyString"</span><span class="p">,</span> <span class="s2">"MyCustomProperty"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p><span style="font-size:small;"><a href="../Release_notes_1.0.html" title="Release notes 1.0">introduced in 1.0</a></span>: The full signature of the function is:
</p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="n">addProperty</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">attr</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hidden</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">enum_vals</span><span class="o">=</span><span class="p">[])</span>
</pre></div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<ul><li><code>type</code>: Property type.</li>
<li><code>name</code>: Property name.</li>
<li><code>group</code>: Property subsection (used in the <a href="../Property_editor.html" title="Property editor">Property editor</a>).</li>
<li><code>doc</code>: Tooltip (idem).</li>
<li><code>attr</code>: Attribute, see above.</li>
<li><code>read_only</code>: See above.</li>
<li><code>hidden</code>: See above.</li>
<li><code>enum_vals</code>: Enumeration values (list of string), only relevant if type is <code>"App::PropertyEnumeration"</code>.</li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<h2><span class="mw-headline" id="Available_extensions">Available extensions</span></h2>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>The list of available extensions can be obtained with <code>grep -RI EXTENSION_PROPERTY_SOURCE_TEMPLATE</code> in the repository of the source code and is given here (for FreeCAD v0.21).
</p>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>For objects:
</p>
</div>
<ul><li><code>App::GeoFeatureGroupExtensionPython</code></li>
<li><code>App::GroupExtensionPython</code></li>
<li><code>App::LinkBaseExtensionPython</code></li>
<li><code>App::LinkExtensionPython</code></li>
<li><code>App::OriginGroupExtensionPython</code></li>
<li><code>Part::AttachExtensionPython</code></li>
<li><code>TechDraw::CosmeticExtensionPython</code></li></ul>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>For view objects:
</p>
</div>
<ul><li><code>Gui::ViewProviderExtensionPython</code></li>
<li><code>Gui::ViewProviderGeoFeatureGroupExtensionPython</code></li>
<li><code>Gui::ViewProviderGroupExtensionPython</code></li>
<li><code>Gui::ViewProviderOriginGroupExtensionPython</code></li>
<li><code>PartGui::ViewProviderAttachExtensionPython</code></li>
<li><code>PartGui::ViewProviderSplineExtensionPython</code></li></ul>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>There exist other extensions but they do not work as-is:
</p>
</div>
<ul><li><code>App::ExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderCosmeticExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderDrawingViewExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderPageExtensionPython</code></li>
<li><code>TechDrawGui::ViewProviderTemplateExtensionPython</code></li></ul>
<p><span id="Further_information"></span>
</p>
<div class="mw-translate-fuzzy">
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> PySide/tr</div>
    <div style="margin: 4px 0; float: right;">Embedding FreeCAD/tr <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="../tr/Online_Help_Toc.html" title="Online Help Toc/tr">&#304;ndeks</a> <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Online_Help_Toc.svg" decoding="async" width="24" height="24"></span></span></div>
</div>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Additional pages:
</p>
<ul><li><a href="../Scripted_objects_saving_attributes.html" title="Scripted objects saving attributes">Scripted objects saving attributes</a></li>
<li><a href="../Scripted_objects_migration.html" title="Scripted objects migration">Scripted objects migration</a></li>
<li><a href="../Scripted_objects_with_attachment.html" title="Scripted objects with attachment">Scripted objects with attachment</a></li>
<li><a href="../Viewprovider.html" title="Viewprovider">Viewproviders</a></li></ul>
</div>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>Interesting forum threads about scripted objects:
</p>
</div>
<ul><li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=22&amp;t=13740">Python object attributes lost at load</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?t=12139">New FeaturePython is grey</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=44009">Explanation on dumps and loads</a>, <a rel="nofollow" class="external text" href="https://docs.python.org/3/library/pickle.html#object.__getstate__">official documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=18&amp;t=13460&amp;start=20#p109709">Eigenmode frequency always 0?</a></li>
<li><a rel="nofollow" class="external text" href="https://forum.freecad.org/viewtopic.php?f=22&amp;t=21330">how to implement python feature's setEdit properly?</a></li></ul>
<div lang="en" dir="ltr" class="mw-content-ltr">
<p>In addition to the examples presented here have a look at FreeCAD source code <a rel="nofollow" class="external text" href="https://github.com/FreeCAD/FreeCAD/blob/master/src/Mod/TemplatePyMod/FeaturePython.py">src/Mod/TemplatePyMod/FeaturePython.py</a> for more examples.
</p>
</div>
<p><br>
</p>
<div lang="en" dir="ltr" class="mw-content-ltr">
<div class="docnav" style="background-color: #ececef; border: 1px solid #a2a9b1; padding: 2px 10px; margin: 10px 0; line-height: 1; clear: both; overflow: hidden;">
    <div style="margin: 4px 0; float: left;"><span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-left.svg" decoding="async" width="16" height="16"></span></span> <a href="../Topological_data_scripting.html" title="Topological data scripting">Topological data scripting</a></div>
    <div style="margin: 4px 0; float: right;"><a href="../Scenegraph.html" title="Scenegraph">Scenegraph</a>
 <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Arrow-right.svg" decoding="async" width="16" height="16"></span></span></div>
    <div style="text-align:center"><a href="../tr/Online_Help_Toc.html" title="Online Help Toc/tr">Index</a> <span class="mw-default-size" typeof="mw:File"><span><img src="../File/Online_Help_Toc.svg" decoding="async" width="24" height="24"></span></span></div>
</div>
</div>
<div class="NavFrame" style="margin: 0px; text-align: center; border-collapse: collapse; font-size: 100%; border-top-style: double; border-top-style: 1px; clear:both;">
    <div class="NavHead mw-collapsible mw-collapsed" style="margin: 1px; font-weight: normal; background-color: #fefefe;"><span typeof="mw:File"><a href="../File/Power_user_hub.png" class="mw-file-description"><img src="../File/Power_user_hub.png" decoding="async" width="24" height="24"></a></span> <a href="../tr/Power_users_hub.html" title="Power users hub/tr">Power user documentation</a>
        <div class="NavContent mw-collapsible-content" style="margin: 10px; border: 1px solid #aaaaaa; text-align: left; border-collapse: collapse; font-weight: normal; font-size: 100%; clear:both; margin-top: 1px; background-color: #fefefe;">
<ul><li><b>FreeCAD scripting:</b> <a href="../tr/Python.html" title="Python/tr">Python</a>, <a href="../tr/Introduction_to_Python.html" title="Introduction to Python/tr">Introduction to Python</a>, <a href="../tr/Python_scripting_tutorial.html" title="Python scripting tutorial/tr">Python scripting tutorial</a>, <a href="../tr/FreeCAD_Scripting_Basics.html" title="FreeCAD Scripting Basics/tr">FreeCAD Scripting Basics</a></li></ul>
<hr>
<ul><li><b>Modules:</b> <a href="../tr/Builtin_modules.html" title="Builtin modules/tr">Builtin modules</a>, <a href="../index.php?title=Units/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Units/tr (page does not exist)">Units</a>, <a href="../index.php?title=Quantity/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Quantity/tr (page does not exist)">Quantity</a></li>
<li><b>Workbenches:</b> <a href="../index.php?title=Workbench_creation/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Workbench creation/tr (page does not exist)">Workbench creation</a>, <a href="../tr/Gui_Command.html" title="Gui Command/tr">Gui Commands</a>, <a href="../tr/Command.html" title="Command/tr">Commands</a>, <a href="../tr/Installing_more_workbenches.html" title="Installing more workbenches/tr">Installing more workbenches</a></li>
<li><b>Meshes and Parts:</b> <a href="../tr/Mesh_Scripting.html" title="Mesh Scripting/tr">Mesh Scripting</a>, <a href="../tr/Topological_data_scripting.html" title="Topological data scripting/tr">Topological data scripting</a>, <a href="../tr/Mesh_to_Part.html" title="Mesh to Part/tr">Mesh to Part</a>, <a href="../tr/PythonOCC.html" title="PythonOCC/tr">PythonOCC</a></li></ul>
<hr>
<ul><li><b>Parametric objects:</b> <a class="mw-selflink selflink">Scripted objects</a>, <a href="../index.php?title=Viewprovider/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Viewprovider/tr (page does not exist)">Viewproviders</a> <small>(<a href="../index.php?title=Custom_icon_in_tree_view/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Custom icon in tree view/tr (page does not exist)">Custom icon in tree view</a>)</small></li>
<li><b>Scenegraph:</b> <a href="../tr/Scenegraph.html" title="Scenegraph/tr">Coin (Inventor) scenegraph</a>, <a href="../tr/Pivy.html" title="Pivy/tr">Pivy</a></li>
<li><b>Graphical interface:</b> <a href="../index.php?title=Interface_creation/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Interface creation/tr (page does not exist)">Interface creation</a>, <a href="../tr/Dialog_creation.html" title="Dialog creation/tr">Interface creation completely in Python</a> <small>(<a href="../index.php?title=Dialog_creation_with_various_widgets/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation with various widgets/tr (page does not exist)">1</a>, <a href="../index.php?title=Dialog_creation_reading_and_writing_files/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation reading and writing files/tr (page does not exist)">2</a>, <a href="../index.php?title=Dialog_creation_setting_colors/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation setting colors/tr (page does not exist)">3</a>, <a href="../index.php?title=Dialog_creation_image_and_animated_GIF/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Dialog creation image and animated GIF/tr (page does not exist)">4</a>, <a href="../index.php?title=PySide_usage_snippets/tr&amp;action=edit&amp;redlink=1.html" class="new" title="PySide usage snippets/tr (page does not exist)">5</a>)</small>, <a href="../tr/PySide.html" title="PySide/tr">PySide</a>, PySide examples <a href="../index.php?title=PySide_Beginner_Examples/tr&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Beginner Examples/tr (page does not exist)">beginner</a>, <a href="../index.php?title=PySide_Intermediate_Examples/tr&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Intermediate Examples/tr (page does not exist)">intermediate</a>, <a href="../index.php?title=PySide_Advanced_Examples/tr&amp;action=edit&amp;redlink=1.html" class="new" title="PySide Advanced Examples/tr (page does not exist)">advanced</a></li>
<li><b>Macros:</b> <a href="../tr/Macros.html" title="Macros/tr">Macros</a>, <a href="../tr/How_to_install_macros.html" title="How to install macros/tr">How to install macros</a></li>
<li><b>Embedding:</b> <a href="../tr/Embedding_FreeCAD.html" title="Embedding FreeCAD/tr">Embedding FreeCAD</a>, <a href="../tr/Embedding_FreeCADGui.html" title="Embedding FreeCADGui/tr">Embedding FreeCADGui</a></li></ul>
<hr>
<ul><li><b>Other:</b> <a href="../index.php?title=Expressions/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Expressions/tr (page does not exist)">Expressions</a>, <a href="../tr/Code_snippets.html" title="Code snippets/tr">Code snippets</a>, <a href="../tr/Line_drawing_function.html" title="Line drawing function/tr">Line drawing function</a>, <a href="../tr/FreeCAD_vector_math_library.html" title="FreeCAD vector math library/tr">FreeCAD vector math library</a> <small>(deprecated)</small></li></ul>
<hr>
<ul><li><b>Hubs:</b> <a href="../tr/User_hub.html" title="User hub/tr">User hub</a>, <a href="../tr/Power_users_hub.html" title="Power users hub/tr">Power users hub</a>, <a href="../index.php?title=Developer_hub/tr&amp;action=edit&amp;redlink=1.html" class="new" title="Developer hub/tr (page does not exist)">Developer hub</a></li></ul></div>
    </div></div>
<!-- 
NewPP limit report
Cached time: 20250524064732
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc, no&#8208;toc&#8208;conversion]
CPU time usage: 0.184 seconds
Real time usage: 0.203 seconds
Preprocessor visited node count: 1172/1000000
Post&#8208;expand include size: 14379/2097152 bytes
Template argument size: 33514/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 19/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 136505/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   22.943      1 -total
 23.15%    5.312     19 Template:Code
 20.77%    4.766      1 Template:Powerdocnavi/tr
 15.25%    3.499    114 Template:Incode
  5.92%    1.358      1 Template:Navigation_menu_2
  5.20%    1.193      2 Template:Docnav
  4.22%    0.969      1 Template:Docnav/tr
  3.52%    0.808      1 Template:Version
  2.13%    0.488      1 Template:TOCright
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:35832-0!canonical and timestamp 20250524064732 and revision id 1586795. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="../site.js"></script>