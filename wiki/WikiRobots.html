<link href="site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">WikiRobots</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="de/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="WikiRoboter (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="en" dir="ltr">English</span></li>
<li><a href="fr/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="WikiRobots (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="it/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="WikiRobots (100% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="pl/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="Robot Wiki (100% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="ru/WikiRobots.html" class="mw-pt-progress mw-pt-progress--complete" title="WikiRobots (100% translated)" lang="ru" dir="ltr">&#1088;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;</a></li></ul></div>
<div id="itsfree" style="text-align:center;color:black;background:#FDE0A8;margin:1em 7em;padding:0.5em 2em;border:2px solid #FF5706;">Robots are intrinsically dangerous as they can automatically do a lot of damage. Use with extreme care!</div>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>Repetitive tasks can be automated using robots or bots, i.e. software programs operating on the wiki by themselves.
</p><p>The natural and most commonly used robots for wiki sites are provided by MediaWiki, under the package name Pywikibot. See <a class="external text" href="http://www.mediawiki.org/wiki/Manual:Pywikibot">Manual:Pywikibot</a> for the full information.
</p><p>In a nutshell, Pywikibot is a collection of Python scripts able to use the native wiki API to act on wiki sites. To see the API list for the FreeCAD wiki, visit <a rel="nofollow" class="external free" href="https://wiki.freecad.org/api.php">https://wiki.freecad.org/api.php</a>
</p><p>In order to use Pywikibot, you need to:
</p>
<ol><li>install the Pywikibot package</li>
<li>configure Pywikibot to work on the FreeCAD Wiki</li>
<li>launch the scripts you need for the task at hand</li></ol>
<p>There is a wealth of information on how to install, configure and use Pywikibot. However, please be aware that this information, although useful, can be misleading, since it mixes instructions related to two different Pywikibot codebases, and different versions of the Pywikibot scripts collection.
</p><p>In the following, you will find the basic instructions to set up and use Pywikibot on the FreeCAD wiki. This will allow you to perform the most common tasks. For advanced usage, refer to the <a class="external text" href="http://www.mediawiki.org/wiki/Manual:Pywikibot">Manual:Pywikibot</a>, and to the Python source code.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Go to <a rel="nofollow" class="external free" href="http://tools.wmflabs.org/pywikibot/">http://tools.wmflabs.org/pywikibot/</a> and download <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span> (the project is also under github, gerrit, etc. but this is a simple way to get a full self-contained package).
</p><p>Unzip the content in your preferred directory.
</p><p>Unless you want to install the libraries into your Python libs, you are done (if you still want to install them, check the file <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">INSTALL</span> in the base directory).
</p><p>Pywikibot works with Python 2.6 and 2.7 with no issues. Python 3 <s>has been not tested so far with FreeCAD wiki</s> works as well.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>You must save the following Python code as a file with the name <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py</span> in the base directory where you unzipped <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">package/pywikipedia/core.zip</span> (to be clear, in the same directory where you already find a file called <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">user-config.py.sample</span>).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: cp437  -*-</span>
<span class="n">family</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>
<span class="n">mylang</span> <span class="o">=</span> <span class="s1">'en'</span>
<span class="n">usernames</span><span class="p">[</span><span class="s1">'freecadwiki'</span><span class="p">][</span><span class="s1">'en'</span><span class="p">]</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="c1">#usernames['freecadwiki']['freecadwiki'] = u'&lt;&lt;yourWikiUserName&gt;&gt;'</span>
<span class="n">console_encoding</span> <span class="o">=</span> <span class="s1">'cp437'</span>
</pre></div>
<p>In the above code:
</p>
<ul><li>replace <i>&lt;&lt;yourWikiUserName&gt;&gt;</i> with your Wiki user name</li>
<li>replace <i>cp437</i> with your <i>console_encoding</i>. To find out what is your console encoding, for Windows and Linux, launch the Python interpreter, enter <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">import sys</span> followed by <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">print sys.stdout.encoding</span>. Python will write your <span style="font-weight:normal; font-family:monospace, Consolas, Courier New, Courier; border: 1px solid #d8d8d8; padding: 2px 5px 2px 5px;">console_encoding</span> on the screen.</li></ul>
<p><br>
Then you must save the following Python code as a file with the name <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">freecadwiki_family.py</span> under the sub-directory <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/pywikibot/families</span> (together with the other <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">family_xxx.py</span> files).
</p>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># -*- coding: utf-8  -*-</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s1">'$Id: 7f3891c3bbbfbd69c0b005de953514803d783d92 $'</span>

<span class="kn">from</span> <span class="nn">pywikibot</span> <span class="kn">import</span> <span class="n">family</span>


<span class="c1"># The MediaWiki family</span>
<span class="c1"># user-config.py: usernames['mediawiki']['mediawiki'] = 'User name'</span>
<span class="k">class</span> <span class="nc">Family</span><span class="p">(</span><span class="n">family</span><span class="o">.</span><span class="n">WikimediaFamily</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Family</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'freecadwiki'</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">langs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'en'</span><span class="p">:</span> <span class="s1">'www.freecadweb.org'</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">scriptpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'wiki'</span>

    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/index.php'</span> <span class="c1">#The path of index.php, look at your wiki address. </span>
	 
    <span class="k">def</span> <span class="nf">apipath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">'/api.php'</span> <span class="c1">#The path of api.php</span>

    <span class="k">def</span> <span class="nf">version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="c1"># Replace with the actual version being run on your wiki</span>
        <span class="k">return</span> <span class="s1">'1.20.3'</span>

    <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Can be overridden to return 'https'. Other protocols are not supported.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">'http'</span>
        <span class="c1">#return 'https' # My server uses https</span>
</pre></div>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>You are now all set to launch the Pywikibot scripts. The scripts themselves are contained in the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span> subdirectory, from which you can know the names.
</p><p>To launch the scripts, open a shell and move to the base directory (the installation one, NOT the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">/scripts</span> subdirectory), and write
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py &lt;&lt;scriptname&gt;&gt;.py -&lt;&lt;parameter&gt;&gt;</span>
</p><p>where of course you replace <i>&lt;&lt;scriptname&gt;&gt;</i> with the name of the script you are interested in, and <i>&lt;&lt;parameter&gt;&gt;</i> with the parameter(s) required for the given script.
</p><p>To have a description of the usage and parameters of any script, simply use the <i>-help</i> parameter. For instance, to have a description of the <span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">replace.py</span> script (one of the most useful), type
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python pwb.py replace.py -help</span>
</p><p>There is another very useful parameter, valid for all the scripts, called <i>-simulate</i>, that allows you to test commands without harming the Wiki. Use it, before going 'live'.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<p>This command will log into the wiki
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py login.py</span>
</p><p><br>
This command will print a list of all the pages containing a link to SourceForge
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -weblink:sourceforge.net</span>
</p><p><br>
This command will replace all the links to the old SourceForge Forum with a link to the new freecad.org-hosted Forum
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -weblink:sourceforge.net/apps/phpbb/free-cad "sourceforge.net/apps/phpbb/free-cad" "forum.freecad.org"</span>
</p><p><br>
This command will print a list of all the pages containing the word 'PartDesign', starting with the page titled "2d Drafting Module" and going on alphabetically
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py listpages.py -start:"2d Drafting Module" -grep:PartDesign</span>
</p><p><br>
This command will replace all the secure links to the old SourceForge Forum with a link to the new freecad.org-hosted Forum in the translated pages
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">pwb.py replace.py -start:Translations:! "<a rel="nofollow" class="external free" href="https://sourceforge.net/apps/phpbb/free-cad">https://sourceforge.net/apps/phpbb/free-cad</a>" "<a rel="nofollow" class="external free" href="http://forum.freecad.org">http://forum.freecad.org</a>"</span>
</p>
<h2><span class="mw-headline" id="FreeCAD_Wiki_Related_Commands">FreeCAD Wiki Related Commands</span></h2>
<p>Count all pages that a specific wiki templates is used in
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -count GuiCommand</span> 
</p><p><br>
List all pages that a specific wiki templates is used in
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py templatecount -list GuiCommand</span> 
</p><p>Replace a string in all the pages listed in the Arch category
</p><p><span style="font-weight:bold; font-family:monospace, Consolas, Courier New, Courier;">python3 pwb.py replace.py -cat:Arch</span>
</p>
<!-- 
NewPP limit report
Cached time: 20250705094237
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc, no&#8208;toc&#8208;conversion]
CPU time usage: 0.077 seconds
Real time usage: 0.483 seconds
Preprocessor visited node count: 279/1000000
Post&#8208;expand include size: 3511/2097152 bytes
Template argument size: 2085/2097152 bytes
Highest expansion depth: 4/100
Expensive parser function count: 2/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 5572/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%  397.012      1 -total
 96.39%  382.676      2 Template:Code
  1.30%    5.170     12 Template:SystemInput
  0.87%    3.443      1 Template:SystemOutput
  0.46%    1.834     11 Template:FileName
  0.45%    1.804      1 Template:VeryImportantMessage
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:11305-0!canonical and timestamp 20250705094236 and revision id 1601716. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="site.js"></script>