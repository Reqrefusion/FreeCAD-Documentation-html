<link href="site.css" rel="stylesheet" type="text/css"/><div class="mw-page-container"><h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Macro Delta xyz</span></h1><?xml encoding="UTF-8"><div class="mw-parser-output"><div class="mw-pt-languages noprint" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="de/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--complete" title="Macro Delta xyz (100% translated)" lang="de" dir="ltr">Deutsch</a></li>
<li><span class="mw-pt-languages-ui mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="en" dir="ltr">English</span></li>
<li><a href="fr/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--complete" title="Macro Delta xyz (100% translated)" lang="fr" dir="ltr">fran&ccedil;ais</a></li>
<li><a href="hr/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--stub" title="Macro Delta xyz/hr (15% translated)" lang="hr" dir="ltr">hrvatski</a></li>
<li><a href="it/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--complete" title="Macro Delta xyz (100% translated)" lang="it" dir="ltr">italiano</a></li>
<li><a href="pl/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--stub" title="Makrodefinicja: Delta XYZ (5% translated)" lang="pl" dir="ltr">polski</a></li>
<li><a href="cs/Macro_Delta_xyz.html" class="mw-pt-progress mw-pt-progress--complete" title="Makro Delta xyz (100% translated)" lang="cs" dir="ltr">&#269;e&scaron;tina</a></li></ul></div>
<table class="fcinfobox wikitable ct" width="100%" style="float: right; width: 230px; margin-left: 10px;">
<tbody><tr>
<td class="ctTitle" style="font-weight: bold; font-size: 125%;">
<p><span typeof="mw:File"><a href="index.php?title=Macro_Delta_xyz.png&amp;filetimestamp=20190615151918&amp;.html" class="mw-file-description"><img src="File/Macro_Delta_xyz.png" decoding="async" width="32" height="32"></a></span><span> </span>
Macro Delta xyz
</p>
</td></tr>
<tr>
<th class="ctOdd">Description
</th></tr>
<tr>
<td class="ctEven left macro-description">Gives the Delta values and distance between 2 points.<br>Start the macro<br>Select the first point in 3D view<br>Select the second point in 3D view<br>If the "SHIFT" key is pressed, the Delta value begin on coordinate 0,0,0 to point clicked  (the coordinate 0,0,0 is displayed in red).<br>One option is possible for the macro stay resident (continuous) then push "Q" key to quit the macro, and option for impose the number of decimals or use the decimal in the preference option.<br><br>Macro version: 0.2<br>Last modified: 2020-10-23<br>FreeCAD version: All<br>Download: <a rel="nofollow" class="external text" href="https://www.freecadweb.org/wiki/images/f/f4/Macro_Delta_xyz.png">ToolBar Icon</a><br>Author: Mario52<br>
</td></tr>
<tr>
<th class="ctOdd">Author
</th></tr>
<tr>
<td class="ctEven macro-author"><a href="User;Mario52.html" title="User:Mario52">Mario52</a>
</td></tr>
<tr>
<th class="ctOdd">Download
</th></tr>
<tr>
<td class="ctEven macro-download"><a rel="nofollow" class="external text" href="https://www.freecadweb.org/wiki/images/f/f4/Macro_Delta_xyz.png">ToolBar Icon</a>
</td></tr>
<tr>
<th class="ctOdd">Links
</th></tr>
<tr>
<td class="ctEven macro-Links"><a href="Macros_recipes.html" title="Macros recipes">Macros recipes</a><br><a href="How_to_install_macros.html" title="How to install macros">How to install macros</a><br><a href="Customize_Toolbars.html" title="Customize Toolbars">How to customize toolbars</a>
</td></tr>
<tr>
<th class="ctOdd">Macro Version
</th></tr>
<tr>
<td class="ctEven macro-version">0.2
</td></tr>
<tr>
<th class="ctOdd">Date last modified
</th></tr>
<tr>
<td class="ctEven macro-date">2020-10-23
</td></tr>
<tr>
<th class="ctOdd">FreeCAD Version(s)
</th></tr>
<tr>
<td class="ctEven FreeCAD-version">All
</td></tr>
<tr>
<th class="ctOdd">Default shortcut
</th></tr>
<tr>
<td class="ctEven"><span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">SHIFT</span>, <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Q</span>
</td></tr>
<tr>
<th class="ctOdd">See also
</th></tr>
<tr>
<td class="ctEven"><a href="Part_Measure_Linear.html" title="Part Measure Linear">Part Measure Linear</a> <span typeof="mw:File"><a href="index.php?title=Part_Measure_Linear.svg&amp;filetimestamp=20170323081126&amp;.html" class="mw-file-description"><img src="File/Part_Measure_Linear.svg" decoding="async" width="24" height="24"></a></span>
</td></tr>
<tr>
<th class="ctOdd">
</th></tr>
<tr>
<td class="ctToc"><br><meta property="mw:PageProp/toc">
</td></tr>
</tbody></table>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>Gives the Delta values and distance between 2 points.
</p><p>If the <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">SHIFT</span> key is pressed, the Delta value begin on coordinate 0,0,0 to point clicked  (the coordinate 0,0,0 is displayed in red).
</p><p>One option is possible for the macro stay resident (continuous) then push <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Q</span> to quit the macro, and one option for impose the number of decimals.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<ol><li>Start the macro</li>
<li>Select the first point in 3D view</li>
<li>Select the second point in 3D view</li></ol>
<p>If the <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">SHIFT</span> key is pressed, the Delta value begin on coordinate 0,0,0 to point clicked (the coordinate 0,0,0 is displayed in red).
</p><p>If its is configured "Permanent" (continuous), click the <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Q</span> key for quit the macro
</p>
<h2><span class="mw-headline" id="Configure">Configure</span></h2>
<p>For modify the value&nbsp;: go to&nbsp;: FreeCAD &rarr; Menu &rarr; Tools &rarr; Edit parameters... &rarr; BaseApp/Preferences/Macros/FCMmacros/Delta_XYZ.
</p><p><b>_____switchDecimalsPref_____</b>
</p>
<ul><li><code>true</code>  1&nbsp;: the round value takes the global preferences value</li>
<li><code>false</code> 0&nbsp;: the round value takes your choice</li></ul>
<p><b>_____setArrondi_____</b>
</p>
<ul><li>set your choice round value</li>
<li>if your choice = 0&nbsp;: the round value is 3 by default</li></ul>
<p><b>_____switchResident_____</b>
</p>
<ul><li><code>true</code>  1&nbsp;: the macro stay resident (Type <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Q</span> to quit)</li>
<li><code>false</code> 0&nbsp;: the macro is used on run and quit after use</li></ul>
<p><br>
<span class="mw-default-size" typeof="mw:File"><a href="index.php?title=DeltaXYZ.png&amp;filetimestamp=20140510114936&amp;.html" class="mw-file-description"><img src="File/DeltaXYZ.png" decoding="async" width="505" height="229"></a></span>
</p>
<h2><span class="mw-headline" id="Script">Script</span></h2>
<p>ToolBar Icon <span class="mw-default-size" typeof="mw:File"><a href="index.php?title=Macro_Delta_xyz.png&amp;filetimestamp=20190615151918&amp;.html" class="mw-file-description"><img src="File/Macro_Delta_xyz.png" decoding="async" width="64" height="64"></a></span>
</p><p><b>Macro_Delta_xyz.FCMacro</b>
</p>
<pre># -*- coding: utf-8 -*-
#Delta x y z Click Q to quit
#
#OS: Windows 10 (10.0)
#Word size of OS: 64-bit
#Word size of FreeCAD: 64-bit
#Version: 0.19.22808 (Git)
#Build type: Release
#Branch: master
#Hash: 72eb41b24f12b572d55081042160954b93f4614c
#Python version: 3.6.8
#Qt version: 5.12.1
#Coin version: 4.0.0a
#OCC version: 7.3.0
#Locale: French/Mars(fr_Ma)
#
__title__   = "Delta_XYZ"
__author__  = "Mario52"
__url__     = "https://www.freecadweb.org/wiki/Main_Page"
__Wiki__    = "https://wiki.freecadweb.org/Macro_Delta_xyz"
__version__ = "00.02"
__date__    = "2020/10/23"    #YYYY/MM/DD

import Draft, Part
import math
from FreeCAD import Base
import FreeCAD, FreeCADGui
App = FreeCAD
Gui = FreeCADGui

global positionX1 ;positionX1 = 0.0
global positionY1 ;positionY1 = 0.0
global positionZ1 ;positionZ1 = 0.0
global positionX2 ;positionX2 = 0.0
global positionY2 ;positionY2 = 0.0
global positionZ2 ;positionZ2 = 0.0
global pas        ;pas        = 0

global setArrondi                    # round value
global switchResident                # switch resident 0=not resident, 1=stay resident
global switchDecimalsPref            # switch unit preference or not

#### Configuration begin      #### 
#### NOT MODIFY THE CODE HERE ####
#### for modify&nbsp;: go to&nbsp;: FreeCAD &gt;Menu &gt;Tools &gt;Edit parameters... &gt;BaseApp/Preferences/Macros/FCMmacros/Delta_XYZ ####
##
FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).SetString("Version", __version__ + " (" + __date__ + ")")
##
switchResident = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).GetBool("switchResident")   # switch Resident or not
if switchResident == False:
    FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).SetBool("switchResident", switchResident)# switch Resident or not&nbsp;: 0 = Not Resident 1 = Resident
##
switchDecimalsPref = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).GetBool("switchDecimalsPref")   # switch unit preference or not
if switchDecimalsPref == True:
    setArrondi = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Units").GetInt("Decimals")    # unit in preferences
else:
    FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).SetBool("switchDecimalsPref", switchDecimalsPref)# 
    setArrondi = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).GetInt("setArrondi")
    if setArrondi &lt; 1:
        FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).SetInt("setArrondi", 3) # setArrondi
        setArrondi = FreeCAD.ParamGet("User parameter:BaseApp/Preferences/Macros/FCMmacros/" + __title__).GetInt("setArrondi")

##
####Configuration###################################################################################################################

## Tool Draft def&nbsp;: sub, length, dist
def sub(first, other): 
	"sub(Vector,Vector) - subtracts second vector from first one"
	if isinstance(first,FreeCAD.Vector) and isinstance(other,FreeCAD.Vector):
		return FreeCAD.Vector(first.x-other.x, first.y-other.y, first.z-other.z)
def length(first):
	"lengh(Vector) - gives vector length"
	if isinstance(first,FreeCAD.Vector):
		return math.sqrt(first.x*first.x + first.y*first.y + first.z*first.z)
def dist(first, other):
	"dist(Vector,Vector) - returns the distance between both points/vectors"
	if isinstance(first,FreeCAD.Vector) and isinstance(other,FreeCAD.Vector):
		return length(sub(first,other))

import FreeCAD, FreeCADGui 

#########
doc = FreeCAD.ActiveDocument
if doc == None:
    doc = FreeCAD.newDocument("Delta x y z")
#########

##key
global i    &nbsp;; i = 0   
global c    &nbsp;; c = ""
global d    &nbsp;; d = ""
global v    &nbsp;; v = Gui.activeDocument().activeView()
global o    &nbsp;; o = ""
global s    &nbsp;; s = ""
global SHIFT&nbsp;; SHIFT = ""
global DOWN &nbsp;; DOWN = ""
##

class ViewObserver:
    def keyPosition(self, info):
#        global i
#        global c
        global SHIFT
        global DOWN
        global s 
        global d 
        global v
        global o

        SHIFT = ""
        key = info["Key"]

        if (key.upper() == "SHIFT") and (info["ShiftDown"] == False):  #
            SHIFT = "SHIFT"
            DOWN  = "DOWN"
            key   = ""

        if key.upper() == "Q":
            FreeCADGui.Selection.removeObserver(s)                     # Uninstalls the resident function
            v.removeEventCallback("SoKeyboardEvent",d)
            App.Console.PrintMessage("____End Delta_XYZ____" + "\n")
        xx = info["Key"]

class SelObserver:
    def addSelection(self,document, object, element, position):  # Selection
        global pas
        global positionX1
        global positionY1
        global positionZ1
        global positionX2
        global positionY2
        global positionZ2
        global SHIFT
        global DOWN
        global s 
        global d 
        global v

        pas+=1
        if (SHIFT == "SHIFT") and (DOWN == "DOWN"):
            positionX1 = 0.0
            positionY1 = 0.0
            positionZ1 = 0.0
            App.Console.PrintError("Begin   &nbsp;: X1 "+str(positionX1)+" Y1: "+str(positionY1)+" Z1: "+str(positionZ1)+"\n")    
            pas = 2
            SHIFT = DOWN  = ""

        if pas==1:
            positionX1 = round(position[0],setArrondi)
            positionY1 = round(position[1],setArrondi)
            positionZ1 = round(position[2],setArrondi)
            App.Console.PrintMessage("Begin   &nbsp;: X1 "+str(positionX1)+" Y1: "+str(positionY1)+" Z1: "+str(positionZ1)+"\n")    
        else:
            positionX2 = round(position[0],setArrondi)
            positionY2 = round(position[1],setArrondi)
            positionZ2 = round(position[2],setArrondi)
            App.Console.PrintMessage("End     &nbsp;: X2 "+str(positionX2)+" Y2: "+str(positionY2)+" Z2: "+str(positionZ2)+"\n")    
            App.Console.PrintMessage("Delta X &nbsp;: "+str(round(abs(positionX1-positionX2),setArrondi))+"\n")    
            App.Console.PrintMessage("Delta Y &nbsp;: "+str(round(abs(positionY1-positionY2),setArrondi))+"\n")    
            App.Console.PrintMessage("Delta Z &nbsp;: "+str(round(abs(positionZ1-positionZ2),setArrondi))+"\n")    
            v1=FreeCAD.Vector(positionX1,positionY1,positionZ1)
            v2=FreeCAD.Vector(positionX2,positionY2,positionZ2)
            distance = dist(v1,v2)
            App.Console.PrintMessage("Distance&nbsp;: "+ str(round(distance,setArrondi))+"\n")
            App.Console.PrintMessage("__________________________________"+"\n")
            pas=0
            if switchResident == False:
                FreeCADGui.Selection.removeObserver(s)                     # Uninstalls the resident function
                v.removeEventCallback("SoKeyboardEvent",d)                 # Uninstalls the resident function


pas = 0
s=SelObserver()
FreeCADGui.Selection.addObserver(s)          # install the function mode resident 
## key
o = ViewObserver()                           # install the function mode resident 
d = v.addEventCallback("SoKeyboardEvent",o.keyPosition)
App.Console.PrintMessage("____Begin Delta_XYZ____" + "\n")
##
FreeCAD.Console.PrintMessage("\n"+"####Configure################################################################################################" + "\n\n")
FreeCAD.Console.PrintMessage("For modify the value&nbsp;: go to&nbsp;: FreeCAD &gt;Menu &gt;Tools &gt;Edit parameters... &gt;BaseApp/Preferences/Macros/FCMmacros/Delta_XYZ"+"\n\n")
FreeCAD.Console.PrintMessage("_____switchDecimalsPref_____  ")
FreeCAD.Console.PrintError("Actual " + str(switchDecimalsPref)+"\n")
FreeCAD.Console.PrintMessage("switchDecimalsPref&nbsp;: True  1&nbsp;: the round value takes the global preferences value "+"\n")
FreeCAD.Console.PrintMessage("                  &nbsp;: False 0&nbsp;: the round value takes your choice "+"\n\n")
FreeCAD.Console.PrintMessage("_____setArrondi_____  ")
FreeCAD.Console.PrintError("Actual " + str(setArrondi)+"\n")
FreeCAD.Console.PrintMessage("setArrondi        &nbsp;: set your choice round value"+"\n")
FreeCAD.Console.PrintMessage("                  &nbsp;: if your choice = 0&nbsp;: the round value is 3 by default "+"\n\n")
FreeCAD.Console.PrintMessage("_____switchResident_____  ")
FreeCAD.Console.PrintError("Actual " + str(switchResident)+"\n")
FreeCAD.Console.PrintMessage("switchResident    &nbsp;: True  1&nbsp;: the macro stay resident (Type Q to quit)"+"\n")
FreeCAD.Console.PrintMessage("                  &nbsp;: False 0&nbsp;: the macro is used on run and quit after use"+"\n")
FreeCAD.Console.PrintMessage("\n"+"####Configure end############################################################################################" + "\n")
FreeCAD.Console.PrintMessage("\n"+"####Use######################################################################################################" + "\n")
FreeCAD.Console.PrintMessage("Use&nbsp;: click the first point, click the second point, the data is diplayed"+"\n")
FreeCAD.Console.PrintMessage("   &nbsp;: press the SHIFT button click the point, the Delta is displayed with the coordinate X=0,Y=0,Z=0 to point clicked X, Y, Z"+"\n")
FreeCAD.Console.PrintMessage("   &nbsp;: the first coordinate X=0, Y=0, Z=0 is displayed in red"+"\n")
FreeCAD.Console.PrintMessage("####Use end#######################################################################################################" + "\n\n")
##</pre>
<div style="clear:both"></div>
<h2><span class="mw-headline" id="Version">Version</span></h2>
<p>Version 0.2 2020-10-23&nbsp;: adding push the key <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">SHIFT</span>, click one point and the delta value begin 0,0,0 to point clicked, <span style="background: #f9f9f9; -moz-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); -webkit-box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1); border: 1px solid #888888; border-radius: 0.3em; padding: 0px 5px 1px 5px;">Q</span> for quit the macro <br>Adding options configurable in preference FC
</p><p>Version 0.1 2013-11-29&nbsp;: <a rel="nofollow" class="external text" href="https://forum.freecadweb.org/viewtopic.php?f=3&amp;t=5036">view toolbar&nbsp;: measure distance tool</a>
</p>
<!-- 
NewPP limit report
Cached time: 20250705105933
Cache expiry: 86400
Reduced expiry: false
Complications: [show&#8208;toc, no&#8208;toc&#8208;conversion]
CPU time usage: 0.100 seconds
Real time usage: 0.127 seconds
Preprocessor visited node count: 200/1000000
Post&#8208;expand include size: 5515/2097152 bytes
Template argument size: 10851/2097152 bytes
Highest expansion depth: 5/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post&#8208;expand size: 10653/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   17.863      1 -total
 36.36%    6.495      1 Template:Macro
 19.90%    3.554      1 Template:MacroCode
 14.93%    2.668      9 Template:KEY
 14.91%    2.663      1 Template:Clear
 11.16%    1.994      2 Template:False
 10.02%    1.789      2 Template:True
-->

<!-- Saved in parser cache with key freecadweb_db01-wiki_:pcache:idhash:12080-0!canonical and timestamp 20250705105932 and revision id 1601939. Rendering was triggered because: edit-page
 -->
</div>
</div><script src="site.js"></script>